Enter your prompt here

# Project Files

- c:\Users\rexma\Desktop\chambing-website\src\locales\en\translation.json
- c:\Users\rexma\Desktop\chambing-website\src\styles\variables.scss
- c:\Users\rexma\Desktop\chambing-website\src\styles\globals.scss
- c:\Users\rexma\Desktop\chambing-website\src\services\api.js
- c:\Users\rexma\Desktop\chambing-website\.env
- c:\Users\rexma\Desktop\chambing-website\src\utils\helpers.js
- c:\Users\rexma\Desktop\chambing-website\src\utils\constants.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useForm.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useNotification.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useLocalStorage.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useApi.js
- c:\Users\rexma\Desktop\chambing-website\src\context\AppContext.jsx
- c:\Users\rexma\Desktop\chambing-website\src\context\AuthContext.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\common\navbar.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\auth\RegisterForm.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\common\footer.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\auth\LoginForm.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\auth\ProtectedRoute.jsx
- c:\Users\rexma\Desktop\chambing-website\src\services\profileService.js
- c:\Users\rexma\Desktop\chambing-website\src\components\ProfilePhotoModal.jsx
- c:\Users\rexma\Desktop\chambing-website\src\pages\Dashboard.jsx
- c:\Users\rexma\Desktop\chambing-website\src\App.jsx
- c:\Users\rexma\Desktop\chambing-website\package.json
- c:\Users\rexma\Desktop\chambing-website\src\i18n\config.js
- c:\Users\rexma\Desktop\chambing-website\src\locales\fr\translation.json
- c:\Users\rexma\Desktop\chambing-website\src\locales\es\translation.json
- c:\Users\rexma\Desktop\chambing-website\src\App.css
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useTranslations.js
- c:\Users\rexma\Desktop\chambing-website\src\components\common\LanguageSelector.jsx
- c:\Users\rexma\Desktop\chambing-website\src\main.jsx
- c:\Users\rexma\Desktop\chambing-website\src\services\paymentsService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\contractService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\serviceService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\userService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\authService.js
- c:\Users\rexma\Desktop\chambing-website\src\theme\muiTheme.js
- c:\Users\rexma\Desktop\chambing-website\src\pages\Home.jsx
- c:\Users\rexma\Desktop\chambing-website\vite.config.js

## c:\Users\rexma\Desktop\chambing-website\src\locales\en\translation.json
```
{
  "common": {
    "loading": "Loading...",
    "error": "Error",
    "success": "Success",
    "cancel": "Cancel",
    "confirm": "Confirm",
    "save": "Save",
    "edit": "Edit",
    "delete": "Delete",
    "search": "Search",
    "back": "Back",
    "next": "Next",
    "previous": "Previous",
    "close": "Close",
    "language": "Language",
    "or": "or",
    "debugInfo": "Debug Info",
    "mode": "Mode",
    "currentLanguage": "Current Language",
    "admin": "Administrator"
  },
  "nav": {
    "home": "Home",
    "services": "Services",
    "dashboard": "Dashboard",
    "profile": "My Profile",
    "login": "Sign In",
    "register": "Sign Up",
    "logout": "Sign Out"
  },
  "auth": {
    "login": {
      "title": "Sign In",
      "subtitle": "Access your ChambingApp account",
      "email": "Email",
      "password": "Password",
      "loginButton": "Sign In",
      "loginButtonLoading": "Signing in...",
      "noAccount": "Don't have an account?",
      "registerHere": "Sign up here",
      "testData": "Test data for testing:",
      "clientUser": "Client User",
      "workerUser": "Worker User",
      "autoFillInfo": "Click to auto-fill the fields"
    },
    "register": {
      "title": "Create Account",
      "subtitle": "Join the ChambingApp community",
      "name": "First Name",
      "lastName": "Last Name",
      "email": "Email",
      "phone": "Phone",
      "department": "Department",
      "municipality": "Municipality",
      "password": "Password",
      "confirmPassword": "Confirm Password",
      "userType": "User Type",
      "client": "Client - Looking for services",
      "worker": "Worker - Offering services",
      "clientHelp": "You'll be able to hire services",
      "workerHelp": "You'll be able to offer your services",
      "registerButton": "Create Account",
      "registerButtonLoading": "Creating account...",
      "haveAccount": "Already have an account?",
      "loginHere": "Sign in here"
    },
    "validation": {
      "required": "This field is required",
      "emailInvalid": "Invalid email",
      "passwordMin": "Password must be at least 6 characters",
      "passwordMatch": "Passwords must match"
    }
  },
  "home": {
    "hero": {
      "title": "Connecting talent with opportunities",
      "subtitle": "Find qualified professionals for your home or join as an independent worker",
      "startNow": "Get Started",
      "login": "Sign In",
      "dashboard": "Go to Dashboard"
    },
    "services": {
      "title": "Our Services",
      "subtitle": "Find the perfect professional for every task",
      "viewProfessionals": "View Professionals"
    },
    "features": {
      "title": "Why choose us?",
      "verifiedWorkers": {
        "title": "Verified Workers",
        "description": "All our professionals go through a rigorous verification process"
      },
      "availability": {
        "title": "24/7 Availability",
        "description": "Find help when you need it, any day of the week"
      },
      "securePayments": {
        "title": "Secure Payments",
        "description": "Protected payment system with multiple payment options"
      }
    },
    "testimonials": {
      "title": "What our users say"
    },
    "cta": {
      "title": "Ready to get started?",
      "subtitle": "Join thousands of satisfied users in El Salvador",
      "createAccount": "Create Free Account"
    }
  },
  "dashboard": {
    "welcome": "Welcome, {{name}}!",
    "editProfile": "Edit Profile",
    "changePhoto": "Change Profile Photo",
    "userType": "Type: {{type}}",
    "location": "{{department}}, {{municipality}}",
    "stats": {
      "availableServices": "Available Services",
      "myContracts": "My Contracts",
      "availableBalance": "Available Balance",
      "notifications": "Notifications"
    },
    "availableServices": "Available Services",
    "recentContracts": "Recent Contracts",
    "viewAll": "View All",
    "noContracts": {
      "title": "You don't have any contracts yet",
      "subtitle": "Start by exploring our available services",
      "exploreServices": "Explore Services"
    },
    "contract": {
      "number": "Contract #{{id}}",
      "status": "Status: {{status}}",
      "date": "Date: {{date}}",
      "viewDetails": "View Details"
    }
  },
  "services": {
    "categories": {
      "domesticCleaning": "House Cleaning",
      "plumbing": "Plumbing",
      "electricity": "Electrical",
      "gardening": "Gardening",
      "carpentry": "Carpentry",
      "construction": "Construction"
    },
    "descriptions": {
      "domesticCleaning": "Professional home cleaning service",
      "plumbing": "Plumbing repairs and installations",
      "electricity": "Electrical installations and repairs",
      "gardening": "Garden and green area maintenance",
      "carpentry": "Woodwork and furniture",
      "construction": "Construction and remodeling work"
    }
  },
  "footer": {
    "description": "Connecting talent with opportunities in El Salvador.",
    "services": "Services",
    "company": "Company",
    "about": "About",
    "terms": "Terms of Service",
    "privacy": "Privacy Policy",
    "help": "Help",
    "contact": "Contact",
    "email": "info@chambingapp.com",
    "phone": "+503 2234-5678",
    "address": "San Salvador, El Salvador",
    "rights": "© 2024 ChambingApp. All rights reserved."
  },
  "profile": {
    "photoModal": {
      "title": "Change Profile Photo",
      "instructions": "Click the camera icon to select a new photo.",
      "formats": "Allowed formats: JPG, PNG, WebP (max 5MB)",
      "selectedFile": "Selected file: {{filename}}",
      "fileSize": "Size: {{size}} MB",
      "uploading": "Uploading...",
      "savePhoto": "Save Photo",
      "errors": {
        "invalidFormat": "Only JPG, PNG or WebP files are allowed",
        "tooLarge": "File cannot be larger than 5MB",
        "uploadError": "Error uploading photo"
      }
    }
  },
  "contracts": {
    "status": {
      "pending": "Pending",
      "inProgress": "In Progress",
      "completed": "Completed",
      "cancelled": "Cancelled",
      "disputed": "Disputed"
    }
  },
  "errors": {
    "networkError": "Network error",
    "serverError": "Server error",
    "authError": "Authentication error",
    "validationError": "Validation error",
    "notFound": "Not found",
    "permissionDenied": "Permission denied",
    "unknown": "Unknown error"
  },
  "success": {
    "login": "Login successful",
    "register": "Registration successful",
    "profileUpdated": "Profile updated",
    "contractCreated": "Contract created",
    "paymentCompleted": "Payment completed",
    "generic": "Operation successful"
  },
  "departments": {
    "ahuachapan": "Ahuachapán",
    "cabanas": "Cabañas",
    "chalatenango": "Chalatenango",
    "cuscatlan": "Cuscatlán",
    "laLibertad": "La Libertad",
    "laPaz": "La Paz",
    "laUnion": "La Unión",
    "morazan": "Morazán",
    "sanMiguel": "San Miguel",
    "sanSalvador": "San Salvador",
    "sanVicente": "San Vicente",
    "santaAna": "Santa Ana",
    "sonsonate": "Sonsonate",
    "usulutan": "Usulután"
  },
  "testimonials": {
    "maria": "Excellent service, very professional and punctual.",
    "carlos": "They solved my plumbing problem quickly.",
    "ana": "Very happy with the gardening work done."
  },
  "welcome": "Welcome to ChambingApp",
  "test": "Translation test in English"
}
```

## c:\Users\rexma\Desktop\chambing-website\src\styles\variables.scss
```
// Colores principales
$primary-color: #2563eb;
$secondary-color: #64748b;
$success-color: #10b981;
$warning-color: #f59e0b;
$danger-color: #ef4444;
$light-color: #f8fafc;
$dark-color: #1e293b;

// Tipografía
$font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
$font-size-base: 1rem;
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-bold: 700;

// Espaciado
$spacing-xs: 0.25rem;
$spacing-sm: 0.5rem;
$spacing-md: 1rem;
$spacing-lg: 1.5rem;
$spacing-xl: 2rem;
$spacing-2xl: 3rem;

// Breakpoints
$mobile: 768px;
$tablet: 1024px;
$desktop: 1280px;

// Bordes
$border-radius-sm: 0.25rem;
$border-radius-md: 0.5rem;
$border-radius-lg: 0.75rem;
$border-radius-xl: 1rem;

// Sombras
$shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
$shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
$shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
```

## c:\Users\rexma\Desktop\chambing-website\src\styles\globals.scss
```
@use 'variables' as *;

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Roboto', $font-family-base;
  font-size: $font-size-base;
  line-height: 1.6;
  color: $dark-color;
  background-color: $light-color;
}

// Estilos personalizados para complementar MUI
.custom-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 $spacing-md;
  
  @media (min-width: $tablet) {
    padding: 0 $spacing-lg;
  }
}

// Utilidades adicionales que complementan MUI
.full-height {
  height: 100vh;
}

.center-content {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

// Estilos para formularios personalizados
.form-container {
  max-width: 400px;
  margin: 0 auto;
  padding: $spacing-xl;
  
  @media (max-width: $mobile) {
    padding: $spacing-md;
  }
}
```

## c:\Users\rexma\Desktop\chambing-website\src\services\api.js
```
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001/api';

const api = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Variable para evitar múltiples redirects
let isRedirecting = false;

api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
      console.log('🔧 API: Token agregado a la petición');
    } else {
      console.log('🔧 API: No hay token disponible');
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

api.interceptors.response.use(
  (response) => {
    console.log('✅ API: Respuesta exitosa', response.status);
    return response;
  },
  async (error) => {
    console.log('❌ API: Error en respuesta', error.response?.status, error.response?.data);
    
    if (error.response?.status === 401) {
      console.log('🔍 API: Detectado error 401 - token inválido o expirado');
      
      // Evitar múltiples redirects simultáneos
      if (isRedirecting) {
        return Promise.reject(error);
      }
      
      // Intentar refrescar el token antes de hacer logout
      const refreshToken = localStorage.getItem('refresh_token');
      
      if (refreshToken && !error.config._retry) {
        console.log('🔄 API: Intentando refrescar token...');
        error.config._retry = true;
        
        try {
          // Usar una instancia separada para evitar interceptor recursivo
          const refreshResponse = await axios.post(`${API_BASE_URL}/auth/refresh`, {
            refreshToken: refreshToken  // ✅ Backend espera 'refreshToken'
          });
          
          const newToken = refreshResponse.data.accessToken;  // ✅ Backend retorna 'accessToken'
          localStorage.setItem('token', newToken);
          
          // Reintentar la petición original con el nuevo token
          error.config.headers.Authorization = `Bearer ${newToken}`;
          console.log('✅ API: Token refrescado, reintentando petición...');
          return api.request(error.config);
          
        } catch (refreshError) {
          console.log('❌ API: Error al refrescar token, haciendo logout...');
          // Si el refresh falla, entonces sí hacer logout
          handleLogout();
        }
      } else {
        console.log('❌ API: No hay refresh token o ya se intentó, haciendo logout...');
        handleLogout();
      }
    }
    
    return Promise.reject(error);
  }
);

// Función separada para manejar logout
function handleLogout() {
  if (isRedirecting) return;
  
  isRedirecting = true;
  console.log('🚪 API: Ejecutando logout automático...');
  
  // Limpiar localStorage
  localStorage.removeItem('token');
  localStorage.removeItem('refresh_token');
  localStorage.removeItem('user');
  
  // Redirigir después de un pequeño delay para evitar problemas de race condition
  setTimeout(() => {
    window.location.href = '/login';
    isRedirecting = false;
  }, 100);
}

export default api;
```

## c:\Users\rexma\Desktop\chambing-website\.env
```
VITE_API_URL=http://localhost:3000/api
VITE_APP_NAME=FreelanceApp
```

## c:\Users\rexma\Desktop\chambing-website\src\utils\helpers.js
```
export const formatCurrency = (amount, currency = 'USD') => {
  return new Intl.NumberFormat('es-SV', {
    style: 'currency',
    currency: currency,
  }).format(amount);
};

export const formatDate = (date, options = {}) => {
  const defaultOptions = {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    ...options,
  };
  
  return new Intl.DateTimeFormat('es-SV', defaultOptions).format(new Date(date));
};

export const formatPhoneNumber = (phone) => {
  // Format salvadoran phone numbers
  const cleaned = phone.replace(/\D/g, '');
  const match = cleaned.match(/^(\d{4})(\d{4})$/);
  
  if (match) {
    return `${match[1]}-${match[2]}`;
  }
  
  return phone;
};

export const getInitials = (name) => {
  return name
    .split(' ')
    .map(word => word.charAt(0))
    .join('')
    .toUpperCase()
    .slice(0, 2);
};

export const truncateText = (text, maxLength = 100) => {
  if (text.length <= maxLength) return text;
  return text.slice(0, maxLength) + '...';
};

export const debounce = (func, wait) => {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
};

export const generateUniqueId = () => {
  return Date.now().toString(36) + Math.random().toString(36).substr(2);
};

export const isValidEmail = (email) => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
};

export const capitalizeFirst = (str) => {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
};
```

## c:\Users\rexma\Desktop\chambing-website\src\utils\constants.js
```
export const USER_TYPES = {
  CLIENTE: 'cliente',
  TRABAJADOR: 'trabajador',
  ADMIN: 'admin',
};

export const CONTRACT_STATES = {
  PENDIENTE: 'pendiente',
  ACEPTADO: 'aceptado',
  EN_PROGRESO: 'en_progreso',
  COMPLETADO: 'completado',
  CANCELADO: 'cancelado',
};

export const PAYMENT_STATES = {
  PENDIENTE: 'pendiente',
  PROCESANDO: 'procesando',
  COMPLETADO: 'completado',
  FALLIDO: 'fallido',
  REEMBOLSADO: 'reembolsado',
};

export const NOTIFICATION_TYPES = {
  SUCCESS: 'success',
  ERROR: 'error',
  WARNING: 'warning',
  INFO: 'info',
};

export const API_ENDPOINTS = {
  AUTH: {
    LOGIN: '/auth/login',
    REGISTER: '/auth/register',
    LOGOUT: '/auth/logout',
    REFRESH: '/auth/refresh',
  },
  USERS: {
    PROFILE: '/users/profile',
    UPDATE_PROFILE: '/users/profile',
    UPLOAD_PHOTO: '/users/profile-photo',
  },
  SERVICES: {
    CATEGORIES: '/services/categories',
    WORKER_CATEGORIES: '/services/worker-categories',
    TARIFFS: '/services/tariffs',
  },
  CONTRACTS: {
    BASE: '/contracts',
    MY_CONTRACTS: '/contracts/my-contracts',
    STATES: '/contracts/states',
  },
  PAYMENTS: {
    BASE: '/payments',
    HISTORY: '/payments/history',
    BALANCE: '/payments/balance',
    WOMPI: '/payments/wompi',
  },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useForm.js
```
import { useState } from 'react';

export const useForm = (initialValues = {}, validationSchema = null) => {
  const [values, setValues] = useState(initialValues);
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleChange = (name, value) => {
    setValues(prev => ({
      ...prev,
      [name]: value,
    }));

    
    if (errors[name]) {
      setErrors(prev => ({
        ...prev,
        [name]: undefined,
      }));
    }
  };

  const handleBlur = (name) => {
    setTouched(prev => ({
      ...prev,
      [name]: true,
    }));

    
    if (validationSchema) {
      validateField(name, values[name]);
    }
  };

  const validateField = (name, value) => {
    if (!validationSchema) return true;

    try {
      validationSchema.validateSyncAt(name, { [name]: value });
      setErrors(prev => ({
        ...prev,
        [name]: undefined,
      }));
      return true;
    } catch (error) {
      setErrors(prev => ({
        ...prev,
        [name]: error.message,
      }));
      return false;
    }
  };

  const validateForm = () => {
    if (!validationSchema) return true;

    try {
      validationSchema.validateSync(values, { abortEarly: false });
      setErrors({});
      return true;
    } catch (error) {
      const formErrors = {};
      error.inner.forEach(err => {
        formErrors[err.path] = err.message;
      });
      setErrors(formErrors);
      return false;
    }
  };

  const handleSubmit = async (onSubmit) => {
    setIsSubmitting(true);
    
    // Mark all fields as touched
    const touchedFields = {};
    Object.keys(values).forEach(key => {
      touchedFields[key] = true;
    });
    setTouched(touchedFields);

    // Validate form
    if (!validateForm()) {
      setIsSubmitting(false);
      return;
    }

    try {
      await onSubmit(values);
    } catch (error) {
      console.error('Form submission error:', error);
    } finally {
      setIsSubmitting(false);
    }
  };

  const reset = (newValues = initialValues) => {
    setValues(newValues);
    setErrors({});
    setTouched({});
    setIsSubmitting(false);
  };

  return {
    values,
    errors,
    touched,
    isSubmitting,
    handleChange,
    handleBlur,
    handleSubmit,
    reset,
    setValues,
    setErrors,
  };
};

```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useNotification.js
```
import { useApp } from '../context/AppContext';

export const useNotification = () => {
  const { addNotification, removeNotification, notifications } = useApp();

  const showSuccess = (message, options = {}) => {
    addNotification({
      type: 'success',
      message,
      ...options,
    });
  };

  const showError = (message, options = {}) => {
    addNotification({
      type: 'error',
      message,
      ...options,
    });
  };

  const showWarning = (message, options = {}) => {
    addNotification({
      type: 'warning',
      message,
      ...options,
    });
  };

  const showInfo = (message, options = {}) => {
    addNotification({
      type: 'info',
      message,
      ...options,
    });
  };

  return {
    notifications,
    showSuccess,
    showError,
    showWarning,
    showInfo,
    removeNotification,
  };
};
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useLocalStorage.js
```
import { useState, useEffect } from "react";

export const useLocalStorage = (key, initialValue) => {
    const [storedValue, setStoredValue] = useState(() => {
        try {
            const item = window.localStorage.getItem(key);
            return item ? JSON.parse(item) : initialValue;
        } catch (error) {
            console.error(`Error reading localStorage key "${key}":`, error);
            return initialValue;
        }
    });
const setValue = (value) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(`Error setting localStorage key "${key}":`, error);
    }
  };

  const removeValue = () => {
    try {
      window.localStorage.removeItem(key);
      setStoredValue(initialValue);
    } catch (error) {
      console.error(`Error removing localStorage key "${key}":`, error);
    }
  };

  return [storedValue, setValue, removeValue];

}
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useApi.js
```
import { useState, useEffect } from 'react';

export const useApi = (apiFunction, dependencies = []) => {
    const [data, setData] = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        setError(null);
        console.log('🔄 useApi: Fetching data...');
        const result = await apiFunction();
        setData(result);
        console.log('✅ useApi: Data fetched successfully');
      } catch (err) {
        console.error('❌ useApi: Error fetching data', err);
        setError(err.response?.data?.message || err.message || 'Error desconocido');
      } finally {
        setLoading(false);
      }
    };

     fetchData();
  }, dependencies);

  const refetch = async () => {
    try {
      setLoading(true);
      setError(null);
      const result = await apiFunction();
      setData(result);
      return result;
    } catch (err) {
      setError(err.response?.data?.message || err.message || 'Error desconocido');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  return { data, loading, error, refetch };
};

```

## c:\Users\rexma\Desktop\chambing-website\src\context\AppContext.jsx
```
import React, { createContext, useContext, useReducer, useEffect } from 'react';
import { serviceService } from '../services/serviceService';
import { contractService } from '../services/contractService';

const AppContext = createContext();

const appReducer = (state, action) => {
  switch (action.type) {
    case 'SET_LOADING':
      return { ...state, loading: action.payload };
    case 'SET_ERROR':
      return { ...state, error: action.payload, loading: false };
    case 'CLEAR_ERROR':
      return { ...state, error: null };
    case 'SET_CATEGORIES':
      return { ...state, categories: action.payload };
    case 'SET_CONTRACTS':
      return { ...state, contracts: action.payload };
    case 'ADD_CONTRACT':
      return { 
        ...state, 
        contracts: [action.payload, ...state.contracts] 
      };
    case 'UPDATE_CONTRACT':
      return {
        ...state,
        contracts: state.contracts.map(contract =>
          contract.id === action.payload.id ? action.payload : contract
        ),
      };
    case 'SET_NOTIFICATIONS':
      return { ...state, notifications: action.payload };
    case 'ADD_NOTIFICATION':
      return {
        ...state,
        notifications: [action.payload, ...state.notifications],
      };
    case 'REMOVE_NOTIFICATION':
      return {
        ...state,
        notifications: state.notifications.filter(
          notification => notification.id !== action.payload
        ),
      };
    default:
      return state;
  }
};

const initialState = {
  loading: false,
  error: null,
  categories: [],
  contracts: [],
  notifications: [],
};

export const AppProvider = ({ children }) => {
  const [state, dispatch] = useReducer(appReducer, initialState);

  // Load initial data
  useEffect(() => {
    loadCategories();
  }, []);

  const setLoading = (loading) => {
    dispatch({ type: 'SET_LOADING', payload: loading });
  };

  const setError = (error) => {
    dispatch({ type: 'SET_ERROR', payload: error });
  };

  const clearError = () => {
    dispatch({ type: 'CLEAR_ERROR' });
  };

  const loadCategories = async () => {
    try {
      console.log('📂 AppContext: Cargando categorías...');
      const categories = await serviceService.getCategories();
      dispatch({ type: 'SET_CATEGORIES', payload: categories });
      console.log('✅ AppContext: Categorías cargadas', categories.length);
    } catch (error) {
      console.error('❌ AppContext: Error cargando categorías', error);
      // No mostrar error en UI para categorías, usar datos mock
      const mockCategories = [
        { id: 1, nombre: 'Limpieza Doméstica', descripcion: 'Servicio de limpieza para el hogar', icono: 'cleaning' },
        { id: 2, nombre: 'Plomería', descripcion: 'Reparaciones e instalaciones', icono: 'plumbing' },
        { id: 3, nombre: 'Electricidad', descripcion: 'Trabajos eléctricos', icono: 'electrical' },
        { id: 4, nombre: 'Jardinería', descripcion: 'Mantenimiento de jardines', icono: 'garden' },
        { id: 5, nombre: 'Carpintería', descripcion: 'Trabajos en madera', icono: 'carpenter' },
        { id: 6, nombre: 'Construcción', descripcion: 'Obras y remodelaciones', icono: 'build' },
      ];
      dispatch({ type: 'SET_CATEGORIES', payload: mockCategories });
    }
  };

  const loadContracts = async () => {
    try {
      setLoading(true);
      console.log('📋 AppContext: Cargando contratos...');
      const contracts = await contractService.getMyContracts();
      dispatch({ type: 'SET_CONTRACTS', payload: contracts });
      console.log('✅ AppContext: Contratos cargados', contracts.length);
    } catch (error) {
      console.error('❌ AppContext: Error cargando contratos', error);
      setError('Error al cargar contratos');
    } finally {
      setLoading(false);
    }
  };

  const createContract = async (contractData) => {
    try {
      setLoading(true);
      console.log('📝 AppContext: Creando contrato...');
      const newContract = await contractService.createContract(contractData);
      dispatch({ type: 'ADD_CONTRACT', payload: newContract });
      addNotification({
        type: 'success',
        message: 'Contrato creado exitosamente',
      });
      console.log('✅ AppContext: Contrato creado', newContract);
      return newContract;
    } catch (error) {
      console.error('❌ AppContext: Error creando contrato', error);
      setError('Error al crear contrato');
      throw error;
    } finally {
      setLoading(false);
    }
  };

  const updateContract = async (contractId, updateData) => {
    try {
      setLoading(true);
      console.log('📝 AppContext: Actualizando contrato...');
      const updatedContract = await contractService.updateContractStatus(contractId, updateData);
      dispatch({ type: 'UPDATE_CONTRACT', payload: updatedContract });
      addNotification({
        type: 'success',
        message: 'Contrato actualizado exitosamente',
      });
      return updatedContract;
    } catch (error) {
      console.error('❌ AppContext: Error actualizando contrato', error);
      setError('Error al actualizar contrato');
      throw error;
    } finally {
      setLoading(false);
    }
  };

  const addNotification = (notification) => {
    const notificationWithId = {
      id: Date.now(),
      timestamp: new Date(),
      ...notification,
    };
    dispatch({ type: 'ADD_NOTIFICATION', payload: notificationWithId });

    // Auto remove notification after 5 seconds
    setTimeout(() => {
      removeNotification(notificationWithId.id);
    }, 5000);
  };

  const removeNotification = (notificationId) => {
    dispatch({ type: 'REMOVE_NOTIFICATION', payload: notificationId });
  };

  const value = {
    ...state,
    setLoading,
    setError,
    clearError,
    loadCategories,
    loadContracts,
    createContract,
    updateContract,
    addNotification,
    removeNotification,
  };

  return <AppContext.Provider value={value}>{children}</AppContext.Provider>;
};

export const useApp = () => {
  const context = useContext(AppContext);
  if (!context) {
    throw new Error('useApp must be used within an AppProvider');
  }
  return context;
};

```

## c:\Users\rexma\Desktop\chambing-website\src\context\AuthContext.jsx
```
import React, { createContext, useContext, useState, useReducer, useEffect } from 'react';
import { authService } from '../services/authService'; 

const AuthContext = createContext();

// Debug: Verificar múltiples instancias
console.log('🔍 AuthContext module loaded:', new Date().toISOString());

const authReducer = (state, action) => {
  switch (action.type) {
    case 'LOGIN_START':
      return { ...state, loading: true, error: null };
      
    case 'LOGIN_SUCCESS':
      // Validación para evitar el error
      if (!action.payload) {
        console.error('❌ LOGIN_SUCCESS: payload es undefined');
        return {
          ...state,
          loading: false,
          error: 'Error en la respuesta del servidor',
          isAuthenticated: false,
        };
      }
      
      // ⭐ SOLUCIÓN: Guardar token en localStorage
      const token = action.payload.access_token || action.payload.token;
      const user = action.payload.user;
      
      if (token) {
        localStorage.setItem('token', token);
        console.log('✅ Token guardado en localStorage:', token.substring(0, 20) + '...');
      }
      
      if (user) {
        localStorage.setItem('user', JSON.stringify(user));
        console.log('✅ Usuario guardado en localStorage:', user.email);
      }
      
      return {
        ...state,
        loading: false,
        user: user || null,
        token: token || null,
        isAuthenticated: true,
        error: null,
      };
      
    case 'LOGIN_FAILURE':
      return {
        ...state,
        loading: false,
        error: action.payload,
        isAuthenticated: false,
      };
      
    case 'LOGOUT':
      // ⭐ Limpiar localStorage en logout
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      console.log('🚪 Token y usuario removidos del localStorage');
      
      return {
        ...state,
        user: null,
        token: null,
        isAuthenticated: false,
        loading: false,
        error: null,
      };
      
    case 'SET_USER':
      return {
        ...state,
        user: action.payload,
      };
      
    case 'UPDATE_USER':
      // Actualizar usuario y guardarlo en localStorage
      const updatedUser = {
        ...state.user,
        ...action.payload
      };
      
      localStorage.setItem('user', JSON.stringify(updatedUser));
      console.log('🔄 Usuario actualizado en localStorage');
      
      return {
        ...state,
        user: updatedUser
      };
      
    case 'REFRESH_USER_START':
      return {
        ...state,
        loading: true
      };
      
    case 'REFRESH_USER_SUCCESS':
      // Guardar usuario actualizado en localStorage
      if (action.payload) {
        localStorage.setItem('user', JSON.stringify(action.payload));
        console.log('✅ Usuario actualizado desde servidor');
      }
      
      return {
        ...state,
        loading: false,
        user: action.payload,
        error: null
      };
      
    case 'REFRESH_USER_FAILURE':
      return {
        ...state,
        loading: false,
        error: action.payload
      };
      
    case 'SET_LOADING':
      return {
        ...state,
        loading: action.payload,
      };
      
    case 'SET_ERROR':
      return {
        ...state,
        error: action.payload,
        loading: false,
      };
      
    case 'CLEAR_ERROR':
      return {
        ...state,
        error: null,
      };
      
    // ⭐ NUEVO: Para inicialización desde localStorage
    case 'INIT_FROM_STORAGE':
      return {
        ...state,
        user: action.payload.user,
        token: action.payload.token,
        isAuthenticated: true,
        loading: false,
        error: null,
      };
      
    case 'INIT_COMPLETE':
      return {
        ...state,
        loading: false,
      };
      
    default:
      return state;
  }
};

const initialState = {
  user: null,
  token: null,
  isAuthenticated: false,
  loading: true, // ⭐ IMPORTANTE: Empezar con loading=true para evitar redirects prematuros
  error: null,
};

export const AuthProvider = ({ children }) => {
  console.log('🔍 AuthProvider renderizado');
  const [state, dispatch] = useReducer(authReducer, initialState);

  // Nueva función: Refrescar datos del usuario desde el servidor
  const refreshUser = async () => {
    const token = state.token || localStorage.getItem('token');
    
    if (!token) {
      console.log('🔒 No token available for refresh');
      return;
    }

    dispatch({ type: 'REFRESH_USER_START' });
    
    try {
      console.log('🔄 Refreshing user data from server...');
      
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/me`,
        {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json',
          },
        }
      );

      if (!response.ok) {
        if (response.status === 401) {
          // Token expirado, cerrar sesión
          console.log('🔒 Token expired, logging out');
          dispatch({ type: 'LOGOUT' });
          return;
        }
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }

      const userData = await response.json();
      console.log('✅ User data refreshed:', {
        id: userData.data?.id,
        email: userData.data?.email,
        hasFoto: !!userData.data?.foto_perfil,
        fotoUrl: userData.data?.foto_perfil || 'No photo'
      });

      dispatch({
        type: 'REFRESH_USER_SUCCESS',
        payload: userData.data
      });

    } catch (error) {
      console.error('❌ Error refreshing user:', error);
      dispatch({
        type: 'REFRESH_USER_FAILURE',
        payload: error.message
      });
    }
  };

  // Nueva función: Debug del estado del usuario
  const debugUserState = async () => {
    const token = state.token || localStorage.getItem('token');
    
    if (!token) {
      console.log('🐛 Debug: No token available');
      return { error: 'No token available' };
    }

    try {
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/debug`,
        {
          headers: {
            'Authorization': `Bearer ${token}`,
          },
        }
      );

      if (response.ok) {
        const debugData = await response.json();
        console.log('🐛 Debug data from server:', debugData);
        return debugData;
      } else {
        console.error('🐛 Debug request failed:', response.status);
        return { error: `HTTP ${response.status}` };
      }
    } catch (error) {
      console.error('🐛 Debug error:', error);
      return { error: error.message };
    }
  };

  // ⭐ INICIALIZACIÓN MEJORADA
  useEffect(() => {
    const initializeAuth = async () => {
      const token = localStorage.getItem('token');
      const storedUser = localStorage.getItem('user');
      
      console.log('🔍 Inicializando auth...', {
        hasToken: !!token,
        hasStoredUser: !!storedUser,
        tokenPreview: token ? token.substring(0, 20) + '...' : 'No token'
      });
      
      if (token) {
        console.log('🔍 Found stored token, initializing auth...');
        
        // Si hay usuario en localStorage, restaurar estado inmediatamente
        if (storedUser) {
          try {
            const user = JSON.parse(storedUser);
            console.log('✅ Restored user from localStorage:', user.email);
            
            // ⭐ Restaurar estado completo desde localStorage
            dispatch({
              type: 'INIT_FROM_STORAGE',
              payload: { token, user }
            });
            
            // Después, refrescar datos del servidor en background
            setTimeout(async () => {
              try {
                await refreshUser();
              } catch (error) {
                console.error('❌ Error refreshing user in background:', error);
                // Si falla la verificación del token, limpiar todo
                if (error.message.includes('401') || error.message.includes('Token')) {
                  console.log('🔒 Token invalid, logging out');
                  dispatch({ type: 'LOGOUT' });
                }
              }
            }, 100);
            
          } catch (error) {
            console.error('❌ Error parsing stored user:', error);
            // Si hay error parseando, limpiar localStorage y probar con solo token
            localStorage.removeItem('user');
            
            // Intentar verificar token con el servidor
            try {
              const response = await fetch(
                `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/me`,
                {
                  headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json',
                  },
                }
              );
              
              if (response.ok) {
                const userData = await response.json();
                dispatch({
                  type: 'INIT_FROM_STORAGE',
                  payload: { token, user: userData.data }
                });
              } else {
                throw new Error('Invalid token');
              }
            } catch (verifyError) {
              console.error('❌ Token verification failed:', verifyError);
              localStorage.removeItem('token');
              dispatch({ type: 'INIT_COMPLETE' });
            }
          }
        } else {
          // Si hay token pero no usuario, verificar con servidor
          try {
            console.log('🔄 No stored user, verifying token with server...');
            const response = await fetch(
              `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/me`,
              {
                headers: {
                  'Authorization': `Bearer ${token}`,
                  'Content-Type': 'application/json',
                },
              }
            );
            
            if (response.ok) {
              const userData = await response.json();
              console.log('✅ Token verified, user data received');
              dispatch({
                type: 'INIT_FROM_STORAGE',
                payload: { token, user: userData.data }
              });
            } else {
              throw new Error('Invalid token');
            }
          } catch (error) {
            console.error('❌ Token verification failed:', error);
            localStorage.removeItem('token');
            dispatch({ type: 'INIT_COMPLETE' });
          }
        }
      } else {
        console.log('🔒 No token found in localStorage');
        dispatch({ type: 'INIT_COMPLETE' });
      }
    };

    initializeAuth();
  }, []);

  const login = async (credentials) => {
    dispatch({ type: 'LOGIN_START' });
    try {
      console.log('🔑 AuthContext: Iniciando login...');
      const response = await authService.login(credentials);
      
      // Verificar que la respuesta no sea undefined o null
      if (!response) {
        throw new Error('La respuesta del servidor es undefined');
      }
      
      console.log('✅ AuthContext: Login exitoso', response);
      
      dispatch({
        type: 'LOGIN_SUCCESS',
        payload: response,
      });

      // Después del login exitoso, refrescar datos del usuario
      console.log('🔄 Refreshing user data after login...');
      setTimeout(async () => {
        try {
          await refreshUser();
        } catch (error) {
          console.error('❌ Error refreshing user after login:', error);
        }
      }, 500);
      
      return response;
    } catch (error) {
      console.error('❌ AuthContext: Error en login', error);
      const errorMessage = error.response?.data?.message || 
                          error.message || 
                          'Error al iniciar sesión';
      dispatch({
        type: 'LOGIN_FAILURE',
        payload: errorMessage,
      });
      throw error;
    }
  };

  const register = async (userData) => {
    dispatch({ type: 'LOGIN_START' });
    try {
      console.log('📝 AuthContext: Iniciando registro...');
      const response = await authService.register(userData);
      
      // Verificar que la respuesta no sea undefined
      if (!response) {
        throw new Error('La respuesta del servidor es undefined');
      }
      
      console.log('✅ AuthContext: Registro exitoso', response);
      return response;
    } catch (error) {
      console.error('❌ AuthContext: Error en registro', error);
      const errorMessage = error.response?.data?.message || 
                          error.message || 
                          'Error al registrarse';
      dispatch({
        type: 'LOGIN_FAILURE',
        payload: errorMessage,
      });
      throw error;
    }
  };

  const logout = async () => {
    try {
      console.log('🚪 AuthContext: Cerrando sesión...');
      await authService.logout();
    } catch (error) {
      console.error('Error during logout:', error);
    } finally {
      dispatch({ type: 'LOGOUT' });
      console.log('✅ AuthContext: Sesión cerrada');
    }
  };

  const updateUser = (userData) => {
    console.log('🔄 Updating user locally:', userData);
    dispatch({ type: 'UPDATE_USER', payload: userData });
  };

  const clearError = () => {
    dispatch({ type: 'CLEAR_ERROR' });
  };

  const setLoading = (loading) => {
    dispatch({ type: 'SET_LOADING', payload: loading });
  };

  const value = {
    ...state,
    login,
    register,
    logout,
    updateUser,
    refreshUser,        
    debugUserState,     
    clearError,
    setLoading,
  };

  console.log('🔍 AuthProvider value:', {
    hasUser: !!value.user,
    hasToken: !!value.token,
    isAuthenticated: value.isAuthenticated,
    loading: value.loading,
    userHasPhoto: !!value.user?.foto_perfil,
    tokenInStorage: !!localStorage.getItem('token')
  });

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
};

export const useAuth = () => {
  console.log('🔍 useAuth llamado');
  const context = useContext(AuthContext);
  
  if (!context) {
    console.error('❌ useAuth: Context es undefined!');
    console.error('❌ Esto significa que useAuth se está llamando fuera del AuthProvider');
    console.trace('❌ Stack trace:');
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
```

## c:\Users\rexma\Desktop\chambing-website\src\components\common\navbar.jsx
```
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useTranslations } from '../../hooks/useTranslations'; // ⭐ Usar nuestro hook
import {
  AppBar,
  Toolbar,
  Typography,
  Button,
  Box,
  IconButton,
  Menu,
  MenuItem,
  Avatar,
  useTheme,
  useMediaQuery,
  Drawer,
  List,
  ListItem,
  ListItemText,
  Divider,
} from '@mui/material';
import {
  Menu as MenuIcon,
  AccountCircle,
  Logout,
  Dashboard,
  Work,
} from '@mui/icons-material';
import { useAuth } from '../../context/AuthContext';
import LanguageSelector from './LanguageSelector'; // ⭐ Importar selector de idioma

const Navbar = () => {
  const { user, isAuthenticated, logout } = useAuth();
  const { nav } = useTranslations(); // ⭐ Usar traducciones
  const navigate = useNavigate();
  const theme = useTheme();
  const isMobile = useMediaQuery(theme.breakpoints.down('md'));
  
  const [anchorEl, setAnchorEl] = useState(null);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  const handleMenuOpen = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleMenuClose = () => {
    setAnchorEl(null);
  };

  const handleLogout = async () => {
    await logout();
    handleMenuClose();
  };

  const handleMobileMenuToggle = () => {
    setMobileMenuOpen(!mobileMenuOpen);
  };

  // ⭐ Menús con traducciones
  const menuItems = [
    { label: nav.home, path: '/', icon: null },
    { label: nav.services, path: '/servicios', icon: <Work /> },
  ];

  const authMenuItems = isAuthenticated
    ? [
        { label: nav.dashboard, path: '/dashboard', icon: <Dashboard /> },
        { label: nav.profile, path: '/perfil', icon: <AccountCircle /> },
      ]
    : [
        { label: nav.login, path: '/login', icon: null },
        { label: nav.register, path: '/register', icon: null },
      ];

  const MobileMenu = () => (
    <Drawer
      anchor="left"
      open={mobileMenuOpen}
      onClose={handleMobileMenuToggle}
    >
      <Box sx={{ width: 250, pt: 2 }}>
        {/* Logo en el drawer móvil */}
        <Box sx={{ px: 2, pb: 2 }}>
          <Typography variant="h6" sx={{ fontWeight: 'bold', color: 'primary.main' }}>
            ChambingApp
          </Typography>
        </Box>
        
        <Divider />
        
        <List>
          {[...menuItems, ...authMenuItems].map((item, index) => (
            <ListItem
              button
              key={index}
              component={Link}
              to={item.path}
              onClick={handleMobileMenuToggle}
              sx={{
                '&:hover': {
                  backgroundColor: 'action.hover',
                },
              }}
            >
              {item.icon && <Box sx={{ mr: 2 }}>{item.icon}</Box>}
              <ListItemText primary={item.label} />
            </ListItem>
          ))}
          {isAuthenticated && (
            <>
              <Divider sx={{ my: 1 }} />
              <ListItem button onClick={handleLogout}>
                <Box sx={{ mr: 2 }}>
                  <Logout />
                </Box>
                <ListItemText primary={nav.logout} />
              </ListItem>
            </>
          )}
        </List>
        
        <Divider sx={{ my: 2 }} />
        
        {/* ⭐ Selector de idioma en el drawer móvil */}
        <Box sx={{ px: 2, pb: 2 }}>
          <LanguageSelector variant="button" />
        </Box>
      </Box>
    </Drawer>
  );

  // Función para renderizar el avatar con foto de perfil
  const renderProfileAvatar = (size = 32) => {
    if (user?.foto_perfil) {
      return (
        <Avatar 
          src={user.foto_perfil} 
          alt={user.nombre}
          sx={{ width: size, height: size }}
          onError={(e) => {
            e.target.style.display = 'none';
          }}
        />
      );
    }
    
    return (
      <Avatar sx={{ width: size, height: size }}>
        {user?.nombre?.charAt(0) || <AccountCircle />}
      </Avatar>
    );
  };

  return (
    <>
      <AppBar position="sticky" elevation={1}>
        <Toolbar>
          {isMobile && (
            <IconButton
              color="inherit"
              edge="start"
              onClick={handleMobileMenuToggle}
              sx={{ mr: 2 }}
            >
              <MenuIcon />
            </IconButton>
          )}
          
          <Typography
            variant="h6"
            component={Link}
            to="/"
            sx={{
              flexGrow: 1,
              textDecoration: 'none',
              color: 'inherit',
              fontWeight: 'bold',
            }}
          >
            ChambingApp
          </Typography>

          {!isMobile && (
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>
              {/* ⭐ Menú principal con traducciones */}
              {menuItems.map((item, index) => (
                <Button
                  key={index}
                  color="inherit"
                  component={Link}
                  to={item.path}
                  sx={{
                    textTransform: 'none',
                    fontWeight: 500,
                    '&:hover': {
                      backgroundColor: 'rgba(255, 255, 255, 0.1)',
                    },
                  }}
                >
                  {item.label}
                </Button>
              ))}
              
              {isAuthenticated ? (
                <>
                  <Button
                    color="inherit"
                    component={Link}
                    to="/dashboard"
                    startIcon={<Dashboard />}
                    sx={{
                      textTransform: 'none',
                      fontWeight: 500,
                      '&:hover': {
                        backgroundColor: 'rgba(255, 255, 255, 0.1)',
                      },
                    }}
                  >
                    {nav.dashboard}
                  </Button>
                  
                  {/* ⭐ Selector de idioma para usuarios autenticados */}
                  <LanguageSelector variant="icon" color="inherit" size="medium" />
                  
                  <IconButton color="inherit" onClick={handleMenuOpen}>
                    {renderProfileAvatar(32)}
                  </IconButton>
                </>
              ) : (
                <>
                  {/* ⭐ Selector de idioma para usuarios no autenticados */}
                  <LanguageSelector variant="icon" color="inherit" size="medium" />
                  
                  <Button 
                    color="inherit" 
                    component={Link} 
                    to="/login"
                    sx={{
                      textTransform: 'none',
                      fontWeight: 500,
                      '&:hover': {
                        backgroundColor: 'rgba(255, 255, 255, 0.1)',
                      },
                    }}
                  >
                    {nav.login}
                  </Button>
                  <Button
                    variant="contained"
                    color="secondary"
                    component={Link}
                    to="/register"
                    sx={{ 
                      ml: 1,
                      textTransform: 'none',
                      fontWeight: 500,
                      boxShadow: 'none',
                      '&:hover': {
                        boxShadow: '0 2px 8px rgba(0,0,0,0.15)',
                      },
                    }}
                  >
                    {nav.register}
                  </Button>
                </>
              )}
            </Box>
          )}
          
          {/* ⭐ Selector de idioma para móvil solo si no está autenticado */}
          {isMobile && !isAuthenticated && (
            <LanguageSelector variant="icon" size="small" color="inherit" />
          )}
        </Toolbar>
      </AppBar>

      {/* ⭐ Menú de perfil con traducciones */}
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleMenuClose}
        PaperProps={{
          elevation: 8,
          sx: {
            mt: 1.5,
            minWidth: 180,
            borderRadius: 2,
            '& .MuiMenuItem-root': {
              borderRadius: 1,
              margin: '2px 8px',
            },
          },
        }}
      >
        <MenuItem 
          component={Link} 
          to="/perfil" 
          onClick={handleMenuClose}
          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}
        >
          <AccountCircle sx={{ fontSize: '1.2em' }} />
          {nav.profile}
        </MenuItem>
        <MenuItem 
          onClick={handleLogout}
          sx={{ display: 'flex', alignItems: 'center', gap: 1 }}
        >
          <Logout sx={{ fontSize: '1.2em' }} />
          {nav.logout}
        </MenuItem>
      </Menu>

      <MobileMenu />
    </>
  );
};

export default Navbar;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\auth\RegisterForm.jsx
```
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext'; // Tu AuthContext existente
import {
  Box,
  Container,
  Card,
  CardContent,
  TextField,
  Button,
  Typography,
  Alert,
  InputAdornment,
  IconButton,
  FormControl,
  InputLabel,
  Select,
  MenuItem,
  FormHelperText,
  Divider,
  Grid,
  LinearProgress,
} from '@mui/material';
import { 
  Visibility, 
  VisibilityOff, 
  Email, 
  Lock, 
  Person,
  Phone,
  LocationOn,
  PersonAdd,
  Badge,
} from '@mui/icons-material';
import { useForm } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';

const schema = yup.object().shape({
  nombre: yup.string().required('Nombre es requerido'),
  apellido: yup.string().required('Apellido es requerido'),
  email: yup.string().email('Email inválido').required('Email es requerido'),
  telefono: yup.string()
    .matches(/^[0-9]{8}$/, 'El teléfono debe tener 8 dígitos')
    .required('Teléfono es requerido'),
  dui: yup.string()
    .matches(/^\d{8}-\d$/, 'El DUI debe tener el formato: 01234567-8')
    .optional(),
  departamento: yup.string().required('Departamento es requerido'),
  municipio: yup.string().required('Municipio es requerido'),
  direccion_detalle: yup.string().optional(),
  password: yup
    .string()
    .min(6, 'La contraseña debe tener al menos 6 caracteres')
    .required('Contraseña es requerida'),
  confirmPassword: yup
    .string()
    .oneOf([yup.ref('password')], 'Las contraseñas deben coincidir')
    .required('Confirmar contraseña es requerido'),
  tipo_usuario: yup.string().oneOf(['cliente', 'trabajador']).required('Tipo de usuario es requerido'),
});

const departamentosSV = [
  'Ahuachapán', 'Cabañas', 'Chalatenango', 'Cuscatlán', 'La Libertad',
  'La Paz', 'La Unión', 'Morazán', 'San Miguel', 'San Salvador',
  'San Vicente', 'Santa Ana', 'Sonsonate', 'Usulután'
];

// Municipios por departamento (algunos ejemplos principales)
const municipiosPorDepartamento = {
  'San Salvador': [
    'San Salvador', 'Mejicanos', 'Soyapango', 'Apopa', 'Delgado', 
    'Ilopango', 'San Marcos', 'Ayutuxtepeque', 'Cuscatancingo'
  ],
  'La Libertad': [
    'Santa Tecla', 'Antiguo Cuscatlán', 'Nuevo Cuscatlán', 
    'San Juan Opico', 'Colón', 'La Libertad', 'Quezaltepeque'
  ],
  'Santa Ana': [
    'Santa Ana', 'Metapán', 'Chalchuapa', 'Candelaria de la Frontera',
    'Coatepeque', 'El Congo', 'Texistepeque'
  ],
  'San Miguel': [
    'San Miguel', 'Usulután', 'Santiago de María', 'Chinameca',
    'Nueva Guadalupe', 'San Rafael Oriente'
  ],
  'Sonsonate': [
    'Sonsonate', 'Acajutla', 'Izalco', 'Nahuizalco',
    'Sonzacate', 'Armenia', 'Caluco'
  ],
  // Agregar más según necesites o cargar dinámicamente
};

const RegisterForm = () => {
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const { register: registerUser, loading, error, clearError } = useAuth();
  const navigate = useNavigate();

  const {
    register,
    handleSubmit,
    watch,
    setValue,
    formState: { errors },
  } = useForm({
    resolver: yupResolver(schema),
    defaultValues: {
      tipo_usuario: 'cliente',
    },
  });

  const watchTipo = watch('tipo_usuario');
  const watchDepartamento = watch('departamento');

  // Limpiar municipio cuando cambia el departamento
  React.useEffect(() => {
    if (watchDepartamento) {
      setValue('municipio', '');
    }
  }, [watchDepartamento, setValue]);

  // Limpiar errores cuando el usuario empiece a escribir
  React.useEffect(() => {
    if (error) {
      const timer = setTimeout(() => {
        clearError();
      }, 8000); // Auto-limpiar después de 8 segundos

      return () => clearTimeout(timer);
    }
  }, [error, clearError]);

  const onSubmit = async (data) => {
    try {
      console.log('🚀 Iniciando registro para:', data.email);
      
      // Limpiar errores previos
      clearError();
      
      const { confirmPassword, departamento, municipio, direccion_detalle, ...userData } = data;
      
      // Construir objeto de dirección como espera el backend
      const direccion = {
        departamento,
        municipio,
        detalle: direccion_detalle || ''
      };
      
      const registrationData = {
        ...userData,
        direccion
      };
      
      console.log('📤 Enviando datos:', registrationData);
      
      await registerUser(registrationData);
      
      console.log('✅ Registro exitoso');
      
      navigate('/login', { 
        state: { 
          message: '¡Registro exitoso! Por favor inicia sesión con tus credenciales.',
          email: data.email // Para pre-llenar el email en login
        } 
      });
    } catch (error) {
      console.error('❌ Error en registro:', error);
      // El error ya se maneja en el AuthContext
    }
  };

  return (
    <Container maxWidth="md" sx={{ py: 4 }}>
      <Card elevation={3}>
        <CardContent sx={{ p: 4 }}>
          {/* Header */}
          <Box textAlign="center" mb={3}>
            <PersonAdd color="primary" sx={{ fontSize: 48, mb: 2 }} />
            <Typography variant="h4" component="h1" gutterBottom>
              Crear Cuenta
            </Typography>
            <Typography variant="body2" color="text.secondary">
              Únete a la comunidad de ChambingApp
            </Typography>
          </Box>
          
          {/* Loading bar */}
          {loading && (
            <Box sx={{ width: '100%', mb: 2 }}>
              <LinearProgress />
            </Box>
          )}
          
          {/* Error message */}
          {error && (
            <Alert severity="error" sx={{ mb: 2 }} onClose={clearError}>
              {error}
            </Alert>
          )}

          <form onSubmit={handleSubmit(onSubmit)}>
            {/* Tipo de usuario */}
            <FormControl fullWidth margin="normal" error={!!errors.tipo_usuario}>
              <InputLabel>Tipo de Usuario</InputLabel>
              <Select
                {...register('tipo_usuario')}
                label="Tipo de Usuario"
                defaultValue="cliente"
              >
                <MenuItem value="cliente">
                  Cliente - Busco servicios
                </MenuItem>
                <MenuItem value="trabajador">
                  Trabajador - Ofrezco servicios
                </MenuItem>
              </Select>
              <FormHelperText>
                {errors.tipo_usuario?.message || 
                 (watchTipo === 'cliente' ? 
                   'Podrás contratar servicios domésticos y de construcción' : 
                   'Podrás ofrecer tus servicios y recibir trabajos')}
              </FormHelperText>
            </FormControl>

            {/* Información personal */}
            <Typography variant="h6" sx={{ mt: 3, mb: 1 }}>
              Información Personal
            </Typography>
            
            <Grid container spacing={2}>
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('nombre')}
                  fullWidth
                  label="Nombre"
                  error={!!errors.nombre}
                  helperText={errors.nombre?.message}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Person />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>
              
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('apellido')}
                  fullWidth
                  label="Apellido"
                  error={!!errors.apellido}
                  helperText={errors.apellido?.message}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Person />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>
            </Grid>

            {/* Email */}
            <TextField
              {...register('email')}
              fullWidth
              label="Correo Electrónico"
              type="email"
              error={!!errors.email}
              helperText={errors.email?.message}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Email />
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            <Grid container spacing={2}>
              {/* Teléfono */}
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('telefono')}
                  fullWidth
                  label="Teléfono"
                  placeholder="12345678"
                  error={!!errors.telefono}
                  helperText={errors.telefono?.message || 'Sin guiones ni espacios'}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Phone />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>

              {/* DUI */}
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('dui')}
                  fullWidth
                  label="DUI (Opcional)"
                  placeholder="01234567-8"
                  error={!!errors.dui}
                  helperText={errors.dui?.message || 'Formato: 01234567-8'}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Badge />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>
            </Grid>

            {/* Ubicación */}
            <Typography variant="h6" sx={{ mt: 3, mb: 1 }}>
              Ubicación
            </Typography>
            
            <Grid container spacing={2}>
              <Grid item xs={12} sm={6}>
                <FormControl fullWidth margin="normal" error={!!errors.departamento}>
                  <InputLabel>Departamento</InputLabel>
                  <Select
                    {...register('departamento')}
                    label="Departamento"
                  >
                    {departamentosSV.map((dep) => (
                      <MenuItem key={dep} value={dep}>
                        {dep}
                      </MenuItem>
                    ))}
                  </Select>
                  <FormHelperText>
                    {errors.departamento?.message}
                  </FormHelperText>
                </FormControl>
              </Grid>

              <Grid item xs={12} sm={6}>
                <FormControl fullWidth margin="normal" error={!!errors.municipio}>
                  <InputLabel>Municipio</InputLabel>
                  <Select
                    {...register('municipio')}
                    label="Municipio"
                    disabled={!watchDepartamento}
                  >
                    {watchDepartamento && municipiosPorDepartamento[watchDepartamento] ? 
                     municipiosPorDepartamento[watchDepartamento].map((mun) => (
                      <MenuItem key={mun} value={mun}>
                        {mun}
                      </MenuItem>
                    )) : 
                    <MenuItem value="">
                      {!watchDepartamento ? 'Selecciona un departamento primero' : 'Municipio no disponible en la lista'}
                    </MenuItem>
                    }
                  </Select>
                  <FormHelperText>
                    {errors.municipio?.message || 
                     (!watchDepartamento ? 'Selecciona primero un departamento' : '')}
                  </FormHelperText>
                </FormControl>
              </Grid>
            </Grid>

            {/* Dirección detalle */}
            <TextField
              {...register('direccion_detalle')}
              fullWidth
              label="Dirección Detallada (Opcional)"
              placeholder="Colonia, calle, número de casa, referencias..."
              multiline
              rows={2}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <LocationOn />
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            {/* Contraseñas */}
            <Typography variant="h6" sx={{ mt: 3, mb: 1 }}>
              Seguridad
            </Typography>
            
            <TextField
              {...register('password')}
              fullWidth
              label="Contraseña"
              type={showPassword ? 'text' : 'password'}
              error={!!errors.password}
              helperText={errors.password?.message}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Lock />
                  </InputAdornment>
                ),
                endAdornment: (
                  <InputAdornment position="end">
                    <IconButton
                      onClick={() => setShowPassword(!showPassword)}
                      edge="end"
                    >
                      {showPassword ? <VisibilityOff /> : <Visibility />}
                    </IconButton>
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            <TextField
              {...register('confirmPassword')}
              fullWidth
              label="Confirmar Contraseña"
              type={showConfirmPassword ? 'text' : 'password'}
              error={!!errors.confirmPassword}
              helperText={errors.confirmPassword?.message}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Lock />
                  </InputAdornment>
                ),
                endAdornment: (
                  <InputAdornment position="end">
                    <IconButton
                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                      edge="end"
                    >
                      {showConfirmPassword ? <VisibilityOff /> : <Visibility />}
                    </IconButton>
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            {/* Información para trabajadores */}
            {watchTipo === 'trabajador' && (
              <Alert severity="info" sx={{ mt: 2 }}>
                <Typography variant="body2">
                  <strong>Para trabajadores:</strong> Después del registro podrás subir tu foto de perfil 
                  desde tu perfil. La foto es obligatoria para ofrecer servicios en la plataforma.
                </Typography>
              </Alert>
            )}
            
            <Button
              type="submit"
              fullWidth
              variant="contained"
              size="large"
              disabled={loading}
              sx={{ mt: 3, mb: 2, py: 1.5 }}
            >
              {loading ? 'Creando cuenta...' : 'Crear Cuenta'}
            </Button>

            <Divider sx={{ my: 2 }}>
              <Typography variant="body2" color="text.secondary">
                o
              </Typography>
            </Divider>

            <Box textAlign="center">
              <Typography variant="body2">
                ¿Ya tienes cuenta?{' '}
                <Link 
                  to="/login" 
                  style={{ 
                    color: '#2563eb',
                    textDecoration: 'none',
                    fontWeight: 'bold'
                  }}
                >
                  Inicia sesión aquí
                </Link>
              </Typography>
            </Box>
          </form>
        </CardContent>
      </Card>
    </Container>
  );
};

export default RegisterForm;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\common\footer.jsx
```
import React from 'react';
import { useTranslations } from '../../hooks/useTranslations'; // ⭐ Usar nuestro hook
import {
  Box,
  Container,
  Grid,
  Typography,
  Link,
  IconButton,
} from '@mui/material';
import {
  Facebook,
  Twitter,
  Instagram,
  Email,
  Phone,
  LocationOn,
} from '@mui/icons-material';

const Footer = () => {
  const { t, translateService } = useTranslations(); // ⭐ Usar nuestro hook

  return (
    <Box
      component="footer"
      sx={{
        bgcolor: 'grey.900',
        color: 'white',
        py: 6,
        mt: 'auto',
      }}
    >
      <Container maxWidth="lg">
        <Grid container spacing={4}>
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              ChambingApp
            </Typography>
            <Typography variant="body2" sx={{ mb: 2 }}>
              {t('footer.description')}
            </Typography>
            <Box>
              <IconButton color="inherit" aria-label="Facebook">
                <Facebook />
              </IconButton>
              <IconButton color="inherit" aria-label="Twitter">
                <Twitter />
              </IconButton>
              <IconButton color="inherit" aria-label="Instagram">
                <Instagram />
              </IconButton>
            </Box>
          </Grid>
          
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              {t('footer.services')}
            </Typography>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('domesticCleaning')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('plumbing')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('electricity')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('gardening')}
            </Link>
          </Grid>
          
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              {t('footer.company')}
            </Typography>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.about')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.terms')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.privacy')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.help')}
            </Link>
          </Grid>
          
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              {t('footer.contact')}
            </Typography>
            <Box display="flex" alignItems="center" sx={{ mb: 1 }}>
              <Email sx={{ mr: 1, fontSize: 'small' }} />
              <Typography variant="body2">{t('footer.email')}</Typography>
            </Box>
            <Box display="flex" alignItems="center" sx={{ mb: 1 }}>
              <Phone sx={{ mr: 1, fontSize: 'small' }} />
              <Typography variant="body2">{t('footer.phone')}</Typography>
            </Box>
            <Box display="flex" alignItems="center">
              <LocationOn sx={{ mr: 1, fontSize: 'small' }} />
              <Typography variant="body2">{t('footer.address')}</Typography>
            </Box>
          </Grid>
        </Grid>
        
        <Box
          sx={{
            borderTop: 1,
            borderColor: 'grey.700',
            pt: 3,
            mt: 4,
            textAlign: 'center',
          }}
        >
          <Typography variant="body2" color="grey.400">
            {t('footer.rights')}
          </Typography>
        </Box>
      </Container>
    </Box>
  );
};

export default Footer;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\auth\LoginForm.jsx
```
import React, { useState } from 'react';
import { useNavigate, useLocation, Link } from 'react-router-dom';
import { useTranslations } from '../../hooks/useTranslations'; // ⭐ Usar nuestro hook
import { useAuth } from '../../context/AuthContext';
import {
  Box,
  Container,
  Card,
  CardContent,
  TextField,
  Button,
  Typography,
  Alert,
  InputAdornment,
  IconButton,
  Divider,
  Paper,
} from '@mui/material';
import { 
  Visibility, 
  VisibilityOff, 
  Email, 
  Lock,
  Login as LoginIcon 
} from '@mui/icons-material';
import { useForm } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';

const LoginForm = () => {
  const { t, common } = useTranslations(); // ⭐ Usar nuestro hook
  const [showPassword, setShowPassword] = useState(false);
  const { login, loading, error } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();

  const from = location.state?.from?.pathname || '/dashboard';
  const message = location.state?.message;

  // ⭐ Schema de validación con traducciones dinámicas
  const schema = yup.object().shape({
    email: yup
      .string()
      .email(t('auth.validation.emailInvalid'))
      .required(t('auth.validation.required')),
    password: yup
      .string()
      .required(t('auth.validation.required')),
  });

  const {
    register,
    handleSubmit,
    setValue,
    formState: { errors },
  } = useForm({
    resolver: yupResolver(schema),
  });

  // Función para llenar datos de prueba
  const fillTestData = (userType) => {
    if (userType === 'cliente') {
      setValue('email', 'cliente@test.com');
      setValue('password', 'password123');
    } else if (userType === 'trabajador') {
      setValue('email', 'trabajador@test.com');
      setValue('password', 'password123');
    }
  };

  const onSubmit = async (data) => {
    try {
      console.log('🚀 Intentando login con:', { email: data.email });
      await login(data);
      console.log('✅ Login exitoso, redirigiendo a:', from);
      navigate(from, { replace: true });
    } catch (error) {
      console.error('❌ Error en login:', error);
    }
  };

  return (
    <Container maxWidth="sm" sx={{ py: 8 }}>
      <Card elevation={3}>
        <CardContent sx={{ p: 4 }}>
          <Box textAlign="center" mb={3}>
            <LoginIcon color="primary" sx={{ fontSize: 48, mb: 2 }} />
            <Typography variant="h4" component="h1" gutterBottom>
              {t('auth.login.title')}
            </Typography>
            <Typography variant="body2" color="text.secondary">
              {t('auth.login.subtitle')}
            </Typography>
          </Box>
          
          {message && (
            <Alert severity="success" sx={{ mb: 2 }}>
              {message}
            </Alert>
          )}

          {error && (
            <Alert severity="error" sx={{ mb: 2 }}>
              {error}
            </Alert>
          )}

          {/* ⭐ Botones de datos de prueba traducidos */}
          <Paper 
            elevation={0} 
            sx={{ 
              bgcolor: 'grey.50', 
              p: 2, 
              mb: 3, 
              borderRadius: 2 
            }}
          >
            <Typography variant="subtitle2" gutterBottom color="text.secondary">
              🧪 {t('auth.login.testData')}
            </Typography>
            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>
              <Button
                size="small"
                variant="outlined"
                onClick={() => fillTestData('cliente')}
              >
                {t('auth.login.clientUser')}
              </Button>
              <Button
                size="small"
                variant="outlined"
                onClick={() => fillTestData('trabajador')}
              >
                {t('auth.login.workerUser')}
              </Button>
            </Box>
            <Typography variant="caption" display="block" sx={{ mt: 1 }}>
              {t('auth.login.autoFillInfo')}
            </Typography>
          </Paper>

          <form onSubmit={handleSubmit(onSubmit)}>
            <TextField
              {...register('email')}
              fullWidth
              label={t('auth.login.email')}
              type="email"
              error={!!errors.email}
              helperText={errors.email?.message}
              margin="normal"
              autoComplete="email"
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Email color="action" />
                  </InputAdornment>
                ),
              }}
            />

            <TextField
              {...register('password')}
              fullWidth
              label={t('auth.login.password')}
              type={showPassword ? 'text' : 'password'}
              error={!!errors.password}
              helperText={errors.password?.message}
              margin="normal"
              autoComplete="current-password"
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Lock color="action" />
                  </InputAdornment>
                ),
                endAdornment: (
                  <InputAdornment position="end">
                    <IconButton
                      onClick={() => setShowPassword(!showPassword)}
                      edge="end"
                      aria-label="toggle password visibility"
                    >
                      {showPassword ? <VisibilityOff /> : <Visibility />}
                    </IconButton>
                  </InputAdornment>
                ),
              }}
            />

            <Button
              type="submit"
              fullWidth
              variant="contained"
              size="large"
              disabled={loading}
              sx={{ mt: 3, mb: 2, py: 1.5 }}
            >
              {loading ? t('auth.login.loginButtonLoading') : t('auth.login.loginButton')}
            </Button>

            <Divider sx={{ my: 2 }}>
              <Typography variant="body2" color="text.secondary">
                {common.or}
              </Typography>
            </Divider>

            <Box textAlign="center">
              <Typography variant="body2">
                {t('auth.login.noAccount')}{' '}
                <Link 
                  to="/register" 
                  style={{ 
                    textDecoration: 'none',
                    fontWeight: 'bold',
                    color: '#2563eb'
                  }}
                >
                  {t('auth.login.registerHere')}
                </Link>
              </Typography>
            </Box>
          </form>
        </CardContent>
      </Card>

      {/* ⭐ Info de debugging traducida */}
      <Paper
        elevation={1}
        sx={{
          mt: 3,
          p: 2,
          bgcolor: 'info.light',
          color: 'info.contrastText',
        }}
      >
        <Typography variant="subtitle2" gutterBottom>
          🔧 {t('common.debugInfo')}:
        </Typography>
        <Typography variant="caption" component="div">
          API URL: {import.meta.env.VITE_API_URL || 'http://localhost:3000'}
        </Typography>
        <Typography variant="caption" component="div">
          {t('common.mode')}: {import.meta.env.MODE}
        </Typography>
        <Typography variant="caption" component="div">
          Backend debe estar corriendo en: http://localhost:3000
        </Typography>
      </Paper>
    </Container>
  );
};

export default LoginForm;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\auth\ProtectedRoute.jsx
```
import React from 'react';
import { Navigate, useLocation } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';
import { CircularProgress, Box } from '@mui/material';

const ProtectedRoute = ({ children, roles = [] }) => {
  const { isAuthenticated, user, loading } = useAuth();
  const location = useLocation();

  if (loading) {
    return (
      <Box
        display="flex"
        justifyContent="center"
        alignItems="center"
        minHeight="100vh"
      >
        <CircularProgress />
      </Box>
    );
  }

  if (!isAuthenticated) {
    return <Navigate to="/login" state={{ from: location }} replace />;
  }

  // Check roles if specified
  if (roles.length > 0 && user) {
    const hasRequiredRole = roles.some(role => 
      user.roles?.some(userRole => userRole.name === role)
    );
    
    if (!hasRequiredRole) {
      return <Navigate to="/unauthorized" replace />;
    }
  }

  return children;
};

export default ProtectedRoute;
```

## c:\Users\rexma\Desktop\chambing-website\src\services\profileService.js
```
const API_URL = import.meta.env.VITE_API_URL || 'http://localhost:3001';

export const profileService = {
  async uploadProfilePhoto(file) {
    try {
      const formData = new FormData();
      formData.append('file', file);

      const token = localStorage.getItem('token');
      
      const response = await fetch(`${API_URL}/users/profile-photo`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${token}`,
        },
        body: formData,
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al subir la foto');
      }

      return await response.json();
    } catch (error) {
      console.error('Error uploading profile photo:', error);
      throw error;
    }
  },

  async getCurrentUser() {
    try {
      const token = localStorage.getItem('token');
      
      const response = await fetch(`${API_URL}/users/me`, {
        headers: {
          'Authorization': `Bearer ${token}`,
        },
      });

      if (!response.ok) {
        throw new Error('Error al obtener datos del usuario');
      }

      return await response.json();
    } catch (error) {
      console.error('Error getting current user:', error);
      throw error;
    }
  },

  async updateProfile(userData) {
    try {
      const token = localStorage.getItem('token');
      
      const response = await fetch(`${API_URL}/users/profile`, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(userData),
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al actualizar perfil');
      }

      return await response.json();
    } catch (error) {
      console.error('Error updating profile:', error);
      throw error;
    }
  }
};

// src/context/AuthContext.js - Versión actualizada
import React, { createContext, useContext, useState, useEffect } from 'react';

const AuthContext = createContext();

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};

export const AuthProvider = ({ children }) => {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const [token, setToken] = useState(localStorage.getItem('token'));

  // Función para refrescar datos del usuario
  const refreshUser = async () => {
    try {
      if (!token) return;
      
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/me`,
        {
          headers: {
            'Authorization': `Bearer ${token}`,
          },
        }
      );

      if (response.ok) {
        const userData = await response.json();
        setUser(userData.data);
      }
    } catch (error) {
      console.error('Error refreshing user data:', error);
    }
  };

  // Función para actualizar usuario (sin hacer petición al servidor)
  const updateUser = (updatedUserData) => {
    setUser(prevUser => ({
      ...prevUser,
      ...updatedUserData
    }));
  };

  // Función para login
  const login = async (email, password) => {
    try {
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/auth/login`,
        {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ email, password }),
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error en el login');
      }

      const data = await response.json();
      
      // Guardar token
      localStorage.setItem('token', data.token);
      setToken(data.token);
      
      // Obtener datos completos del usuario
      await refreshUser();
      
      return data;
    } catch (error) {
      console.error('Login error:', error);
      throw error;
    }
  };

  // Función para logout
  const logout = async () => {
    localStorage.removeItem('token');
    setToken(null);
    setUser(null);
  };

  // Función para registro
  const register = async (userData) => {
    try {
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/register`,
        {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(userData),
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error en el registro');
      }

      return await response.json();
    } catch (error) {
      console.error('Register error:', error);
      throw error;
    }
  };

  // Verificar autenticación al cargar
  useEffect(() => {
    const checkAuth = async () => {
      try {
        if (token) {
          await refreshUser();
        }
      } catch (error) {
        console.error('Auth check error:', error);
        // Si hay error, limpiar token inválido
        localStorage.removeItem('token');
        setToken(null);
        setUser(null);
      } finally {
        setLoading(false);
      }
    };

    checkAuth();
  }, [token]);

  const value = {
    user,
    token,
    loading,
    login,
    logout,
    register,
    updateUser,
    refreshUser,
    isAuthenticated: !!user,
  };

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  );
};

// Hook personalizado para subir foto de perfil
export const useProfilePhoto = () => {
  const { user, updateUser } = useAuth();
  const [uploading, setUploading] = useState(false);

  const uploadPhoto = async (file) => {
    setUploading(true);
    try {
      const formData = new FormData();
      formData.append('file', file);

      const token = localStorage.getItem('token');
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/profile-photo`,
        {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`,
          },
          body: formData,
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al subir la foto');
      }

      const result = await response.json();
      
      // Actualizar usuario con la nueva foto
      updateUser({
        ...user,
        foto_perfil: result.data.foto_perfil
      });

      return result;
    } finally {
      setUploading(false);
    }
  };

  return {
    uploadPhoto,
    uploading
  };
};
```

## c:\Users\rexma\Desktop\chambing-website\src\components\ProfilePhotoModal.jsx
```
import React, { useState, useRef } from 'react';
import {
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
  Button,
  Box,
  Avatar,
  Typography,
  CircularProgress,
  Alert,
  IconButton,
} from '@mui/material';
import {
  PhotoCamera,
  AccountCircle,
  Close,
} from '@mui/icons-material';
import { useAuth } from '../context/AuthContext';

const ProfilePhotoModal = ({ open, onClose, onPhotoUpdated }) => {
  const { user, updateUser } = useAuth();
  const [selectedFile, setSelectedFile] = useState(null);
  const [previewUrl, setPreviewUrl] = useState(null);
  const [uploading, setUploading] = useState(false);
  const [error, setError] = useState(null);
  const fileInputRef = useRef(null);

  const handleFileSelect = (event) => {
    const file = event.target.files[0];
    
    if (!file) return;

    // Validar tipo de archivo
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      setError('Solo se permiten archivos JPG, PNG o WebP');
      return;
    }

    // Validar tamaño (5MB máximo)
    if (file.size > 5 * 1024 * 1024) {
      setError('El archivo no puede ser mayor a 5MB');
      return;
    }

    setError(null);
    setSelectedFile(file);

    // Crear preview
    const reader = new FileReader();
    reader.onload = (e) => {
      setPreviewUrl(e.target.result);
    };
    reader.readAsDataURL(file);
  };

  const handleUpload = async () => {
    if (!selectedFile) return;

    setUploading(true);
    setError(null);

    try {
      const formData = new FormData();
      formData.append('file', selectedFile);

      const token = localStorage.getItem('token');
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3001'}/users/profile-photo`,
        {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`,
          },
          body: formData,
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al subir la foto');
      }

      const result = await response.json();
      
      // Actualizar el usuario en el contexto
      if (updateUser) {
        updateUser({
          ...user,
          foto_perfil: result.data.foto_perfil
        });
      }

      // Llamar callback si existe
      if (onPhotoUpdated) {
        onPhotoUpdated(result.data.foto_perfil);
      }

      // Cerrar modal
      handleClose();
      
    } catch (error) {
      console.error('Error uploading photo:', error);
      setError(error.message || 'Error al subir la foto');
    } finally {
      setUploading(false);
    }
  };

  const handleClose = () => {
    setSelectedFile(null);
    setPreviewUrl(null);
    setError(null);
    setUploading(false);
    onClose();
  };

  const getCurrentPhotoUrl = () => {
    return previewUrl || user?.foto_perfil;
  };

  return (
    <Dialog 
      open={open} 
      onClose={handleClose}
      maxWidth="sm"
      fullWidth
    >
      <DialogTitle>
        <Box display="flex" justifyContent="space-between" alignItems="center">
          <Typography variant="h6">
            Cambiar Foto de Perfil
          </Typography>
          <IconButton onClick={handleClose}>
            <Close />
          </IconButton>
        </Box>
      </DialogTitle>

      <DialogContent>
        <Box display="flex" flexDirection="column" alignItems="center" py={2}>
          {/* Vista previa de la foto */}
          <Box position="relative" mb={3}>
            <Avatar
              src={getCurrentPhotoUrl()}
              sx={{ 
                width: 120, 
                height: 120,
                mb: 2
              }}
            >
              {!getCurrentPhotoUrl() && (user?.nombre?.charAt(0) || <AccountCircle />)}
            </Avatar>
            
            <IconButton
              onClick={() => fileInputRef.current?.click()}
              sx={{
                position: 'absolute',
                bottom: 8,
                right: 8,
                bgcolor: 'primary.main',
                color: 'white',
                '&:hover': { bgcolor: 'primary.dark' }
              }}
              disabled={uploading}
            >
              <PhotoCamera />
            </IconButton>
          </Box>

          {/* Input de archivo oculto */}
          <input
            ref={fileInputRef}
            type="file"
            accept="image/jpeg,image/jpg,image/png,image/webp"
            onChange={handleFileSelect}
            style={{ display: 'none' }}
          />

          {/* Información del archivo seleccionado */}
          {selectedFile && (
            <Box textAlign="center" mb={2}>
              <Typography variant="body2" color="text.secondary">
                Archivo seleccionado: {selectedFile.name}
              </Typography>
              <Typography variant="caption" color="text.secondary">
                Tamaño: {(selectedFile.size / 1024 / 1024).toFixed(2)} MB
              </Typography>
            </Box>
          )}

          {/* Mensaje de error */}
          {error && (
            <Alert severity="error" sx={{ width: '100%', mb: 2 }}>
              {error}
            </Alert>
          )}

          {/* Instrucciones */}
          <Typography variant="body2" color="text.secondary" textAlign="center">
            Haz clic en el icono de la cámara para seleccionar una nueva foto.
            <br />
            Formatos permitidos: JPG, PNG, WebP (máximo 5MB)
          </Typography>
        </Box>
      </DialogContent>

      <DialogActions>
        <Button onClick={handleClose} disabled={uploading}>
          Cancelar
        </Button>
        <Button
          onClick={handleUpload}
          variant="contained"
          disabled={!selectedFile || uploading}
          startIcon={uploading ? <CircularProgress size={20} /> : null}
        >
          {uploading ? 'Subiendo...' : 'Guardar Foto'}
        </Button>
      </DialogActions>
    </Dialog>
  );
};

export default ProfilePhotoModal;
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\Dashboard.jsx
```
import React, { useEffect, useState } from 'react';
import { useTranslations } from '../hooks/useTranslations'; // ⭐ Usar nuestro hook
import {
  Box,
  Container,
  Typography,
  Grid,
  Card,
  CardContent,
  Button,
  Chip,
  CircularProgress,
  Alert,
  AppBar,
  Toolbar,
  IconButton,
  Menu,
  MenuItem,
  Avatar,
  Paper,
  Divider,
} from '@mui/material';
import {
  AccountCircle,
  Work,
  Assignment,
  Payment,
  Logout,
  Notifications,
  Refresh,
  Edit,
  CameraAlt,
} from '@mui/icons-material';
import { useAuth } from '../context/AuthContext';
import { serviceService } from '../services/serviceService';
import { contractService } from '../services/contractService';
import ProfilePhotoModal from '../components/ProfilePhotoModal';

const Dashboard = () => {
  const { user, logout } = useAuth();
  const { t, translateService, translateUserType, common } = useTranslations(); // ⭐ Usar nuestro hook
  const [categories, setCategories] = useState([]);
  const [contracts, setContracts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [anchorEl, setAnchorEl] = useState(null);
  const [photoModalOpen, setPhotoModalOpen] = useState(false);

  useEffect(() => {
    const loadDashboardData = async () => {
      try {
        setLoading(true);
        
        // Cargar categorías de servicios
        try {
          const categoriesData = await serviceService.getCategories();
          setCategories(categoriesData);
        } catch (error) {
          console.error('Error cargando categorías:', error);
          // Usar datos mock si falla
          setCategories([
            { id: 1, nombre: 'domesticCleaning', descripcion: 'Servicio de limpieza' },
            { id: 2, nombre: 'plumbing', descripcion: 'Reparaciones' },
            { id: 3, nombre: 'electricity', descripcion: 'Trabajos eléctricos' },
            { id: 4, nombre: 'gardening', descripcion: 'Mantenimiento' },
            { id: 5, nombre: 'carpentry', descripcion: 'Trabajos en madera' },
            { id: 6, nombre: 'construction', descripcion: 'Obras' },
          ]);
        }

        // Cargar contratos del usuario
        try {
          const contractsData = await contractService.getMyContracts();
          setContracts(contractsData);
        } catch (error) {
          console.error('Error cargando contratos:', error);
          setContracts([]);
        }
        
      } catch (error) {
        console.error('Error loading dashboard data:', error);
        setError(t('errors.networkError'));
      } finally {
        setLoading(false);
      }
    };

    loadDashboardData();
  }, [t]);

  const handleMenuOpen = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleMenuClose = () => {
    setAnchorEl(null);
  };

  const handleLogout = async () => {
    await logout();
    handleMenuClose();
  };

  const handleRefresh = () => {
    window.location.reload();
  };

  const handlePhotoModalOpen = () => {
    setPhotoModalOpen(true);
  };

  const handlePhotoModalClose = () => {
    setPhotoModalOpen(false);
  };

  const handlePhotoUpdated = (newPhotoUrl) => {
    console.log('Foto actualizada:', newPhotoUrl);
  };

  // Función para renderizar el avatar con foto de perfil
  const renderProfileAvatar = (size = 32) => {
    if (user?.foto_perfil) {
      return (
        <Avatar 
          src={user.foto_perfil} 
          alt={user.nombre}
          sx={{ width: size, height: size }}
          onError={(e) => {
            e.target.style.display = 'none';
          }}
        />
      );
    }
    
    return (
      <Avatar sx={{ width: size, height: size }}>
        {user?.nombre?.charAt(0) || <AccountCircle />}
      </Avatar>
    );
  };

  // Función para formatear fecha
  const formatDate = (dateString) => {
    try {
      return new Date(dateString).toLocaleDateString();
    } catch {
      return dateString;
    }
  };

  if (loading) {
    return (
      <Box display="flex" justifyContent="center" alignItems="center" minHeight="100vh">
        <CircularProgress size={60} />
      </Box>
    );
  }

  return (
    <Box>
      {/* ⭐ Header Traducido */}
      <AppBar position="static">
        <Toolbar>
          <Typography variant="h6" sx={{ flexGrow: 1 }}>
            {t('nav.dashboard')} - ChambingApp
          </Typography>
          
          <IconButton color="inherit" onClick={handleRefresh}>
            <Refresh />
          </IconButton>
          
          <IconButton color="inherit">
            <Notifications />
          </IconButton>
          
          <IconButton
            color="inherit"
            onClick={handleMenuOpen}
          >
            {renderProfileAvatar(32)}
          </IconButton>
          
          <Menu
            anchorEl={anchorEl}
            open={Boolean(anchorEl)}
            onClose={handleMenuClose}
          >
            <MenuItem onClick={handleMenuClose}>
              <AccountCircle sx={{ mr: 1 }} />
              {t('nav.profile')}
            </MenuItem>
            <MenuItem onClick={handleLogout}>
              <Logout sx={{ mr: 1 }} />
              {t('nav.logout')}
            </MenuItem>
          </Menu>
        </Toolbar>
      </AppBar>

      <Container maxWidth="lg" sx={{ py: 4 }}>
        {/* ⭐ Sección de Perfil Traducida */}
        <Paper elevation={3} sx={{ p: 3, mb: 4 }}>
          <Grid container spacing={3} alignItems="center">
            <Grid item>
              <Box position="relative">
                {renderProfileAvatar(80)}
                <IconButton
                  size="small"
                  onClick={handlePhotoModalOpen}
                  sx={{
                    position: 'absolute',
                    bottom: -5,
                    right: -5,
                    bgcolor: 'primary.main',
                    color: 'white',
                    '&:hover': { bgcolor: 'primary.dark' }
                  }}
                >
                  <CameraAlt fontSize="small" />
                </IconButton>
              </Box>
            </Grid>
            <Grid item xs>
              <Typography variant="h4" gutterBottom>
                {t('dashboard.welcome', { name: user?.nombre || 'Usuario' })}
              </Typography>
              <Typography variant="body1" color="text.secondary" gutterBottom>
                {user?.email}
              </Typography>
              <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mt: 2 }}>
                <Chip 
                  label={t('dashboard.userType', { type: translateUserType(user?.tipo_usuario || 'usuario') })}
                  color="primary" 
                  variant="outlined"
                  size="small"
                />
                {user?.departamento && (
                  <Chip 
                    label={`${user.departamento}, ${user.municipio}`}
                    color="info" 
                    variant="outlined"
                    size="small"
                  />
                )}
                {user?.telefono && (
                  <Chip 
                    label={user.telefono} 
                    color="secondary" 
                    variant="outlined"
                    size="small"
                  />
                )}
              </Box>
            </Grid>
            <Grid item>
              <Button
                variant="outlined"
                startIcon={<Edit />}
                onClick={() => {
                  console.log('Editar perfil');
                }}
              >
                {t('dashboard.editProfile')}
              </Button>
            </Grid>
          </Grid>
        </Paper>

        {error && (
          <Alert severity="error" sx={{ mb: 3 }}>
            {error}
          </Alert>
        )}

        <Alert severity="success" sx={{ mb: 3 }}>
          🎉 {t('success.login')}
        </Alert>

        <Grid container spacing={4}>
          {/* ⭐ Estadísticas rápidas traducidas */}
          <Grid item xs={12} sm={6} md={3}>
            <Card>
              <CardContent>
                <Box display="flex" alignItems="center">
                  <Work color="primary" sx={{ mr: 2, fontSize: 40 }} />
                  <Box>
                    <Typography variant="h5">{categories.length}</Typography>
                    <Typography variant="body2" color="text.secondary">
                      {t('dashboard.stats.availableServices')}
                    </Typography>
                  </Box>
                </Box>
              </CardContent>
            </Card>
          </Grid>

          <Grid item xs={12} sm={6} md={3}>
            <Card>
              <CardContent>
                <Box display="flex" alignItems="center">
                  <Assignment color="primary" sx={{ mr: 2, fontSize: 40 }} />
                  <Box>
                    <Typography variant="h5">{contracts.length}</Typography>
                    <Typography variant="body2" color="text.secondary">
                      {t('dashboard.stats.myContracts')}
                    </Typography>
                  </Box>
                </Box>
              </CardContent>
            </Card>
          </Grid>

          <Grid item xs={12} sm={6} md={3}>
            <Card>
              <CardContent>
                <Box display="flex" alignItems="center">
                  <Payment color="primary" sx={{ mr: 2, fontSize: 40 }} />
                  <Box>
                    <Typography variant="h5">$0.00</Typography>
                    <Typography variant="body2" color="text.secondary">
                      {t('dashboard.stats.availableBalance')}
                    </Typography>
                  </Box>
                </Box>
              </CardContent>
            </Card>
          </Grid>

          <Grid item xs={12} sm={6} md={3}>
            <Card>
              <CardContent>
                <Box display="flex" alignItems="center">
                  <Notifications color="primary" sx={{ mr: 2, fontSize: 40 }} />
                  <Box>
                    <Typography variant="h5">0</Typography>
                    <Typography variant="body2" color="text.secondary">
                      {t('dashboard.stats.notifications')}
                    </Typography>
                  </Box>
                </Box>
              </CardContent>
            </Card>
          </Grid>

          {/* ⭐ Servicios disponibles traducidos */}
          <Grid item xs={12}>
            <Typography variant="h5" gutterBottom>
              {t('dashboard.availableServices')}
            </Typography>
            <Grid container spacing={2}>
              {categories.slice(0, 6).map((category) => (
                <Grid item xs={12} sm={6} md={4} key={category.id}>
                  <Card sx={{ height: '100%' }}>
                    <CardContent>
                      <Typography variant="h6" gutterBottom>
                        {translateService(category.nombre)}
                      </Typography>
                      <Typography variant="body2" color="text.secondary" gutterBottom>
                        {category.descripcion}
                      </Typography>
                      <Button variant="outlined" size="small">
                        Ver Trabajadores
                      </Button>
                    </CardContent>
                  </Card>
                </Grid>
              ))}
            </Grid>
          </Grid>

          {/* ⭐ Contratos recientes traducidos */}
          <Grid item xs={12}>
            <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>
              <Typography variant="h5">
                {t('dashboard.recentContracts')}
              </Typography>
              <Button variant="outlined" startIcon={<Assignment />}>
                {t('dashboard.viewAll')}
              </Button>
            </Box>
            
            {contracts.length > 0 ? (
              <Grid container spacing={2}>
                {contracts.slice(0, 3).map((contract) => (
                  <Grid item xs={12} sm={6} md={4} key={contract.id}>
                    <Card>
                      <CardContent>
                        <Typography variant="h6" gutterBottom>
                          {t('dashboard.contract.number', { id: contract.id })}
                        </Typography>
                        <Typography variant="body2" color="text.secondary">
                          {t('dashboard.contract.status', { status: contract.estado })}
                        </Typography>
                        <Typography variant="body2" color="text.secondary">
                          {t('dashboard.contract.date', { date: formatDate(contract.fechaCreacion) })}
                        </Typography>
                        <Button size="small" variant="text" sx={{ mt: 1 }}>
                          {t('dashboard.contract.viewDetails')}
                        </Button>
                      </CardContent>
                    </Card>
                  </Grid>
                ))}
              </Grid>
            ) : (
              <Card>
                <CardContent sx={{ textAlign: 'center', py: 4 }}>
                  <Assignment sx={{ fontSize: 60, color: 'text.secondary', mb: 2 }} />
                  <Typography variant="h6" gutterBottom>
                    {t('dashboard.noContracts.title')}
                  </Typography>
                  <Typography variant="body2" color="text.secondary" gutterBottom>
                    {t('dashboard.noContracts.subtitle')}
                  </Typography>
                  <Button variant="contained" sx={{ mt: 2 }}>
                    {t('dashboard.noContracts.exploreServices')}
                  </Button>
                </CardContent>
              </Card>
            )}
          </Grid>

          {/* ⭐ Debug info traducida */}
          <Grid item xs={12}>
            <Card sx={{ bgcolor: 'grey.50' }}>
              <CardContent>
                <Typography variant="h6" gutterBottom>
                  🔧 {t('common.debugInfo')}
                </Typography>
                <Typography variant="body2" component="div">
                  • Usuario autenticado: ✅ {user?.email}<br/>
                  • Foto de perfil: {user?.foto_perfil ? '✅ Sí' : '❌ No'}<br/>
                  • URL foto: {user?.foto_perfil || 'No disponible'}<br/>
                  • Categorías cargadas: {categories.length}<br/>
                  • Contratos cargados: {contracts.length}<br/>
                  • Estado de carga: {loading ? common.loading : 'Completo'}<br/>
                  • API URL: {import.meta.env.VITE_API_URL || 'http://localhost:3001'}<br/>
                  • Token guardado: {localStorage.getItem('token') ? '✅ Sí' : '❌ No'}
                </Typography>
              </CardContent>
            </Card>
          </Grid>
        </Grid>
      </Container>

      {/* ⭐ Modal para cambiar foto de perfil */}
      <ProfilePhotoModal
        open={photoModalOpen}
        onClose={handlePhotoModalClose}
        onPhotoUpdated={handlePhotoUpdated}
      />
    </Box>
  );
};

export default Dashboard;
```

## c:\Users\rexma\Desktop\chambing-website\src\App.jsx
```
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { ThemeProvider } from '@mui/material/styles';
import { CssBaseline, Box } from '@mui/material';
import { AuthProvider } from './context/AuthContext';
import { theme } from './theme/muiTheme';
import Navbar from './components/common/Navbar';
import Footer from './components/common/Footer';
import ProtectedRoute from './components/auth/ProtectedRoute';
import Home from './pages/Home';
import LoginForm from './components/auth/LoginForm';
import RegisterForm from './components/auth/RegisterForm';
import Dashboard from './pages/Dashboard';
import './styles/globals.scss';

function App() {
  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <AuthProvider>
        <Router>
          <Box sx={{ 
            display: 'flex', 
            flexDirection: 'column', 
            minHeight: '100vh' 
          }}>
            <Navbar />
            
            <Box component="main" sx={{ flexGrow: 1 }}>
              <Routes>
                {/* Rutas públicas */}
                <Route path="/" element={<Home />} />
                <Route path="/login" element={<LoginForm />} />
                <Route path="/register" element={<RegisterForm />} />
                
                {/* Rutas protegidas */}
                <Route
                  path="/dashboard"
                  element={
                    <ProtectedRoute>
                      <Dashboard />
                    </ProtectedRoute>
                  }
                />
                
                {/* Páginas temporales */}
                <Route
                  path="/perfil"
                  element={
                    <ProtectedRoute>
                      <div style={{ padding: '2rem', textAlign: 'center' }}>
                        <h2>Mi Perfil</h2>
                        <p>Página en construcción...</p>
                      </div>
                    </ProtectedRoute>
                  }
                />
                
                <Route
                  path="/servicios"
                  element={
                    <div style={{ padding: '2rem', textAlign: 'center' }}>
                      <h2>Servicios</h2>
                      <p>Página en construcción...</p>
                    </div>
                  }
                />
                
                {/* Página no encontrada */}
                <Route 
                  path="*" 
                  element={
                    <div style={{ padding: '2rem', textAlign: 'center' }}>
                      <h2>Página no encontrada</h2>
                      <p>La página que buscas no existe.</p>
                    </div>
                  } 
                />
              </Routes>
            </Box>
            
            <Footer />
          </Box>
        </Router>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;
```

## c:\Users\rexma\Desktop\chambing-website\package.json
```
{
  "name": "chambing-website",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
  "dependencies": {
    "@emotion/react": "^11.14.0",
    "@emotion/styled": "^11.14.0",
    "@hookform/resolvers": "^5.1.1",
    "@mui/icons-material": "^7.1.2",
    "@mui/material": "^7.1.2",
    "@mui/x-date-pickers": "^8.5.3",
    "axios": "^1.10.0",
    "i18next": "^25.2.1",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-http-backend": "^3.0.2",
    "lucide-react": "^0.522.0",
    "react": "^19.1.0",
    "react-dom": "^19.1.0",
    "react-hook-form": "^7.58.1",
    "react-i18next": "^15.5.3",
    "react-router-dom": "^7.6.2",
    "yup": "^1.6.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.25.0",
    "@types/react": "^19.1.2",
    "@types/react-dom": "^19.1.2",
    "@vitejs/plugin-react": "^4.4.1",
    "eslint": "^9.25.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "globals": "^16.0.0",
    "sass": "^1.89.2",
    "vite": "^6.3.5"
  }
}

```

## c:\Users\rexma\Desktop\chambing-website\src\i18n\config.js
```
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Importar traducciones
import esTranslation from '../locales/es/translation.json';
import enTranslation from '../locales/en/translation.json';
import frTranslation from '../locales/fr/translation.json';

// Configuración de recursos de traducción
const resources = {
  es: {
    translation: esTranslation,
  },
  en: {
    translation: enTranslation,
  },
  fr: {
    translation: frTranslation,
  },
};

// Inicializar i18next - CONFIGURACIÓN BÁSICA
i18n
  .use(LanguageDetector) // Detecta idioma automáticamente
  .use(initReactI18next) // Conecta con React
  .init({
    resources,
    
    // Idiomas soportados
    supportedLngs: ['es', 'en', 'fr'],
    
    // Idioma por defecto si no se puede detectar
    fallbackLng: 'es',
    
    // Configuración de detección
    detection: {
      // Dónde guardar la preferencia del usuario
      caches: ['localStorage'],
      // Clave en localStorage
      lookupLocalStorage: 'chambing-language',
    },
    
    // Configuración básica
    debug: true, // Para ver logs en desarrollo
    
    interpolation: {
      escapeValue: false, // React ya protege contra XSS
    },
  });

// Función simple para cambiar idioma
export const changeLanguage = (lng) => {
  console.log(`🌐 Cambiando idioma a: ${lng}`);
  return i18n.changeLanguage(lng);
};

// Función para obtener idioma actual
export const getCurrentLanguage = () => i18n.language;

export default i18n;
```

## c:\Users\rexma\Desktop\chambing-website\src\locales\fr\translation.json
```
{
  "common": {
    "loading": "Chargement...",
    "error": "Erreur",
    "success": "Succès",
    "cancel": "Annuler",
    "confirm": "Confirmer",
    "save": "Enregistrer",
    "edit": "Modifier",
    "delete": "Supprimer",
    "search": "Rechercher",
    "back": "Retour",
    "next": "Suivant",
    "previous": "Précédent",
    "close": "Fermer",
    "language": "Langue",
    "or": "ou",
    "debugInfo": "Info de Debug",
    "mode": "Mode",
    "currentLanguage": "Langue actuelle",
    "admin": "Administrateur"
  },
  "nav": {
    "home": "Accueil",
    "services": "Services",
    "dashboard": "Tableau de bord",
    "profile": "Mon Profil",
    "login": "Se connecter",
    "register": "S'inscrire",
    "logout": "Se déconnecter"
  },
  "auth": {
    "login": {
      "title": "Se connecter",
      "subtitle": "Accédez à votre compte ChambingApp",
      "email": "Email",
      "password": "Mot de passe",
      "loginButton": "Se connecter",
      "loginButtonLoading": "Connexion en cours...",
      "noAccount": "Vous n'avez pas de compte ?",
      "registerHere": "Inscrivez-vous ici",
      "testData": "Données de test pour les tests :",
      "clientUser": "Utilisateur Client",
      "workerUser": "Utilisateur Travailleur",
      "autoFillInfo": "Cliquez pour remplir automatiquement les champs"
    },
    "register": {
      "title": "Créer un compte",
      "subtitle": "Rejoignez la communauté ChambingApp",
      "name": "Prénom",
      "lastName": "Nom de famille",
      "email": "Email",
      "phone": "Téléphone",
      "department": "Département",
      "municipality": "Municipalité",
      "password": "Mot de passe",
      "confirmPassword": "Confirmer le mot de passe",
      "userType": "Type d'utilisateur",
      "client": "Client - Je cherche des services",
      "worker": "Travailleur - J'offre des services",
      "clientHelp": "Vous pourrez embaucher des services",
      "workerHelp": "Vous pourrez offrir vos services",
      "registerButton": "Créer un compte",
      "registerButtonLoading": "Création du compte...",
      "haveAccount": "Vous avez déjà un compte ?",
      "loginHere": "Connectez-vous ici"
    },
    "validation": {
      "required": "Ce champ est obligatoire",
      "emailInvalid": "Email invalide",
      "passwordMin": "Le mot de passe doit contenir au moins 6 caractères",
      "passwordMatch": "Les mots de passe doivent correspondre"
    }
  },
  "home": {
    "hero": {
      "title": "Connecter le talent aux opportunités",
      "subtitle": "Trouvez des professionnels qualifiés pour votre maison ou rejoignez-nous en tant que travailleur indépendant",
      "startNow": "Commencer maintenant",
      "login": "Se connecter",
      "dashboard": "Aller au tableau de bord"
    },
    "services": {
      "title": "Nos Services",
      "subtitle": "Trouvez le professionnel parfait pour chaque tâche",
      "viewProfessionals": "Voir les professionnels"
    },
    "features": {
      "title": "Pourquoi nous choisir ?",
      "verifiedWorkers": {
        "title": "Travailleurs vérifiés",
        "description": "Tous nos professionnels passent par un processus de vérification rigoureux"
      },
      "availability": {
        "title": "Disponibilité 24/7",
        "description": "Trouvez de l'aide quand vous en avez besoin, tous les jours de la semaine"
      },
      "securePayments": {
        "title": "Paiements sécurisés",
        "description": "Système de paiement protégé avec plusieurs options de paiement"
      }
    },
    "testimonials": {
      "title": "Ce que disent nos utilisateurs"
    },
    "cta": {
      "title": "Prêt à commencer ?",
      "subtitle": "Rejoignez des milliers d'utilisateurs satisfaits au Salvador",
      "createAccount": "Créer un compte gratuit"
    }
  },
  "dashboard": {
    "welcome": "Bienvenue, {{name}} !",
    "editProfile": "Modifier le profil",
    "changePhoto": "Changer la photo de profil",
    "userType": "Type : {{type}}",
    "location": "{{department}}, {{municipality}}",
    "stats": {
      "availableServices": "Services disponibles",
      "myContracts": "Mes contrats",
      "availableBalance": "Solde disponible",
      "notifications": "Notifications"
    },
    "availableServices": "Services disponibles",
    "recentContracts": "Contrats récents",
    "viewAll": "Voir tout",
    "noContracts": {
      "title": "Vous n'avez pas encore de contrats",
      "subtitle": "Commencez par explorer nos services disponibles",
      "exploreServices": "Explorer les services"
    },
    "contract": {
      "number": "Contrat #{{id}}",
      "status": "État : {{status}}",
      "date": "Date : {{date}}",
      "viewDetails": "Voir les détails"
    }
  },
  "services": {
    "categories": {
      "domesticCleaning": "Nettoyage domestique",
      "plumbing": "Plomberie",
      "electricity": "Électricité",
      "gardening": "Jardinage",
      "carpentry": "Menuiserie",
      "construction": "Construction"
    },
    "descriptions": {
      "domesticCleaning": "Service de nettoyage professionnel pour votre maison",
      "plumbing": "Réparations et installations de plomberie",
      "electricity": "Installations et réparations électriques",
      "gardening": "Entretien de jardins et espaces verts",
      "carpentry": "Travaux de menuiserie et mobilier",
      "construction": "Travaux de construction et rénovation"
    }
  },
  "footer": {
    "description": "Connecter le talent aux opportunités au Salvador.",
    "services": "Services",
    "company": "Entreprise",
    "about": "À propos",
    "terms": "Conditions de service",
    "privacy": "Politique de confidentialité",
    "help": "Aide",
    "contact": "Contact",
    "email": "info@chambingapp.com",
    "phone": "+503 2234-5678",
    "address": "San Salvador, El Salvador",
    "rights": "© 2024 ChambingApp. Tous droits réservés."
  },
  "profile": {
    "photoModal": {
      "title": "Changer la photo de profil",
      "instructions": "Cliquez sur l'icône de l'appareil photo pour sélectionner une nouvelle photo.",
      "formats": "Formats autorisés : JPG, PNG, WebP (max 5MB)",
      "selectedFile": "Fichier sélectionné : {{filename}}",
      "fileSize": "Taille : {{size}} MB",
      "uploading": "Téléchargement...",
      "savePhoto": "Enregistrer la photo",
      "errors": {
        "invalidFormat": "Seuls les fichiers JPG, PNG ou WebP sont autorisés",
        "tooLarge": "Le fichier ne peut pas dépasser 5MB",
        "uploadError": "Erreur lors du téléchargement de la photo"
      }
    }
  },
  "contracts": {
    "status": {
      "pending": "En attente",
      "inProgress": "En cours",
      "completed": "Terminé",
      "cancelled": "Annulé",
      "disputed": "En litige"
    }
  },
  "errors": {
    "networkError": "Erreur de connexion",
    "serverError": "Erreur du serveur",
    "authError": "Erreur d'authentification",
    "validationError": "Erreur de validation",
    "notFound": "Non trouvé",
    "permissionDenied": "Permission refusée",
    "unknown": "Erreur inconnue"
  },
  "success": {
    "login": "Connexion réussie",
    "register": "Inscription réussie",
    "profileUpdated": "Profil mis à jour",
    "contractCreated": "Contrat créé",
    "paymentCompleted": "Paiement terminé",
    "generic": "Opération réussie"
  },
  "departments": {
    "ahuachapan": "Ahuachapán",
    "cabanas": "Cabañas",
    "chalatenango": "Chalatenango",
    "cuscatlan": "Cuscatlán",
    "laLibertad": "La Libertad",
    "laPaz": "La Paz",
    "laUnion": "La Unión",
    "morazan": "Morazán",
    "sanMiguel": "San Miguel",
    "sanSalvador": "San Salvador",
    "sanVicente": "San Vicente",
    "santaAna": "Santa Ana",
    "sonsonate": "Sonsonate",
    "usulutan": "Usulután"
  },
  "testimonials": {
    "maria": "Excellent service, très professionnels et ponctuels.",
    "carlos": "Ils ont résolu mon problème de plomberie rapidement.",
    "ana": "Très contents du travail de jardinage réalisé."
  },
  "welcome": "Bienvenue dans ChambingApp",
  "test": "Test de traduction en français"
}
```

## c:\Users\rexma\Desktop\chambing-website\src\locales\es\translation.json
```
{
  "common": {
    "loading": "Cargando...",
    "error": "Error",
    "success": "Éxito",
    "cancel": "Cancelar",
    "confirm": "Confirmar",
    "save": "Guardar",
    "edit": "Editar",
    "delete": "Eliminar",
    "search": "Buscar",
    "back": "Volver",
    "next": "Siguiente",
    "previous": "Anterior",
    "close": "Cerrar",
    "language": "Idioma",
    "or": "o",
    "debugInfo": "Info de Debug",
    "mode": "Modo",
    "currentLanguage": "Idioma actual",
    "admin": "Administrador"
  },
  "nav": {
    "home": "Inicio",
    "services": "Servicios",
    "dashboard": "Dashboard",
    "profile": "Mi Perfil",
    "login": "Iniciar Sesión",
    "register": "Registrarse",
    "logout": "Cerrar Sesión"
  },
  "auth": {
    "login": {
      "title": "Iniciar Sesión",
      "subtitle": "Accede a tu cuenta de ChambingApp",
      "email": "Email",
      "password": "Contraseña",
      "loginButton": "Iniciar Sesión",
      "loginButtonLoading": "Iniciando sesión...",
      "noAccount": "¿No tienes cuenta?",
      "registerHere": "Regístrate aquí",
      "testData": "Datos de prueba para testing:",
      "clientUser": "Usuario Cliente",
      "workerUser": "Usuario Trabajador",
      "autoFillInfo": "Haz clic para autocompletar los campos"
    },
    "register": {
      "title": "Crear Cuenta",
      "subtitle": "Únete a la comunidad de ChambingApp",
      "name": "Nombre",
      "lastName": "Apellido",
      "email": "Email",
      "phone": "Teléfono",
      "department": "Departamento",
      "municipality": "Municipio",
      "password": "Contraseña",
      "confirmPassword": "Confirmar Contraseña",
      "userType": "Tipo de Usuario",
      "client": "Cliente - Busco servicios",
      "worker": "Trabajador - Ofrezco servicios",
      "clientHelp": "Podrás contratar servicios",
      "workerHelp": "Podrás ofrecer tus servicios",
      "registerButton": "Crear Cuenta",
      "registerButtonLoading": "Creando cuenta...",
      "haveAccount": "¿Ya tienes cuenta?",
      "loginHere": "Inicia sesión aquí"
    },
    "validation": {
      "required": "Este campo es requerido",
      "emailInvalid": "Email inválido",
      "passwordMin": "La contraseña debe tener al menos 6 caracteres",
      "passwordMatch": "Las contraseñas deben coincidir"
    }
  },
  "home": {
    "hero": {
      "title": "Conectamos talento con oportunidades",
      "subtitle": "Encuentra profesionales calificados para tu hogar o únete como trabajador independiente",
      "startNow": "Comenzar Ahora",
      "login": "Iniciar Sesión",
      "dashboard": "Ir a Dashboard"
    },
    "services": {
      "title": "Nuestros Servicios",
      "subtitle": "Encuentra el profesional perfecto para cada tarea",
      "viewProfessionals": "Ver Profesionales"
    },
    "features": {
      "title": "¿Por qué elegirnos?",
      "verifiedWorkers": {
        "title": "Trabajadores Verificados",
        "description": "Todos nuestros profesionales pasan por un proceso de verificación riguroso"
      },
      "availability": {
        "title": "Disponibilidad 24/7",
        "description": "Encuentra ayuda cuando la necesites, cualquier día de la semana"
      },
      "securePayments": {
        "title": "Pagos Seguros",
        "description": "Sistema de pagos protegido con múltiples opciones de pago"
      }
    },
    "testimonials": {
      "title": "Lo que dicen nuestros usuarios"
    },
    "cta": {
      "title": "¿Listo para comenzar?",
      "subtitle": "Únete a miles de usuarios satisfechos en El Salvador",
      "createAccount": "Crear Cuenta Gratis"
    }
  },
  "dashboard": {
    "welcome": "¡Bienvenido, {{name}}!",
    "editProfile": "Editar Perfil",
    "changePhoto": "Cambiar Foto de Perfil",
    "userType": "Tipo: {{type}}",
    "location": "{{department}}, {{municipality}}",
    "stats": {
      "availableServices": "Servicios Disponibles",
      "myContracts": "Mis Contratos",
      "availableBalance": "Saldo Disponible",
      "notifications": "Notificaciones"
    },
    "availableServices": "Servicios Disponibles",
    "recentContracts": "Contratos Recientes",
    "viewAll": "Ver Todos",
    "noContracts": {
      "title": "No tienes contratos aún",
      "subtitle": "Comienza explorando nuestros servicios disponibles",
      "exploreServices": "Explorar Servicios"
    },
    "contract": {
      "number": "Contrato #{{id}}",
      "status": "Estado: {{status}}",
      "date": "Fecha: {{date}}",
      "viewDetails": "Ver Detalles"
    }
  },
  "services": {
    "categories": {
      "domesticCleaning": "Limpieza Doméstica",
      "plumbing": "Plomería",
      "electricity": "Electricidad",
      "gardening": "Jardinería",
      "carpentry": "Carpintería",
      "construction": "Construcción"
    },
    "descriptions": {
      "domesticCleaning": "Servicio profesional de limpieza para tu hogar",
      "plumbing": "Reparaciones e instalaciones de plomería",
      "electricity": "Instalaciones y reparaciones eléctricas",
      "gardening": "Mantenimiento de jardines y áreas verdes",
      "carpentry": "Trabajos en madera y muebles",
      "construction": "Trabajos de construcción y remodelación"
    }
  },
  "footer": {
    "description": "Conectamos talento con oportunidades en El Salvador.",
    "services": "Servicios",
    "company": "Empresa",
    "about": "Acerca de",
    "terms": "Términos de Servicio",
    "privacy": "Política de Privacidad",
    "help": "Ayuda",
    "contact": "Contacto",
    "email": "info@chambingapp.com",
    "phone": "+503 2234-5678",
    "address": "San Salvador, El Salvador",
    "rights": "© 2024 ChambingApp. Todos los derechos reservados."
  },
  "profile": {
    "photoModal": {
      "title": "Cambiar Foto de Perfil",
      "instructions": "Haz clic en el icono de la cámara para seleccionar una nueva foto.",
      "formats": "Formatos permitidos: JPG, PNG, WebP (máximo 5MB)",
      "selectedFile": "Archivo seleccionado: {{filename}}",
      "fileSize": "Tamaño: {{size}} MB",
      "uploading": "Subiendo...",
      "savePhoto": "Guardar Foto",
      "errors": {
        "invalidFormat": "Solo se permiten archivos JPG, PNG o WebP",
        "tooLarge": "El archivo no puede ser mayor a 5MB",
        "uploadError": "Error al subir la foto"
      }
    }
  },
  "contracts": {
    "status": {
      "pending": "Pendiente",
      "inProgress": "En Progreso",
      "completed": "Completado",
      "cancelled": "Cancelado",
      "disputed": "En Disputa"
    }
  },
  "errors": {
    "networkError": "Error de conexión",
    "serverError": "Error del servidor",
    "authError": "Error de autenticación",
    "validationError": "Error de validación",
    "notFound": "No encontrado",
    "permissionDenied": "Permiso denegado",
    "unknown": "Error desconocido"
  },
  "success": {
    "login": "Inicio de sesión exitoso",
    "register": "Registro exitoso",
    "profileUpdated": "Perfil actualizado",
    "contractCreated": "Contrato creado",
    "paymentCompleted": "Pago completado",
    "generic": "Operación exitosa"
  },
  "departments": {
    "ahuachapan": "Ahuachapán",
    "cabanas": "Cabañas",
    "chalatenango": "Chalatenango",
    "cuscatlan": "Cuscatlán",
    "laLibertad": "La Libertad",
    "laPaz": "La Paz",
    "laUnion": "La Unión",
    "morazan": "Morazán",
    "sanMiguel": "San Miguel",
    "sanSalvador": "San Salvador",
    "sanVicente": "San Vicente",
    "santaAna": "Santa Ana",
    "sonsonate": "Sonsonate",
    "usulutan": "Usulután"
  },
  "testimonials": {
    "maria": "Excelente servicio, muy profesionales y puntuales.",
    "carlos": "Resolvieron mi problema de plomería rápidamente.",
    "ana": "Muy contentos con el trabajo de jardinería realizado."
  },
  "welcome": "Bienvenido a ChambingApp",
  "test": "Prueba de traducción en español"
}
```

## c:\Users\rexma\Desktop\chambing-website\src\App.css
```
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useTranslations.js
```
import { useTranslation } from 'react-i18next';
import { 
  changeLanguage, 
  getCurrentLanguage 
} from '../i18n/config';

/**
 * Hook personalizado para manejar traducciones en ChambingApp
 * Proporciona funciones adicionales y shortcuts para operaciones comunes
 */
export const useTranslations = () => {
  const { t, i18n, ready } = useTranslation();

  // Shortcuts para traducciones comunes
  const common = {
    loading: t('common.loading'),
    error: t('common.error'),
    success: t('common.success'),
    cancel: t('common.cancel'),
    confirm: t('common.confirm'),
    save: t('common.save'),
    edit: t('common.edit'),
    delete: t('common.delete'),
    search: t('common.search'),
    back: t('common.back'),
    next: t('common.next'),
    previous: t('common.previous'),
    close: t('common.close'),
    language: t('common.language'),
  };

  const nav = {
    home: t('nav.home'),
    services: t('nav.services'),
    dashboard: t('nav.dashboard'),
    profile: t('nav.profile'),
    login: t('nav.login'),
    register: t('nav.register'),
    logout: t('nav.logout'),
  };

  // Función para traducir nombres de servicios
  const translateService = (serviceKey) => {
    return t(`services.categories.${serviceKey}`, serviceKey);
  };

  // Función para traducir tipos de usuario
  const translateUserType = (type) => {
    const typeMap = {
      'cliente': t('auth.register.client'),
      'trabajador': t('auth.register.worker'),
      'admin': t('common.admin'),
    };
    return typeMap[type] || type;
  };

  // Función para obtener mensajes de error traducidos
  const getErrorMessage = (errorCode) => {
    const errorMap = {
      'network_error': t('errors.networkError'),
      'server_error': t('errors.serverError'),
      'auth_error': t('errors.authError'),
      'validation_error': t('errors.validationError'),
      'not_found': t('errors.notFound'),
      'permission_denied': t('errors.permissionDenied'),
    };
    return errorMap[errorCode] || t('errors.unknown');
  };

  // Función para obtener mensajes de éxito traducidos
  const getSuccessMessage = (actionType) => {
    const successMap = {
      'login': t('success.login'),
      'register': t('success.register'),
      'profile_updated': t('success.profileUpdated'),
      'contract_created': t('success.contractCreated'),
      'payment_completed': t('success.paymentCompleted'),
    };
    return successMap[actionType] || t('success.generic');
  };

  // Función para obtener texto con interpolación de variables
  const interpolate = (key, variables = {}) => {
    return t(key, variables);
  };

  return {
    // Función de traducción básica
    t,
    
    // Información del idioma
    language: getCurrentLanguage(),
    isReady: ready,
    
    // Funciones de control
    changeLanguage,
    
    // Shortcuts para traducciones comunes
    common,
    nav,
    
    // Funciones especializadas
    translateService,
    translateUserType,
    getErrorMessage,
    getSuccessMessage,
    interpolate,
    
    // Instancia de i18n para casos avanzados
    i18n,
  };
};

export default useTranslations;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\common\LanguageSelector.jsx
```
import React, { useState } from 'react';
import { useTranslation } from 'react-i18next';
import {
  IconButton,
  Menu,
  MenuItem,
  ListItemIcon,
  ListItemText,
  Tooltip,
  Box,
  Typography,
} from '@mui/material';
import {
  Language as LanguageIcon,
  Check as CheckIcon,
} from '@mui/icons-material';
import { changeLanguage, getCurrentLanguage } from '../../i18n/config';

const LanguageSelector = ({ 
  variant = 'icon', // 'icon' o 'button'
  color = 'inherit',
  size = 'medium'
}) => {
  const { t } = useTranslation();
  const [anchorEl, setAnchorEl] = useState(null);
  const [isChanging, setIsChanging] = useState(false);
  
  const currentLanguage = getCurrentLanguage();

  // Información de los idiomas
  const languages = {
    es: { name: 'Español', nativeName: 'Español', flag: '🇪🇸' },
    en: { name: 'English', nativeName: 'English', flag: '🇺🇸' },
    fr: { name: 'Français', nativeName: 'Français', flag: '🇫🇷' },
  };

  const handleClick = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleClose = () => {
    setAnchorEl(null);
  };

  const handleLanguageChange = async (lng) => {
    if (lng === currentLanguage || isChanging) return;
    
    setIsChanging(true);
    
    try {
      console.log(`🌐 LanguageSelector: Cambiando a ${lng}`);
      await changeLanguage(lng);
      
      // Pequeña pausa para mostrar feedback visual
      setTimeout(() => {
        setIsChanging(false);
        handleClose();
      }, 300);
      
    } catch (error) {
      console.error('❌ Error changing language:', error);
      setIsChanging(false);
    }
  };

  const getCurrentLanguageInfo = () => {
    return languages[currentLanguage] || languages.es;
  };

  const renderTrigger = () => {
    const currentLangInfo = getCurrentLanguageInfo();
    
    if (variant === 'button') {
      return (
        <Box
          onClick={handleClick}
          sx={{
            display: 'flex',
            alignItems: 'center',
            gap: 1,
            cursor: 'pointer',
            padding: '8px 12px',
            borderRadius: 1,
            transition: 'background-color 0.2s',
            '&:hover': {
              backgroundColor: 'action.hover',
            },
          }}
        >
          <Typography component="span" sx={{ fontSize: '1.2em' }}>
            {currentLangInfo.flag}
          </Typography>
          <Typography variant="body2" sx={{ fontWeight: 500 }}>
            {currentLangInfo.nativeName}
          </Typography>
        </Box>
      );
    }
    
    // Variant 'icon' (default)
    return (
      <Tooltip title={`${t('common.language')}: ${currentLangInfo.name}`}>
        <IconButton
          onClick={handleClick}
          size={size}
          color={color}
          disabled={isChanging}
          sx={{
            position: 'relative',
            transition: 'all 0.3s ease',
            '&:hover': {
              transform: 'scale(1.05)',
            },
          }}
        >
          <LanguageIcon />
          {/* Badge con la bandera del idioma actual */}
          <Box
            sx={{
              position: 'absolute',
              top: -2,
              right: -2,
              width: 16,
              height: 16,
              borderRadius: '50%',
              backgroundColor: 'background.paper',
              border: '1px solid',
              borderColor: 'divider',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontSize: '0.6em',
            }}
          >
            {currentLangInfo.flag}
          </Box>
        </IconButton>
      </Tooltip>
    );
  };

  return (
    <>
      {renderTrigger()}
      
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleClose}
        anchorOrigin={{
          vertical: 'bottom',
          horizontal: 'right',
        }}
        transformOrigin={{
          vertical: 'top',
          horizontal: 'right',
        }}
        PaperProps={{
          elevation: 8,
          sx: {
            mt: 1,
            minWidth: 160,
            borderRadius: 2,
            '& .MuiMenuItem-root': {
              borderRadius: 1,
              margin: '2px 8px',
              transition: 'all 0.2s',
            },
          },
        }}
      >
        {Object.entries(languages).map(([lng, info]) => (
          <MenuItem
            key={lng}
            onClick={() => handleLanguageChange(lng)}
            selected={lng === currentLanguage}
            disabled={isChanging}
            sx={{
              display: 'flex',
              alignItems: 'center',
              gap: 1.5,
              py: 1,
              '&.Mui-selected': {
                backgroundColor: 'primary.light',
                color: 'primary.main',
                '&:hover': {
                  backgroundColor: 'primary.light',
                },
              },
            }}
          >
            <ListItemIcon sx={{ minWidth: 'auto' }}>
              <Typography component="span" sx={{ fontSize: '1.2em' }}>
                {info.flag}
              </Typography>
            </ListItemIcon>
            
            <ListItemText>
              <Typography variant="body2" sx={{ fontWeight: 500 }}>
                {info.nativeName}
              </Typography>
            </ListItemText>
            
            {lng === currentLanguage && (
              <CheckIcon 
                color="primary" 
                sx={{ 
                  fontSize: '1.1em',
                  ml: 1 
                }} 
              />
            )}
          </MenuItem>
        ))}
        
        {/* Footer del menú */}
        <Box sx={{ px: 2, py: 1, borderTop: '1px solid', borderColor: 'divider', mt: 1 }}>
          <Typography variant="caption" color="text.secondary" align="center">
            {isChanging ? (
              '🔄 Cambiando...'
            ) : (
              `💡 ${getCurrentLanguageInfo().nativeName}`
            )}
          </Typography>
        </Box>
      </Menu>
    </>
  );
};

export default LanguageSelector;
```

## c:\Users\rexma\Desktop\chambing-website\src\main.jsx
```
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './styles/globals.scss'
import './i18n/config'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

## c:\Users\rexma\Desktop\chambing-website\src\services\paymentsService.js
```
import api from './api';

export const paymentsService = {
    async createPayment(data) {
        const response = await api.post('/payments', data);
        return response.data;
    },
    async getPaymentHistory(params = {}) {
        const response = await api.get('/payments/history', { params });
        return response.data;
    },

    async getWorkerBalance() {
        const response = await api.get('/payments/balance');
        return response.data;
    },

    async processWompiPayment(data) {
        const response = await api.post('/payments/wompi/process', data);
        return response.data;
    },
    async getPaymentById(id) {
        const response = await api.get(`/payments/${id}`);
        return response.data;
    },

    async confirmPayment(id) {
        const response = await api.post(`/payments/${id}/confirm`);
        return response.data;
    },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\contractService.js
```
import api from './api';

export const contractService = {
  // ✅ Corregir: usar la ruta que SÍ existe en el backend
  async getMyContracts() {
    try {
      console.log('🔧 contractService: Obteniendo contratos del usuario...');
      
      // ✅ Usar /contracts en lugar de /contracts/my-contracts
      const response = await api.get('/contracts');
      console.log('🔧 contractService: Contratos recibidos:', response.data);
      
      return response.data;
    } catch (error) {
      console.error('❌ contractService: Error obteniendo contratos:', error);
      
      // Si es un error 404 o 401, retornar array vacío en lugar de fallar
      if (error.response?.status === 404 || error.response?.status === 401) {
        console.log('📝 contractService: Retornando array vacío por error de autorización');
        return [];
      }
      
      throw error;
    }
  },

  async getContractById(id) {
    try {
      console.log('🔧 contractService: Obteniendo contrato por ID:', id);
      const response = await api.get(`/contracts/${id}`);
      return response.data;
    } catch (error) {
      console.error('❌ contractService: Error obteniendo contrato:', error);
      throw error;
    }
  },

  async createContract(contractData) {
    try {
      console.log('🔧 contractService: Creando contrato:', contractData);
      const response = await api.post('/contracts', contractData);
      return response.data;
    } catch (error) {
      console.error('❌ contractService: Error creando contrato:', error);
      throw error;
    }
  },

  async updateContractStatus(id, newStatus, userId, notes) {
    try {
      console.log('🔧 contractService: Actualizando estado del contrato:', id, newStatus);
      const response = await api.post(`/contracts/${id}/estado`, {
        nuevoEstado: newStatus,
        usuarioId: userId,
        notas: notes
      });
      return response.data;
    } catch (error) {
      console.error('❌ contractService: Error actualizando estado:', error);
      throw error;
    }
  },

  async getContractHistory(id) {
    try {
      console.log('🔧 contractService: Obteniendo historial del contrato:', id);
      const response = await api.get(`/contracts/${id}/historial`);
      return response.data;
    } catch (error) {
      console.error('❌ contractService: Error obteniendo historial:', error);
      throw error;
    }
  },

  // ✅ Método adicional para filtrar contratos por usuario (si necesitas)
  async getContractsByUser(userId, role = 'empleador') {
    try {
      console.log('🔧 contractService: Obteniendo contratos por usuario:', userId, role);
      
      const queryParam = role === 'empleador' ? 'empleadorId' : 'trabajadorId';
      const response = await api.get(`/contracts?${queryParam}=${userId}`);
      
      return response.data;
    } catch (error) {
      console.error('❌ contractService: Error obteniendo contratos por usuario:', error);
      throw error;
    }
  }
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\serviceService.js
```
import api from './api';

export const serviceService = {
  // ✅ Usar /services/categorias (como está en tu backend)
  async getCategories() {
    try {
      console.log('🔧 serviceService: Obteniendo categorías...');
      
      // ✅ Tu backend tiene /services/categorias (no /categories)
      const response = await api.get('/services/categorias');
      console.log('🔧 serviceService: Categorías recibidas:', response.data);
      
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error obteniendo categorías:', error);
      
      // Si falla, retornar array vacío para no romper la UI
      if (error.response?.status === 404 || error.response?.status === 500) {
        console.log('📝 serviceService: Retornando array vacío por error');
        return [];
      }
      
      throw error;
    }
  },

  async getCategoryById(id) {
    try {
      console.log('🔧 serviceService: Obteniendo categoría por ID:', id);
      const response = await api.get(`/services/categorias/${id}`);
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error obteniendo categoría:', error);
      throw error;
    }
  },

  async getWorkersByCategory(categoryId) {
    try {
      console.log('🔧 serviceService: Obteniendo trabajadores por categoría:', categoryId);
      const response = await api.get(`/services/categorias/${categoryId}/trabajadores`);
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error obteniendo trabajadores:', error);
      throw error;
    }
  },

  async createCategory(categoryData) {
    try {
      console.log('🔧 serviceService: Creando categoría:', categoryData);
      const response = await api.post('/services/categorias', categoryData);
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error creando categoría:', error);
      throw error;
    }
  },

  async updateCategory(id, categoryData) {
    try {
      console.log('🔧 serviceService: Actualizando categoría:', id, categoryData);
      const response = await api.patch(`/services/categorias/${id}`, categoryData);
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error actualizando categoría:', error);
      throw error;
    }
  },

  async createTarifa(tarifaData) {
    try {
      console.log('🔧 serviceService: Creando tarifa:', tarifaData);
      const response = await api.post('/services/tarifas', tarifaData);
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error creando tarifa:', error);
      throw error;
    }
  },

  async assignWorkerToCategory(assignmentData) {
    try {
      console.log('🔧 serviceService: Asignando trabajador a categoría:', assignmentData);
      const response = await api.post('/services/trabajadores/asignar', assignmentData);
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error asignando trabajador:', error);
      throw error;
    }
  },

  // ✅ Método de prueba para verificar conexión
  async testConnection() {
    try {
      console.log('🔧 serviceService: Probando conexión...');
      const response = await api.get('/services/test');
      return response.data;
    } catch (error) {
      console.error('❌ serviceService: Error en prueba de conexión:', error);
      throw error;
    }
  }
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\userService.js
```
import { get } from 'react-hook-form';
import api from './api';

export const userService = {
    async getProfile(){
        const response = await api.get('/user/profile');
        return response.data;
    },

    async updateProfile(userData){
        const response = await api.put('/user/profile', userData);
        return response.data;
    },

    async uploadProfilePhoto(file){
        const formData = new FormData();
        formData.append('photo', file);

        const respontse = await api.post('/user/profile/photo', formData, {
            headers: {
                'Content-Type': 'multipart/form-data'
            }
        });

        return respontse.data;
    },
    async getUsers(params = {}) {
        const response = await api.get('/user', { params });
        return response.data;
    },
    async getUserById(userId) {
        const response = await api.get(`/user/${id}`);
        return response.data;
    },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\authService.js
```
import api from './api';

export const authService = {
  async login(credentials) {
    try {
      console.log('🔧 authService: Enviando petición login...', credentials);
      const response = await api.post('/auth/login', credentials);
      console.log('🔧 authService: Respuesta recibida:', response.data);
      
      // ✅ Usar los nombres correctos que retorna el backend
      const { accessToken, refreshToken, user } = response.data;

      // Guardar tokens y usuario en localStorage
      localStorage.setItem('token', accessToken);           // ✅ accessToken del backend
      localStorage.setItem('refresh_token', refreshToken);  // ✅ refreshToken del backend
      
      // Guardar usuario solo si existe en la respuesta
      if (user) {
        localStorage.setItem('user', JSON.stringify(user));
      }

     
      return {
        access_token: accessToken,  
        refresh_token: refreshToken,
        user: user
      };
    } catch (error) {
      console.error('❌ authService: Error en login:', error.response?.data || error);
      throw error;
    }
  },

  async register(userData) {
    try {
      console.log('🔧 authService: Enviando petición registro...', userData);
     const response = await api.post('/users/register', userData);
      console.log('🔧 authService: Respuesta registro:', response.data);
      return response.data;
    } catch (error) {
      console.error('❌ authService: Error en registro:', error.response?.data || error);
      throw error;
    }
  },

  async logout() {
    try {
      console.log('🔧 authService: Enviando petición logout...');
      await api.post('/auth/logout');
    } catch (error) {
      console.error('❌ authService: Error en logout:', error.response?.data || error);
    }
    
    // Limpiar localStorage siempre
    localStorage.removeItem('token');
    localStorage.removeItem('refresh_token');
    localStorage.removeItem('user');
    window.location.href = '/login';
  },

  async refresh_token() {
    try {
      const refresh_token = localStorage.getItem('refresh_token');
      console.log('🔧 authService: Refrescando token...');
      
      if (!refresh_token) {
        throw new Error('No hay refresh token disponible');
      }

      const response = await api.post('/auth/refresh', { 
        refreshToken: refresh_token  
      });
      
      const { accessToken } = response.data;  
      
      localStorage.setItem('token', accessToken);
      console.log('✅ authService: Token refrescado exitosamente');
      return accessToken;
    } catch (error) {
      console.error('❌ authService: Error refrescando token:', error);
      this.logout();
      throw error;
    }
  },

  getCurrentUser() {
    const user = localStorage.getItem('user');
    return user ? JSON.parse(user) : null;
  },

  isAuthenticated() {
    return !!localStorage.getItem('token');
  },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\theme\muiTheme.js
```
// src/theme/muiTheme.js - ARCHIVO FALTANTE
import { createTheme } from '@mui/material/styles';

export const theme = createTheme({
  palette: {
    primary: {
      main: '#2563eb',
      light: '#3b82f6',
      dark: '#1d4ed8',
      contrastText: '#ffffff',
    },
    secondary: {
      main: '#64748b',
      light: '#94a3b8',
      dark: '#475569',
      contrastText: '#ffffff',
    },
    success: {
      main: '#10b981',
      light: '#34d399',
      dark: '#047857',
    },
    warning: {
      main: '#f59e0b',
      light: '#fbbf24',
      dark: '#d97706',
    },
    error: {
      main: '#ef4444',
      light: '#f87171',
      dark: '#dc2626',
    },
    info: {
      main: '#3b82f6',
      light: '#60a5fa',
      dark: '#2563eb',
    },
    background: {
      default: '#f8fafc',
      paper: '#ffffff',
    },
    text: {
      primary: '#1e293b',
      secondary: '#64748b',
    },
    grey: {
      50: '#f8fafc',
      100: '#f1f5f9',
      200: '#e2e8f0',
      300: '#cbd5e1',
      400: '#94a3b8',
      500: '#64748b',
      600: '#475569',
      700: '#334155',
      800: '#1e293b',
      900: '#0f172a',
    },
  },
  typography: {
    fontFamily: '"Roboto", "Helvetica", "Arial", sans-serif',
    h1: {
      fontSize: '2.5rem',
      fontWeight: 700,
      lineHeight: 1.2,
    },
    h2: {
      fontSize: '2rem',
      fontWeight: 600,
      lineHeight: 1.3,
    },
    h3: {
      fontSize: '1.75rem',
      fontWeight: 600,
      lineHeight: 1.3,
    },
    h4: {
      fontSize: '1.5rem',
      fontWeight: 500,
      lineHeight: 1.4,
    },
    h5: {
      fontSize: '1.25rem',
      fontWeight: 500,
      lineHeight: 1.4,
    },
    h6: {
      fontSize: '1rem',
      fontWeight: 500,
      lineHeight: 1.5,
    },
    body1: {
      fontSize: '1rem',
      lineHeight: 1.6,
    },
    body2: {
      fontSize: '0.875rem',
      lineHeight: 1.5,
    },
    button: {
      textTransform: 'none',
      fontWeight: 500,
    },
  },
  shape: {
    borderRadius: 8,
  },
  spacing: 8,
  components: {
    MuiButton: {
      styleOverrides: {
        root: {
          textTransform: 'none',
          borderRadius: '8px',
          fontSize: '1rem',
          fontWeight: 500,
          padding: '8px 16px',
          transition: 'all 0.2s ease-in-out',
          '&:hover': {
            transform: 'translateY(-1px)',
            boxShadow: '0 4px 8px rgba(0, 0, 0, 0.12)',
          },
        },
        containedPrimary: {
          background: 'linear-gradient(45deg, #2563eb 30%, #3b82f6 90%)',
          boxShadow: '0 2px 4px rgba(37, 99, 235, 0.3)',
        },
        sizeLarge: {
          padding: '12px 24px',
          fontSize: '1.1rem',
        },
      },
    },
    MuiTextField: {
      styleOverrides: {
        root: {
          '& .MuiOutlinedInput-root': {
            borderRadius: '8px',
            transition: 'all 0.2s ease-in-out',
            '&:hover': {
              '& .MuiOutlinedInput-notchedOutline': {
                borderColor: '#3b82f6',
              },
            },
            '&.Mui-focused': {
              '& .MuiOutlinedInput-notchedOutline': {
                borderColor: '#2563eb',
                borderWidth: 2,
              },
            },
          },
        },
      },
    },
    MuiCard: {
      styleOverrides: {
        root: {
          borderRadius: '12px',
          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
          transition: 'all 0.3s ease-in-out',
          border: '1px solid rgba(0, 0, 0, 0.05)',
          '&:hover': {
            boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
            transform: 'translateY(-2px)',
          },
        },
      },
    },
    MuiAppBar: {
      styleOverrides: {
        root: {
          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
          backgroundColor: '#ffffff',
          color: '#1e293b',
        },
      },
    },
    MuiChip: {
      styleOverrides: {
        root: {
          borderRadius: '6px',
          fontWeight: 500,
        },
        colorPrimary: {
          backgroundColor: '#dbeafe',
          color: '#1d4ed8',
        },
        colorSecondary: {
          backgroundColor: '#f1f5f9',
          color: '#475569',
        },
      },
    },
    MuiAlert: {
      styleOverrides: {
        root: {
          borderRadius: '8px',
          border: '1px solid',
        },
        standardSuccess: {
          backgroundColor: '#f0fdf4',
          borderColor: '#22c55e',
          color: '#166534',
        },
        standardError: {
          backgroundColor: '#fef2f2',
          borderColor: '#ef4444',
          color: '#dc2626',
        },
        standardWarning: {
          backgroundColor: '#fffbeb',
          borderColor: '#f59e0b',
          color: '#d97706',
        },
        standardInfo: {
          backgroundColor: '#eff6ff',
          borderColor: '#3b82f6',
          color: '#2563eb',
        },
      },
    },
    MuiAvatar: {
      styleOverrides: {
        root: {
          backgroundColor: '#3b82f6',
          fontWeight: 600,
        },
      },
    },
    MuiDrawer: {
      styleOverrides: {
        paper: {
          borderRadius: '0 12px 12px 0',
          border: 'none',
          boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1)',
        },
      },
    },
    MuiMenu: {
      styleOverrides: {
        paper: {
          borderRadius: '8px',
          boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
          border: '1px solid rgba(0, 0, 0, 0.05)',
        },
      },
    },
    MuiSnackbar: {
      styleOverrides: {
        root: {
          '& .MuiAlert-root': {
            borderRadius: '8px',
          },
        },
      },
    },
  },
  breakpoints: {
    values: {
      xs: 0,
      sm: 600,
      md: 900,
      lg: 1200,
      xl: 1536,
    },
  },
});

// Tema oscuro (para futuro uso)
export const darkTheme = createTheme({
  ...theme,
  palette: {
    mode: 'dark',
    primary: {
      main: '#3b82f6',
      light: '#60a5fa',
      dark: '#2563eb',
    },
    background: {
      default: '#0f172a',
      paper: '#1e293b',
    },
    text: {
      primary: '#f8fafc',
      secondary: '#cbd5e1',
    },
  },
});

export default theme;
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\Home.jsx
```
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useTranslations } from '../hooks/useTranslations'; // ⭐ Usar nuestro hook
import {
  Box,
  Container,
  Typography,
  Button,
  Grid,
  Card,
  CardContent,
  CardActions,
  Avatar,
  Chip,
  Paper,
  useTheme,
  useMediaQuery,
  Rating,
} from '@mui/material';
import {
  Home as HomeIcon,
  Build,
  CleaningServices,
  Plumbing,
  ElectricalServices,
  Handyman,
  Star,
  CheckCircle,
  Security,
  Schedule,
  Payment,
} from '@mui/icons-material';
import { useAuth } from '../context/AuthContext';
import { serviceService } from '../services/serviceService';

const Home = () => {
  const { t, translateService, common } = useTranslations(); // ⭐ Usar nuestro hook
  const { isAuthenticated } = useAuth();
  const navigate = useNavigate();
  const theme = useTheme();
  const isMobile = useMediaQuery(theme.breakpoints.down('md'));
  const [categories, setCategories] = useState([]);

  useEffect(() => {
    const loadCategories = async () => {
      try {
        console.log('🔄 Intentando cargar categorías...');
        const data = await serviceService.getCategories();
        setCategories(data.slice(0, 6));
        console.log('✅ Categorías cargadas:', data.length);
      } catch (error) {
        console.error('❌ Error loading categories:', error);
        console.log('📝 Usando datos mock por error de conexión');
        // ⭐ Datos mock con claves de traducción
        setCategories([
          { id: 1, nombre: 'domesticCleaning', descripcion: 'domesticCleaning', icono: 'cleaning' },
          { id: 2, nombre: 'plumbing', descripcion: 'plumbing', icono: 'plumbing' },
          { id: 3, nombre: 'electricity', descripcion: 'electricity', icono: 'electrical' },
          { id: 4, nombre: 'carpentry', descripcion: 'carpentry', icono: 'carpenter' },
          { id: 5, nombre: 'gardening', descripcion: 'gardening', icono: 'garden' },
          { id: 6, nombre: 'construction', descripcion: 'construction', icono: 'build' },
        ]);
      }
    };

    loadCategories();
  }, []);

  const getServiceIcon = (iconName) => {
    const icons = {
      cleaning: <CleaningServices />,
      plumbing: <Plumbing />,
      electrical: <ElectricalServices />,
      carpenter: <Handyman />,
      garden: <HomeIcon />,
      build: <Build />,
    };
    return icons[iconName] || <Build />;
  };

  // ⭐ Características traducidas dinámicamente
  const features = [
    {
      icon: <Security color="primary" />,
      title: t('home.features.verifiedWorkers.title'),
      description: t('home.features.verifiedWorkers.description'),
    },
    {
      icon: <Schedule color="primary" />,
      title: t('home.features.availability.title'),
      description: t('home.features.availability.description'),
    },
    {
      icon: <Payment color="primary" />,
      title: t('home.features.securePayments.title'),
      description: t('home.features.securePayments.description'),
    },
  ];

  // ⭐ Testimonios traducidos dinámicamente
  const testimonials = [
    {
      name: 'María González',
      rating: 5,
      comment: t('testimonials.maria'),
      service: translateService('domesticCleaning'),
    },
    {
      name: 'Carlos Martínez',
      rating: 5,
      comment: t('testimonials.carlos'),
      service: translateService('plumbing'),
    },
    {
      name: 'Ana Rodríguez',
      rating: 4,
      comment: t('testimonials.ana'),
      service: translateService('gardening'),
    },
  ];

  return (
    <Box>
      {/* ⭐ Hero Section Traducida */}
      <Paper
        sx={{
          backgroundImage: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
          color: 'white',
          py: { xs: 6, md: 10 },
          textAlign: 'center',
        }}
      >
        <Container maxWidth="lg">
          <Typography
            variant={isMobile ? 'h3' : 'h2'}
            component="h1"
            gutterBottom
            fontWeight="bold"
          >
            {t('home.hero.title')}
          </Typography>
          <Typography
            variant={isMobile ? 'h6' : 'h5'}
            sx={{ mb: 4, opacity: 0.9 }}
          >
            {t('home.hero.subtitle')}
          </Typography>
          <Box sx={{ display: 'flex', gap: 2, justifyContent: 'center', flexWrap: 'wrap' }}>
            {isAuthenticated ? (
              <Button
                variant="contained"
                size="large"
                onClick={() => navigate('/dashboard')}
                sx={{
                  bgcolor: 'white',
                  color: 'primary.main',
                  '&:hover': { bgcolor: 'grey.100' },
                }}
              >
                {t('home.hero.dashboard')}
              </Button>
            ) : (
              <>
                <Button
                  variant="contained"
                  size="large"
                  onClick={() => navigate('/register')}
                  sx={{
                    bgcolor: 'white',
                    color: 'primary.main',
                    '&:hover': { bgcolor: 'grey.100' },
                  }}
                >
                  {t('home.hero.startNow')}
                </Button>
                <Button
                  variant="outlined"
                  size="large"
                  onClick={() => navigate('/login')}
                  sx={{
                    borderColor: 'white',
                    color: 'white',
                    '&:hover': { borderColor: 'white', bgcolor: 'rgba(255,255,255,0.1)' },
                  }}
                >
                  {t('home.hero.login')}
                </Button>
              </>
            )}
          </Box>
        </Container>
      </Paper>

      {/* ⭐ Services Section Traducida */}
      <Container maxWidth="lg" sx={{ py: 8 }}>
        <Typography variant="h3" textAlign="center" gutterBottom>
          {t('home.services.title')}
        </Typography>
        <Typography
          variant="h6"
          textAlign="center"
          color="text.secondary"
          sx={{ mb: 6 }}
        >
          {t('home.services.subtitle')}
        </Typography>
        
        <Grid container spacing={4}>
          {categories.map((category) => (
            <Grid key={category.id} size={{ xs: 12, sm: 6, md: 4 }}>
              <Card
                sx={{
                  height: '100%',
                  transition: 'transform 0.2s',
                  '&:hover': { transform: 'translateY(-4px)' },
                }}
              >
                <CardContent sx={{ textAlign: 'center', pt: 3 }}>
                  <Avatar
                    sx={{
                      bgcolor: 'primary.main',
                      width: 64,
                      height: 64,
                      mx: 'auto',
                      mb: 2,
                    }}
                  >
                    {getServiceIcon(category.icono)}
                  </Avatar>
                  <Typography variant="h6" gutterBottom>
                    {translateService(category.nombre)}
                  </Typography>
                  <Typography variant="body2" color="text.secondary">
                    {t(`services.descriptions.${category.descripcion}`, category.descripcion)}
                  </Typography>
                </CardContent>
                <CardActions sx={{ justifyContent: 'center', pb: 3 }}>
                  <Button size="small" variant="outlined">
                    {t('home.services.viewProfessionals')}
                  </Button>
                </CardActions>
              </Card>
            </Grid>
          ))}
        </Grid>
      </Container>

      {/* ⭐ Features Section Traducida */}
      <Box sx={{ bgcolor: 'grey.50', py: 8 }}>
        <Container maxWidth="lg">
          <Typography variant="h3" textAlign="center" gutterBottom>
            {t('home.features.title')}
          </Typography>
          <Grid container spacing={4} sx={{ mt: 4 }}>
            {features.map((feature, index) => (
              <Grid key={index} size={{ xs: 12, md: 4 }}>
                <Box textAlign="center">
                  <Avatar
                    sx={{
                      bgcolor: 'primary.light',
                      width: 80,
                      height: 80,
                      mx: 'auto',
                      mb: 2,
                    }}
                  >
                    {feature.icon}
                  </Avatar>
                  <Typography variant="h5" gutterBottom>
                    {feature.title}
                  </Typography>
                  <Typography variant="body1" color="text.secondary">
                    {feature.description}
                  </Typography>
                </Box>
              </Grid>
            ))}
          </Grid>
        </Container>
      </Box>

      {/* ⭐ Testimonials Section Traducida */}
      <Container maxWidth="lg" sx={{ py: 8 }}>
        <Typography variant="h3" textAlign="center" gutterBottom>
          {t('home.testimonials.title')}
        </Typography>
        <Grid container spacing={4} sx={{ mt: 4 }}>
          {testimonials.map((testimonial, index) => (
            <Grid key={index} size={{ xs: 12, md: 4 }}>
              <Card sx={{ height: '100%' }}>
                <CardContent>
                  <Box display="flex" alignItems="center" mb={2}>
                    <Avatar sx={{ mr: 2 }}>
                      {testimonial.name.charAt(0)}
                    </Avatar>
                    <Box>
                      <Typography variant="h6">{testimonial.name}</Typography>
                      <Chip label={testimonial.service} size="small" />
                    </Box>
                  </Box>
                  <Rating value={testimonial.rating} readOnly sx={{ mb: 2 }} />
                  <Typography variant="body2">"{testimonial.comment}"</Typography>
                </CardContent>
              </Card>
            </Grid>
          ))}
        </Grid>
      </Container>

      {/* ⭐ CTA Section Traducida */}
      <Paper
        sx={{
          bgcolor: 'primary.main',
          color: 'white',
          py: 8,
          textAlign: 'center',
        }}
      >
        <Container maxWidth="md">
          <Typography variant="h3" gutterBottom>
            {t('home.cta.title')}
          </Typography>
          <Typography variant="h6" sx={{ mb: 4, opacity: 0.9 }}>
            {t('home.cta.subtitle')}
          </Typography>
          {!isAuthenticated && (
            <Button
              variant="contained"
              size="large"
              onClick={() => navigate('/register')}
              sx={{
                bgcolor: 'white',
                color: 'primary.main',
                '&:hover': { bgcolor: 'grey.100' },
              }}
            >
              {t('home.cta.createAccount')}
            </Button>
          )}
        </Container>
      </Paper>

      {/* ⭐ Debug Info Traducida */}
      <Box sx={{ bgcolor: 'info.light', p: 2, mt: 4 }}>
        <Container maxWidth="lg">
          <Typography variant="subtitle2" gutterBottom>
            🔧 {t('common.debugInfo')}:
          </Typography>
          <Typography variant="caption" component="div">
            • API URL configurada: {import.meta.env.VITE_API_URL || 'http://localhost:3000/api'}<br/>
            • Categorías cargadas: {categories.length}<br/>
            • Backend esperado en: {import.meta.env.VITE_API_URL || 'http://localhost:3000/api'}
          </Typography>
        </Container>
      </Box>
    </Box>
  );
};

export default Home;
```

## c:\Users\rexma\Desktop\chambing-website\vite.config.js
```
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000', 
        changeOrigin: true,
        secure: false,
        rewrite: (path) => path.replace(/^\/api/, '') // Quita /api del path
      }
    }
  },
  css: {
    preprocessorOptions: {
      scss: {}
    }
  }
})
```

