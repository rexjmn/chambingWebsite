Enter your prompt here

# Project Files

- c:\Users\rexma\Desktop\chambing-website\src\components\auth\LoginForm.jsx
- c:\Users\rexma\Desktop\chambing-website\src\pages\Service.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\auth\ProtectedRoute.jsx
- c:\Users\rexma\Desktop\chambing-website\src\pages\PublicProfile.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\WorkerCard.jsx
- c:\Users\rexma\Desktop\chambing-website\src\services\serviceService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\workerService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\publicProfileService.js
- c:\Users\rexma\Desktop\chambing-website\vite.config.js
- c:\Users\rexma\Desktop\chambing-website\src\pages\Home.jsx
- c:\Users\rexma\Desktop\chambing-website\src\theme\muiTheme.js
- c:\Users\rexma\Desktop\chambing-website\src\services\authService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\userService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\contractService.js
- c:\Users\rexma\Desktop\chambing-website\src\services\paymentsService.js
- c:\Users\rexma\Desktop\chambing-website\src\main.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\common\LanguageSelector.jsx
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useTranslations.js
- c:\Users\rexma\Desktop\chambing-website\src\i18n\config.js
- c:\Users\rexma\Desktop\chambing-website\package.json
- c:\Users\rexma\Desktop\chambing-website\src\App.jsx
- c:\Users\rexma\Desktop\chambing-website\src\pages\Dashboard.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\SkeletonLoader.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\ProfilePhotoModal.jsx
- c:\Users\rexma\Desktop\chambing-website\src\services\profileService.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useAdmin.js
- c:\Users\rexma\Desktop\chambing-website\src\components\common\footer.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\auth\RegisterForm.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\common\navbar.jsx
- c:\Users\rexma\Desktop\chambing-website\src\styles\navbar.scss
- c:\Users\rexma\Desktop\chambing-website\index.html
- c:\Users\rexma\Desktop\chambing-website\src\context\AuthContext.jsx
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useApi.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useLocalStorage.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useNotification.js
- c:\Users\rexma\Desktop\chambing-website\src\hooks\useForm.js
- c:\Users\rexma\Desktop\chambing-website\src\utils\constants.js
- c:\Users\rexma\Desktop\chambing-website\src\utils\helpers.js
- c:\Users\rexma\Desktop\chambing-website\src\services\api.js
- c:\Users\rexma\Desktop\chambing-website\src\components\CoverPhotoModal.jsx
- c:\Users\rexma\Desktop\chambing-website\src\context\AdminContext.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\admin\ContractsManager.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\admin\CategoriesManager.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\admin\DocumentsVerifier.jsx
- c:\Users\rexma\Desktop\chambing-website\src\components\admin\UsersManager.jsx
- c:\Users\rexma\Desktop\chambing-website\src\pages\AdminDashboard.jsx

## c:\Users\rexma\Desktop\chambing-website\src\components\auth\LoginForm.jsx
```
import React, { useState } from 'react';
import { useNavigate, useLocation, Link } from 'react-router-dom';
import { useTranslations } from '../../hooks/useTranslations'; // ‚≠ê Usar nuestro hook
import { useAuth } from '../../context/AuthContext';
import {
  Box,
  Container,
  Card,
  CardContent,
  TextField,
  Button,
  Typography,
  Alert,
  InputAdornment,
  IconButton,
  Divider,
  Paper,
} from '@mui/material';
import { 
  Visibility, 
  VisibilityOff, 
  Email, 
  Lock,
  Login as LoginIcon 
} from '@mui/icons-material';
import { useForm } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';

const LoginForm = () => {
  const { t, common } = useTranslations(); // ‚≠ê Usar nuestro hook
  const [showPassword, setShowPassword] = useState(false);
  const { login, loading, error } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();

  const from = location.state?.from?.pathname || '/dashboard';
  const message = location.state?.message;

  // ‚≠ê Schema de validaci√≥n con traducciones din√°micas
  const schema = yup.object().shape({
    email: yup
      .string()
      .email(t('auth.validation.emailInvalid'))
      .required(t('auth.validation.required')),
    password: yup
      .string()
      .required(t('auth.validation.required')),
  });

  const {
    register,
    handleSubmit,
    setValue,
    formState: { errors },
  } = useForm({
    resolver: yupResolver(schema),
  });

  // Funci√≥n para llenar datos de prueba
  const fillTestData = (userType) => {
    if (userType === 'cliente') {
      setValue('email', 'cliente@test.com');
      setValue('password', 'password123');
    } else if (userType === 'trabajador') {
      setValue('email', 'trabajador@test.com');
      setValue('password', 'password123');
    }
  };

  const onSubmit = async (data) => {
    try {
    console.log('üöÄ Intentando login con:', { email: data.email });
    await login(data);
    console.log('‚úÖ Login exitoso, redirigiendo a:', from);
    await new Promise(resolve => setTimeout(resolve, 150));
    
    // ‚≠ê NUEVO: Resetear scroll antes de navegar
    window.scrollTo(0, 0);
    
    // Peque√±o delay para permitir que el estado se estabilice
    setTimeout(() => {
      navigate(from);
    }, 100);
  } catch (error) {
    console.error('‚ùå Error en login:', error);
  }
};

  return (
    <Container maxWidth="sm" sx={{ py: 8 }}>
      <Card elevation={3}>
        <CardContent sx={{ p: 4 }}>
          <Box textAlign="center" mb={3}>
            <LoginIcon color="primary" sx={{ fontSize: 48, mb: 2 }} />
            <Typography variant="h4" component="h1" gutterBottom>
              {t('auth.login.title')}
            </Typography>
            <Typography variant="body2" color="text.secondary">
              {t('auth.login.subtitle')}
            </Typography>
          </Box>
          
          {message && (
            <Alert severity="success" sx={{ mb: 2 }}>
              {message}
            </Alert>
          )}

          {error && (
            <Alert severity="error" sx={{ mb: 2 }}>
              {error}
            </Alert>
          )}

          {/* ‚≠ê Botones de datos de prueba traducidos */}
          <Paper 
            elevation={0} 
            sx={{ 
              bgcolor: 'grey.50', 
              p: 2, 
              mb: 3, 
              borderRadius: 2 
            }}
          >
            <Typography variant="subtitle2" gutterBottom color="text.secondary">
              üß™ {t('auth.login.testData')}
            </Typography>
            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap' }}>
              <Button
                size="small"
                variant="outlined"
                onClick={() => fillTestData('cliente')}
              >
                {t('auth.login.clientUser')}
              </Button>
              <Button
                size="small"
                variant="outlined"
                onClick={() => fillTestData('trabajador')}
              >
                {t('auth.login.workerUser')}
              </Button>
            </Box>
            <Typography variant="caption" display="block" sx={{ mt: 1 }}>
              {t('auth.login.autoFillInfo')}
            </Typography>
          </Paper>

          <form onSubmit={handleSubmit(onSubmit)}>
            <TextField
              {...register('email')}
              fullWidth
              label={t('auth.login.email')}
              type="email"
              error={!!errors.email}
              helperText={errors.email?.message}
              margin="normal"
              autoComplete="email"
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Email color="action" />
                  </InputAdornment>
                ),
              }}
            />

            <TextField
              {...register('password')}
              fullWidth
              label={t('auth.login.password')}
              type={showPassword ? 'text' : 'password'}
              error={!!errors.password}
              helperText={errors.password?.message}
              margin="normal"
              autoComplete="current-password"
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Lock color="action" />
                  </InputAdornment>
                ),
                endAdornment: (
                  <InputAdornment position="end">
                    <IconButton
                      onClick={() => setShowPassword(!showPassword)}
                      edge="end"
                      aria-label="toggle password visibility"
                    >
                      {showPassword ? <VisibilityOff /> : <Visibility />}
                    </IconButton>
                  </InputAdornment>
                ),
              }}
            />

            <Button
              type="submit"
              fullWidth
              variant="contained"
              size="large"
              disabled={loading}
              sx={{ mt: 3, mb: 2, py: 1.5 }}
            >
              {loading ? t('auth.login.loginButtonLoading') : t('auth.login.loginButton')}
            </Button>

            <Divider sx={{ my: 2 }}>
              <Typography variant="body2" color="text.secondary">
                {common.or}
              </Typography>
            </Divider>

            <Box textAlign="center">
              <Typography variant="body2">
                {t('auth.login.noAccount')}{' '}
                <Link 
                  to="/register" 
                  style={{ 
                    textDecoration: 'none',
                    fontWeight: 'bold',
                    color: '#2563eb'
                  }}
                >
                  {t('auth.login.registerHere')}
                </Link>
              </Typography>
            </Box>
          </form>
        </CardContent>
      </Card>

      {/* ‚≠ê Info de debugging traducida */}
      <Paper
        elevation={1}
        sx={{
          mt: 3,
          p: 2,
          bgcolor: 'info.light',
          color: 'info.contrastText',
        }}
      >
        <Typography variant="subtitle2" gutterBottom>
          üîß {t('common.debugInfo')}:
        </Typography>
        <Typography variant="caption" component="div">
          API URL: {import.meta.env.VITE_API_URL || 'http://localhost:3000'}
        </Typography>
        <Typography variant="caption" component="div">
          {t('common.mode')}: {import.meta.env.MODE}
        </Typography>
        <Typography variant="caption" component="div">
          Backend debe estar corriendo en: http://localhost:3000
        </Typography>
      </Paper>
    </Container>
  );
};

export default LoginForm;
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\Service.jsx
```
// src/pages/Services.jsx
import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import WorkerCard from '../components/WorkerCard';
import { publicProfileService } from '../services/publicProfileService';
import '../styles/services.scss';

const Services = () => {
  const navigate = useNavigate();
  const [workers, setWorkers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [filters, setFilters] = useState({
    categoria: '',
    departamento: '',
    habilidad: '',
    search: ''
  });

  // Cargar trabajadores al montar el componente
  useEffect(() => {
    fetchWorkers();
  }, [filters]);

  const fetchWorkers = async () => {
    try {
      setLoading(true);
      setError(null);

      // Aqu√≠ har√≠as la llamada a tu API para obtener trabajadores verificados
      // Por ahora, voy a mostrar la estructura esperada
      const response = await fetch(
        `${import.meta.env.VITE_API_URL}/users/workers?${new URLSearchParams({
          tipo_usuario: 'trabajador',
          verificado: true,
          ...filters
        })}`
      );

      if (!response.ok) {
        throw new Error('Error al cargar trabajadores');
      }

      const data = await response.json();
      setWorkers(data.data || []);
    } catch (err) {
      console.error('Error fetching workers:', err);
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  // Manejar click en una tarjeta
  const handleCardClick = (workerId) => {
    navigate(`/profile/${workerId}`);
  };

  // Manejar cambios en filtros
  const handleFilterChange = (filterName, value) => {
    setFilters(prev => ({
      ...prev,
      [filterName]: value
    }));
  };

  // Limpiar filtros
  const clearFilters = () => {
    setFilters({
      categoria: '',
      departamento: '',
      habilidad: '',
      search: ''
    });
  };

  if (loading) {
    return (
      <div className="services-page">
        <div className="container">
          <div className="loading-state">
            <div className="spinner"></div>
            <p>Cargando profesionales...</p>
          </div>
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="services-page">
        <div className="container">
          <div className="error-state">
            <h2>Error al cargar los datos</h2>
            <p>{error}</p>
            <button onClick={fetchWorkers} className="retry-btn">
              Intentar de nuevo
            </button>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="services-page">
      <div className="container">
        {/* Header */}
        <div className="page-header">
          <h1 className="page-title">Encuentra Profesionales</h1>
          <p className="page-subtitle">
            Conecta con trabajadores verificados y confiables
          </p>
        </div>

        {/* Filtros */}
        <div className="filters-section">
          <div className="filters-grid">
            {/* B√∫squeda por texto */}
            <div className="filter-item">
              <input
                type="text"
                placeholder="Buscar por nombre o habilidad..."
                value={filters.search}
                onChange={(e) => handleFilterChange('search', e.target.value)}
                className="filter-input"
              />
            </div>

            {/* Filtro por categor√≠a */}
            <div className="filter-item">
              <select
                value={filters.categoria}
                onChange={(e) => handleFilterChange('categoria', e.target.value)}
                className="filter-select"
              >
                <option value="">Todas las categor√≠as</option>
                <option value="construccion">Construcci√≥n</option>
                <option value="limpieza">Limpieza</option>
                <option value="jardineria">Jardiner√≠a</option>
                <option value="plomeria">Plomer√≠a</option>
                <option value="electricidad">Electricidad</option>
                <option value="carpinteria">Carpinter√≠a</option>
              </select>
            </div>

            {/* Filtro por departamento */}
            <div className="filter-item">
              <select
                value={filters.departamento}
                onChange={(e) => handleFilterChange('departamento', e.target.value)}
                className="filter-select"
              >
                <option value="">Todos los departamentos</option>
                <option value="San Salvador">San Salvador</option>
                <option value="La Libertad">La Libertad</option>
                <option value="Santa Ana">Santa Ana</option>
                <option value="San Miguel">San Miguel</option>
              </select>
            </div>

            {/* Bot√≥n limpiar filtros */}
            {(filters.search || filters.categoria || filters.departamento) && (
              <button onClick={clearFilters} className="clear-filters-btn">
                Limpiar filtros
              </button>
            )}
          </div>
        </div>

        {/* Resultados */}
        <div className="results-section">
          <div className="results-header">
            <h2 className="results-count">
              {workers.length} {workers.length === 1 ? 'profesional encontrado' : 'profesionales encontrados'}
            </h2>
          </div>

          {/* Grid de tarjetas */}
          {workers.length > 0 ? (
            <div className="workers-grid">
              {workers.map(worker => (
                <WorkerCard
                  key={worker.id}
                  worker={worker}
                  onCardClick={handleCardClick}
                />
              ))}
            </div>
          ) : (
            <div className="empty-state">
              <div className="empty-icon">üîç</div>
              <h3>No se encontraron profesionales</h3>
              <p>Intenta ajustar tus filtros de b√∫squeda</p>
              <button onClick={clearFilters} className="clear-filters-btn">
                Ver todos los profesionales
              </button>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default Services;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\auth\ProtectedRoute.jsx
```
import React from 'react';
import { Navigate } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext';

const ProtectedRoute = ({ children, requiredRoles = [] }) => {
  const { user, loading } = useAuth();

  // ‚≠ê Mostrar loading MINIMALISTA (sin animaciones)
  if (loading) {
    return (
      <div style={{
        display: 'flex',
        justifyContent: 'center',
        alignItems: 'center',
        minHeight: '100vh',
        backgroundColor: '#f8fafc'
      }}>
        <div style={{
          width: '50px',
          height: '50px',
          border: '4px solid rgba(37, 64, 255, 0.1)',
          borderTopColor: '#2540FF',
          borderRadius: '50%',
          animation: 'spin 0.8s linear infinite'
        }} />
      </div>
    );
  }

  // Si no est√° autenticado, redirigir al home
  if (!user) {
    return <Navigate to="/" replace />;
  }

  // Si se requieren roles espec√≠ficos, verificar
  if (requiredRoles.length > 0) {
    const hasRequiredRole = requiredRoles.includes(user.tipo_usuario);
    
    if (!hasRequiredRole) {
      return <Navigate to="/dashboard" replace />;
    }
  }

  // ‚≠ê IMPORTANTE: Renderizar sin wrapper adicional
  return <>{children}</>;
};

export default ProtectedRoute;
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\PublicProfile.jsx
```
import React, { useState, useEffect } from 'react';
import { useTranslation } from 'react-i18next';
import { useParams, useNavigate } from 'react-router-dom';
import { publicProfileService } from '../services/publicProfileService';
import '../styles/public-profile.scss';

const PublicProfile = () => {
  const { t, i18n } = useTranslation();
  const { userId } = useParams(); 
  const navigate = useNavigate();
  
  const [user, setUser] = useState(null);
  const [skills, setSkills] = useState([]);
  const [reviews, setReviews] = useState([]);
  const [stats, setStats] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [showContactModal, setShowContactModal] = useState(false);

  useEffect(() => {
    const fetchUserData = async () => {
      try {
        setLoading(true);
        setError(null);
       
        const profileResponse = await publicProfileService.getPublicProfile(userId);
        
        if (profileResponse.status === 'success') {
          const userData = profileResponse.data;
          setUser(userData);

          // Las habilidades ya vienen en el perfil p√∫blico
          if (userData.habilidades && userData.habilidades.length > 0) {
            setSkills(userData.habilidades);
          }

          // Cargar datos adicionales solo si es trabajador
          if (userData.tipo_usuario === 'trabajador') {
            try {
              const [reviewsRes, statsRes] = await Promise.allSettled([
                publicProfileService.getUserReviews(userId),
                publicProfileService.getUserStats(userId)
              ]);

              if (reviewsRes.status === 'fulfilled') {
                setReviews(reviewsRes.value.data || []);
              }

              if (statsRes.status === 'fulfilled') {
                setStats(statsRes.value.data || {
                  trabajos_completados: 0,
                  rating: 0,
                  total_reviews: 0
                });
              }
            } catch (additionalError) {
              console.warn('Error loading additional data:', additionalError);
            }
          }
        }
      } catch (err) {
        console.error('Error fetching user profile:', err);
        setError(err.message || 'Error al cargar el perfil');
      } finally {
        setLoading(false);
      }
    };

    if (userId) {
      fetchUserData();
    } else {
      setError('ID de usuario no v√°lido');
      setLoading(false);
    }
  }, [userId]);

  const renderStars = (rating) => {
    return Array.from({ length: 5 }, (_, i) => (
      <span key={i} className={`star ${i < Math.floor(rating) ? 'filled' : 'empty'}`}>
        ‚òÖ
      </span>
    ));
  };

  const formatDate = (dateString) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString(i18n.language === 'es' ? 'es-ES' : 'en-US', {
      day: 'numeric',
      month: 'long',
      year: 'numeric'
    });
  };

  const formatMemberSince = (dateString) => {
    if (!dateString) return '';
    const date = new Date(dateString);
    return date.toLocaleDateString(i18n.language === 'es' ? 'es-ES' : 'en-US', {
      month: 'long',
      year: 'numeric'
    });
  };

  // Estados de carga y error
  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-text">{t('publicProfile.loading') || 'Cargando...'}</div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="not-found">
        <h1>{t('publicProfile.notFound') || 'Perfil no encontrado'}</h1>
        <p>{error}</p>
        <button onClick={() => navigate('/')} className="contact-button">
          {t('common.back') || 'Volver'}
        </button>
      </div>
    );
  }

  if (!user) {
    return (
      <div className="not-found">
        <h1>{t('publicProfile.notFound') || 'Perfil no encontrado'}</h1>
        <button onClick={() => navigate('/')} className="contact-button">
          {t('common.back') || 'Volver'}
        </button>
      </div>
    );
  }

  // Determinar si mostrar estad√≠sticas (solo para trabajadores)
  const isTrabajador = user.tipo_usuario === 'trabajador';
  const isVerified = user.verificado === true;
  const displayRating = stats?.rating || 0;
  const displayReviewCount = stats?.total_reviews || reviews.length || 0;
  const displayJobsCompleted = stats?.trabajos_completados || 0;

  return (
    <div className="public-profile">
      
      {/* Foto de Portada */}
      <div 
        className={`cover-photo ${!user.foto_portada ? 'default-cover' : ''}`}
        style={user.foto_portada ? { backgroundImage: `url(${user.foto_portada})` } : {}}
      >
        <div className="overlay" />
      </div>

      {/* Contenido Principal */}
      <div className="profile-content">
        
        {/* Tarjeta de Informaci√≥n Principal */}
        <div className="main-card">
          <div className="card-inner">
            
            {/* Foto de Perfil */}
            <div className="profile-photo">
              <img 
                src={user.foto_perfil || 'https://via.placeholder.com/150'} 
                alt={`${user.nombre} ${user.apellido}`}
              />
              {/* Badge de Verificaci√≥n para Trabajadores */}
              {isTrabajador && isVerified && (
                <div className="verified-badge" title="Trabajador Verificado">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <circle cx="12" cy="12" r="10" fill="#4CAF50"/>
                    <path d="M9 12l2 2 4-4" stroke="white" strokeWidth="2" strokeLinecap="round"/>
                  </svg>
                </div>
              )}
            </div>

            {/* Informaci√≥n B√°sica */}
            <div className="basic-info">
              <div className="name-container">
                <h1 className="name">
                  {user.nombre} {user.apellido}
                </h1>
                {/* Badge de Tipo de Usuario */}
                <span className={`user-type-badge ${isTrabajador ? 'worker' : 'client'}`}>
                  {isTrabajador ? 'üîß Trabajador' : 'üë§ Cliente'}
                </span>
                {/* Estado de Verificaci√≥n */}
                {isTrabajador && (
                  <span className={`verification-status ${isVerified ? 'verified' : 'pending'}`}>
                    {isVerified ? '‚úì Verificado' : '‚è≥ Pendiente de Verificaci√≥n'}
                  </span>
                )}
              </div>
              
              {/* Rating y Estad√≠sticas - Solo para trabajadores verificados */}
              {isTrabajador && isVerified && (
                <div className="rating-stats">
                  <div className="rating-container">
                    <div className="stars">
                      {renderStars(displayRating)}
                    </div>
                    <span className="rating-number">
                      {displayRating.toFixed(1)}
                    </span>
                    <span className="review-count">
                      ({displayReviewCount} {t('publicProfile.reviews') || 'rese√±as'})
                    </span>
                  </div>
                  <span className="separator">‚Ä¢</span>
                  <div className="jobs-completed">
                    <span className="checkmark">‚úì</span>
                    <span className="count">
                      {displayJobsCompleted} {t('publicProfile.jobsCompleted') || 'trabajos completados'}
                    </span>
                  </div>
                </div>
              )}

              {/* Ubicaci√≥n */}
              {(user.departamento || user.municipio) && (
                <div className="location">
                  <span className="icon">üìç</span>
                  <span>
                    {user.departamento}
                    {user.municipio && `, ${user.municipio}`}
                  </span>
                </div>
              )}

              {/* Bot√≥n de Contacto - Solo si hay tel√©fono (trabajadores verificados) */}
              {user.telefono && (
                <button
                  onClick={() => setShowContactModal(true)}
                  className="contact-button"
                >
                  üìû {t('publicProfile.contact') || 'Contactar'}
                </button>
              )}

              {/* Mensaje si no est√° verificado */}
              {isTrabajador && !isVerified && (
                <div className="info-message">
                  ‚ÑπÔ∏è Este trabajador est√° pendiente de verificaci√≥n
                </div>
              )}
            </div>
          </div>
        </div>

        {/* Grid de Informaci√≥n */}
        <div className="info-grid">
          
          {/* Sobre M√≠ */}
          <div className="section-card about-section">
            <h2 className="section-title">
              {t('publicProfile.aboutMe') || 'Sobre m√≠'}
            </h2>
            <p className="bio">
              {user.biografia || (t('publicProfile.noBio') || 'Sin biograf√≠a')}
            </p>
            {user.fecha_registro && (
              <div className="member-since">
                <div className="info">
                  <span className="icon">üìÖ</span>
                  <span>
                    {t('publicProfile.memberSince') || 'Miembro desde'} {formatMemberSince(user.fecha_registro)}
                  </span>
                </div>
              </div>
            )}
          </div>

          {/* Habilidades - Solo si es trabajador y tiene habilidades */}
          {isTrabajador && skills.length > 0 && (
            <div className="section-card skills-section">
              <h2 className="section-title">
                {t('publicProfile.mySkills') || 'Mis Habilidades'}
              </h2>
              <div className="skills-container">
                {skills.map((skill, index) => (
                  <div key={skill.id || index} className="skill-badge">
                    <span className="checkmark">‚úì</span>
                    {skill.nombre || skill.name}
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>

        {/* Reviews - Solo si es trabajador verificado y tiene reviews */}
        {isTrabajador && isVerified && reviews.length > 0 && (
          <div className="reviews-section">
            <h2 className="section-title">
              {t('publicProfile.clientReviews') || 'Rese√±as de Clientes'} ({displayReviewCount})
            </h2>
            
            <div className="reviews-list">
              {reviews.map(review => (
                <div key={review.id} className="review-card">
                  <div className="review-header">
                    <div className="reviewer-info">
                      <div className="reviewer-name">
                        {review.cliente_nombre || review.cliente}
                      </div>
                      <div className="stars">
                        {renderStars(review.rating || review.calificacion)}
                      </div>
                    </div>
                    <div className="review-date">
                      {formatDate(review.fecha || review.created_at)}
                    </div>
                  </div>
                  <p className="review-comment">
                    {review.comentario || review.comment}
                  </p>
                </div>
              ))}
            </div>
          </div>
        )}
      </div>

      {/* Modal de Contacto */}
      {showContactModal && (
        <>
          <div 
            onClick={() => setShowContactModal(false)}
            className="modal-overlay"
          />
          <div className="modal">
            <h3 className="modal-title">
              {t('publicProfile.contactInfo') || 'Informaci√≥n de Contacto'}
            </h3>
            <div className="modal-content">
              {user.telefono && (
                <div className="contact-info">
                  <span className="icon">üìû</span>
                  <div>
                    <div className="label">{t('publicProfile.phone') || 'Tel√©fono'}</div>
                    <div className="value">
                      <a href={`tel:${user.telefono}`}>{user.telefono}</a>
                    </div>
                  </div>
                </div>
              )}
              <button
                onClick={() => setShowContactModal(false)}
                className="close-button"
              >
                {t('common.close') || 'Cerrar'}
              </button>
            </div>
          </div>
        </>
      )}
    </div>
  );
};

export default PublicProfile;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\WorkerCard.jsx
```
import React from 'react';
import '../styles/components/WorkerCard.scss';

const WorkerCard = ({ worker, onCardClick }) => {
  // Calcular rating promedio y n√∫mero de reviews
  const rating = worker.stats?.rating || worker.rating || 0;
  const reviewCount = worker.stats?.total_reviews || worker.reviewCount || 0;
  const jobsCompleted = worker.stats?.trabajos_completados || worker.jobsCompleted || 0;

  // Renderizar estrellas
  const renderStars = (rating) => {
    return Array.from({ length: 5 }, (_, i) => (
      <span 
        key={i} 
        className={`star ${i < Math.floor(rating) ? 'filled' : 'empty'}`}
      >
        ‚òÖ
      </span>
    ));
  };

  // Truncar texto largo
  const truncateText = (text, maxLength = 80) => {
    if (!text) return 'Sin descripci√≥n disponible';
    if (text.length <= maxLength) return text;
    return text.substring(0, maxLength) + '...';
  };

  // Obtener t√≠tulo/categor√≠a principal
  const getWorkerTitle = () => {
    if (worker.titulo) return worker.titulo;
    if (worker.categorias && worker.categorias.length > 0) {
      return worker.categorias[0].nombre;
    }
    if (worker.habilidades && worker.habilidades.length > 0) {
      return worker.habilidades[0].nombre;
    }
    return 'Trabajador Profesional';
  };

  // Manejar click en la tarjeta
  const handleCardClick = () => {
    if (onCardClick) {
      onCardClick(worker.id);
    }
  };

  return (
    <div className="worker-card" onClick={handleCardClick}>
      {/* Foto de portada como fondo */}
      <div 
        className="card-cover"
        style={{
          backgroundImage: worker.foto_portada 
            ? `url(${worker.foto_portada})` 
            : 'linear-gradient(135deg, #2540FF 0%, #1a2ecc 100%)'
        }}
      >
        {/* Overlay oscuro para mejorar legibilidad */}
        <div className="cover-overlay" />
        
        {/* Badge de verificaci√≥n */}
        {worker.verificado && (
          <div className="verified-badge" title="Trabajador Verificado">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="10" fill="#4CAF50"/>
              <path d="M9 12l2 2 4-4" stroke="white" strokeWidth="2" strokeLinecap="round"/>
            </svg>
          </div>
        )}
      </div>

      {/* Contenido de la tarjeta */}
      <div className="card-content">
        {/* Foto de perfil centrada */}
        <div className="profile-photo-container">
          <img 
            src={worker.foto_perfil || 'https://via.placeholder.com/100'} 
            alt={`${worker.nombre} ${worker.apellido}`}
            className="profile-photo"
          />
        </div>

        {/* Informaci√≥n del trabajador */}
        <div className="worker-info">
          {/* Nombre completo */}
          <h3 className="worker-name">
            {worker.nombre} {worker.apellido}
          </h3>

          {/* T√≠tulo/Profesi√≥n */}
          <p className="worker-title">
            {getWorkerTitle()}
          </p>

          {/* Ubicaci√≥n */}
          {(worker.departamento || worker.municipio) && (
            <div className="worker-location">
              <span className="location-icon">üìç</span>
              <span className="location-text">
                {worker.municipio || worker.departamento}
                {worker.municipio && worker.departamento && `, ${worker.departamento}`}
              </span>
            </div>
          )}

          {/* Descripci√≥n breve */}
          <p className="worker-description">
            {truncateText(worker.biografia)}
          </p>

          {/* Skills/Habilidades */}
          {worker.habilidades && worker.habilidades.length > 0 && (
            <div className="skills-container">
              {worker.habilidades.slice(0, 3).map((skill, index) => (
                <span key={skill.id || index} className="skill-badge">
                  {skill.nombre}
                </span>
              ))}
              {worker.habilidades.length > 3 && (
                <span className="skill-badge more">
                  +{worker.habilidades.length - 3}
                </span>
              )}
            </div>
          )}

          {/* Rating y estad√≠sticas */}
          <div className="card-footer">
            <div className="rating-section">
              <div className="stars">
                {renderStars(rating)}
              </div>
              <span className="rating-number">
                {rating.toFixed(1)}
              </span>
              <span className="review-count">
                ({reviewCount})
              </span>
            </div>

            {jobsCompleted > 0 && (
              <>
                <span className="separator">‚Ä¢</span>
                <div className="jobs-info">
                  <span className="jobs-count">
                    {jobsCompleted} trabajos
                  </span>
                </div>
              </>
            )}
          </div>
        </div>
      </div>

      {/* Bot√≥n hover para ver perfil */}
      <div className="card-hover-overlay">
        <button className="view-profile-btn">
          Ver Perfil Completo
        </button>
      </div>
    </div>
  );
};

export default WorkerCard;
```

## c:\Users\rexma\Desktop\chambing-website\src\services\serviceService.js
```
import api from './api';

export const serviceService = {
  // ‚úÖ Usar /services/categorias (como est√° en tu backend)
  async getCategories() {
    try {
      console.log('üîß serviceService: Obteniendo categor√≠as...');
      
      // ‚úÖ Tu backend tiene /services/categorias (no /categories)
      const response = await api.get('/services/categorias');
      console.log('üîß serviceService: Categor√≠as recibidas:', response.data);
      
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error obteniendo categor√≠as:', error);
      
      // Si falla, retornar array vac√≠o para no romper la UI
      if (error.response?.status === 404 || error.response?.status === 500) {
        console.log('üìù serviceService: Retornando array vac√≠o por error');
        return [];
      }
      
      throw error;
    }
  },

  async getCategoryById(id) {
    try {
      console.log('üîß serviceService: Obteniendo categor√≠a por ID:', id);
      const response = await api.get(`/services/categorias/${id}`);
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error obteniendo categor√≠a:', error);
      throw error;
    }
  },

  async getWorkersByCategory(categoryId) {
    try {
      console.log('üîß serviceService: Obteniendo trabajadores por categor√≠a:', categoryId);
      const response = await api.get(`/services/categorias/${categoryId}/trabajadores`);
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error obteniendo trabajadores:', error);
      throw error;
    }
  },

  async createCategory(categoryData) {
    try {
      console.log('üîß serviceService: Creando categor√≠a:', categoryData);
      const response = await api.post('/services/categorias', categoryData);
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error creando categor√≠a:', error);
      throw error;
    }
  },

  async updateCategory(id, categoryData) {
    try {
      console.log('üîß serviceService: Actualizando categor√≠a:', id, categoryData);
      const response = await api.patch(`/services/categorias/${id}`, categoryData);
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error actualizando categor√≠a:', error);
      throw error;
    }
  },

  async createTarifa(tarifaData) {
    try {
      console.log('üîß serviceService: Creando tarifa:', tarifaData);
      const response = await api.post('/services/tarifas', tarifaData);
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error creando tarifa:', error);
      throw error;
    }
  },

  async assignWorkerToCategory(assignmentData) {
    try {
      console.log('üîß serviceService: Asignando trabajador a categor√≠a:', assignmentData);
      const response = await api.post('/services/trabajadores/asignar', assignmentData);
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error asignando trabajador:', error);
      throw error;
    }
  },

  // ‚úÖ M√©todo de prueba para verificar conexi√≥n
  async testConnection() {
    try {
      console.log('üîß serviceService: Probando conexi√≥n...');
      const response = await api.get('/services/test');
      return response.data;
    } catch (error) {
      console.error('‚ùå serviceService: Error en prueba de conexi√≥n:', error);
      throw error;
    }
  }
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\workerService.js
```
const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000';

export const workerService = {
  /**
   * Obtiene trabajadores verificados con filtros
   */
  async getVerifiedWorkers(filters = {}) {
    try {
      // Construir query params
      const params = new URLSearchParams();
      
      if (filters.categoria) params.append('categoria', filters.categoria);
      if (filters.departamento) params.append('departamento', filters.departamento);
      if (filters.search) params.append('search', filters.search);
      if (filters.verificado !== undefined) params.append('verificado', filters.verificado);
      
      const queryString = params.toString();
      const url = `${API_BASE_URL}/users/workers${queryString ? `?${queryString}` : ''}`;
      
      console.log('Fetching workers from:', url);
      
      const response = await fetch(url, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
        },
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al cargar trabajadores');
      }

      const data = await response.json();
      return data;
    } catch (error) {
      console.error('Error fetching workers:', error);
      throw error;
    }
  },

  /**
   * Obtiene un trabajador espec√≠fico por ID
   */
  async getWorkerById(workerId) {
    try {
      const response = await fetch(`${API_BASE_URL}/users/public/${workerId}`, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
        },
      });

      if (!response.ok) {
        throw new Error('Error al cargar el trabajador');
      }

      return await response.json();
    } catch (error) {
      console.error('Error fetching worker:', error);
      throw error;
    }
  },

  /**
   * Obtiene las categor√≠as disponibles (puedes implementar esto en el backend)
   */
  async getCategories() {
    try {
      const response = await fetch(`${API_BASE_URL}/services/categorias`);
      
      if (!response.ok) {
        // Si el endpoint no existe, retornar categor√≠as por defecto
        return {
          status: 'success',
          data: [
            { id: '1', nombre: 'Construcci√≥n' },
            { id: '2', nombre: 'Limpieza' },
            { id: '3', nombre: 'Jardiner√≠a' },
            { id: '4', nombre: 'Plomer√≠a' },
            { id: '5', nombre: 'Electricidad' },
            { id: '6', nombre: 'Carpinter√≠a' },
          ]
        };
      }

      return await response.json();
    } catch (error) {
      console.error('Error fetching categories:', error);
      // Retornar categor√≠as por defecto en caso de error
      return {
        status: 'success',
        data: [
          { id: '1', nombre: 'Construcci√≥n' },
          { id: '2', nombre: 'Limpieza' },
          { id: '3', nombre: 'Jardiner√≠a' },
          { id: '4', nombre: 'Plomer√≠a' },
          { id: '5', nombre: 'Electricidad' },
          { id: '6', nombre: 'Carpinter√≠a' },
        ]
      };
    }
  }
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\publicProfileService.js
```
import api from './api';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api';

export const publicProfileService = {
  /**
   * Obtiene el perfil p√∫blico de un usuario por su ID
   * Este endpoint deber√≠a ser p√∫blico (sin autenticaci√≥n requerida)
   */
  async getPublicProfile(userId) {
    try {
      // Usamos fetch directamente para endpoints p√∫blicos (sin token)
      const response = await fetch(`${API_BASE_URL}/users/public/${userId}`, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
        },
      });

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al cargar el perfil');
      }

      return await response.json();
    } catch (error) {
      console.error('Error fetching public profile:', error);
      throw error;sss
    }
  },

  /**
   * Obtiene las habilidades de un trabajador
   */
  async getUserSkills(userId) {
    try {
      const response = await fetch(`${API_BASE_URL}/users/${userId}/skills`);
      
      if (!response.ok) {
        throw new Error('Error al cargar habilidades');
      }

      return await response.json();
    } catch (error) {
      console.error('Error fetching user skills:', error);
      throw error;
    }
  },

  /**
   * Obtiene las rese√±as de un trabajador
   */
  async getUserReviews(userId) {
    try {
      const response = await fetch(`${API_BASE_URL}/users/${userId}/reviews`);
      
      if (!response.ok) {
        throw new Error('Error al cargar rese√±as');
      }

      return await response.json();
    } catch (error) {
      console.error('Error fetching user reviews:', error);
      throw error;
    }
  },

  /**
   * Obtiene estad√≠sticas del trabajador (trabajos completados, rating, etc.)
   */
  async getUserStats(userId) {
    try {
      const response = await fetch(`${API_BASE_URL}/users/${userId}/stats`);
      
      if (!response.ok) {
        throw new Error('Error al cargar estad√≠sticas');
      }

      return await response.json();
    } catch (error) {
      console.error('Error fetching user stats:', error);
      throw error;
    }
  },
};
```

## c:\Users\rexma\Desktop\chambing-website\vite.config.js
```
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
     host: '0.0.0.0',
    port: 5173,
    proxy: {
      '/api': {
        target: 'http://localhost:3000', 
        changeOrigin: true,
        secure: false,
        rewrite: (path) => path.replace(/^\/api/, '') // Quita /api del path
      }
    }
  },
  css: {
    preprocessorOptions: {
      scss: {}
    }
  }
})
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\Home.jsx
```
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useTranslations } from '../hooks/useTranslations';
import {
  Box,
  Container,
  Typography,
  Button,
  Grid,
  Card,
  CardContent,
  CardActions,
  Avatar,
  Chip,
  Paper,
  useTheme,
  useMediaQuery,
  Rating,
  TextField,
  InputAdornment,
} from '@mui/material';
import {
  Home as HomeIcon,
  Build,
  CleaningServices,
  Plumbing,
  ElectricalServices,
  Handyman,
  Star,
  CheckCircle,
  Security,
  Schedule,
  Payment,
  Search,
  LocationOn,
} from '@mui/icons-material';
import { useAuth } from '../context/AuthContext';
import { serviceService } from '../services/serviceService';
import heroManImage from '../assets/images/heroman.png';
import '../styles/home.scss';

const Home = () => {
  const { t, translateService, common } = useTranslations();
  const { isAuthenticated } = useAuth();
  const navigate = useNavigate();
  const theme = useTheme();
  const isMobile = useMediaQuery(theme.breakpoints.down('md'));
  const [categories, setCategories] = useState([]);
  const [searchQuery, setSearchQuery] = useState('');

  useEffect(() => {
    const loadCategories = async () => {
      try {
        console.log('üîÑ Intentando cargar categor√≠as...');
        const data = await serviceService.getCategories();
        setCategories(data.slice(0, 6));
        console.log('‚úÖ Categor√≠as cargadas:', data.length);
      } catch (error) {
        console.error('‚ùå Error loading categories:', error);
        console.log('üìù Usando datos mock por error de conexi√≥n');
        setCategories([
          { id: 1, nombre: 'domesticCleaning', descripcion: 'domesticCleaning', icono: 'cleaning' },
          { id: 2, nombre: 'plumbing', descripcion: 'plumbing', icono: 'plumbing' },
          { id: 3, nombre: 'electricity', descripcion: 'electricity', icono: 'electrical' },
          { id: 4, nombre: 'carpentry', descripcion: 'carpentry', icono: 'carpenter' },
          { id: 5, nombre: 'gardening', descripcion: 'gardening', icono: 'garden' },
          { id: 6, nombre: 'construction', descripcion: 'construction', icono: 'build' },
        ]);
      }
    };

    loadCategories();
  }, []);

  const getServiceIcon = (iconName) => {
    const icons = {
      cleaning: <CleaningServices />,
      plumbing: <Plumbing />,
      electrical: <ElectricalServices />,
      carpenter: <Handyman />,
      garden: <HomeIcon />,
      build: <Build />,
    };
    return icons[iconName] || <Build />;
  };

  const handleSearch = (e) => {
    e.preventDefault();
    if (searchQuery.trim()) {
      navigate(`/search?q=${encodeURIComponent(searchQuery.trim())}`);
    }
  };

  // Caracter√≠sticas traducidas din√°micamente
  const features = [
    {
      icon: <Security color="primary" />,
      title: t('home.features.verifiedWorkers.title'),
      description: t('home.features.verifiedWorkers.description'),
    },
    {
      icon: <Schedule color="primary" />,
      title: t('home.features.availability.title'),
      description: t('home.features.availability.description'),
    },
    {
      icon: <Payment color="primary" />,
      title: t('home.features.securePayments.title'),
      description: t('home.features.securePayments.description'),
    },
  ];

  // Testimonios traducidos din√°micamente
  const testimonials = [
    {
      name: 'Mar√≠a Gonz√°lez',
      rating: 5,
      comment: t('testimonials.maria'),
      service: translateService('domesticCleaning'),
    },
    {
      name: 'Carlos Mart√≠nez',
      rating: 5,
      comment: t('testimonials.carlos'),
      service: translateService('plumbing'),
    },
    {
      name: 'Ana Rodr√≠guez',
      rating: 4,
      comment: t('testimonials.ana'),
      service: translateService('gardening'),
    },
  ];

  return (
    <Box>
      {/* Hero Section Renovada */}
      <section className="hero-section">
        <Container maxWidth="xl" className="hero-container">
          <div className="hero-content">
            <div className="hero-positioning">
            <div className="hero-left">
              <Typography
                variant="h1"
                component="h1"
                className="hero-title"
              >
                {t('home.hero.title')}
              </Typography>
              
              {/* L√≠nea decorativa */}
              <div className="hero-divider"></div>
              
              <Typography
                variant="h5"
                className="hero-subtitle"
              >
                {t('home.hero.subtitle')}
              </Typography>
              
              {/* Botones de Acci√≥n */}
              <div className="hero-actions">
                {isAuthenticated ? (
                  <Button
                    variant="contained"
                    size="large"
                    onClick={() => navigate('/dashboard')}
                    className="hero-btn hero-btn-primary"
                  >
                    {t('home.hero.dashboard')}
                  </Button>
                ) : (
                  <>
                    <Button
                      variant="contained"
                      size="large"
                      onClick={() => navigate('/register')}
                      className="hero-btn hero-btn-primary"
                    >
                      {t('home.hero.startNow')}
                    </Button>
                    <Button
                      variant="outlined"
                      size="large"
                      onClick={() => navigate('/login')}
                      className="hero-btn hero-btn-secondary"
                    >
                      {t('home.hero.login')}
                    </Button>
                  </>
                )}
              </div>
              </div>
            </div>

            {/* Imagen del profesional (sin fondo) */}
            <div className="hero-image-container">
              <img 
                src={heroManImage} 
                alt="Professional worker" 
                className="hero-image"
              />
              {/* Efectos decorativos para la imagen sin fondo */}
              <div className="hero-image-glow"></div>
              <div className="hero-image-glow-rings"></div>
  <div className="hero-energy-particles"></div>
  <div className="hero-extra-particles"></div>
  <div className="hero-light-rays"></div>
  
  {/* Efecto de puntos existente */}
  <div className="hero-image-dots"></div>
              <div className="hero-image-dots"></div>
            </div>
          </div>

          {/* Barra de B√∫squeda Fija a lo largo del Hero */}
          <div className="hero-search-section">
            <div className="hero-search-container">
              <form onSubmit={handleSearch} className="hero-search-form">
                <TextField
                  fullWidth
                  placeholder="¬øQu√© servicio necesitas? Ej: limpieza, plomer√≠a, electricista..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="hero-search-input"
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Search className="search-icon" />
                      </InputAdornment>
                    ),
                    endAdornment: (
                      <InputAdornment position="end">
                        <Button 
                          type="submit"
                          variant="contained"
                          className="search-btn"
                          disabled={!searchQuery.trim()}
                        >
                          Buscar Ahora
                        </Button>
                      </InputAdornment>
                    ),
                  }}
                />
              </form>
              
              {/* Sugerencias Populares Elegantes */}
              <div className="popular-searches">
                <div className="popular-searches-header">
                  <Typography variant="caption" className="popular-label">
                    M√°s solicitados:
                  </Typography>
                  <Typography variant="caption" className="popular-stats">
                    +2,500 servicios completados este mes
                  </Typography>
                </div>
                <div className="popular-tags">
                  <Chip 
                    label="Limpieza Dom√©stica" 
                    size="medium" 
                    className="popular-tag trending"
                    onClick={() => setSearchQuery('Limpieza dom√©stica')}
                  />
                  <Chip 
                    label="Plomer√≠a 24/7" 
                    size="medium" 
                    className="popular-tag urgent"
                    onClick={() => setSearchQuery('Plomer√≠a')}
                  />
                  <Chip 
                    label="Electricista" 
                    size="medium" 
                    className="popular-tag popular"
                    onClick={() => setSearchQuery('Electricista')}
                  />
                  <Chip 
                    label="Jardiner√≠a" 
                    size="medium" 
                    className="popular-tag seasonal"
                    onClick={() => setSearchQuery('Jardiner√≠a')}
                  />
                  <Chip 
                    label="Carpinter√≠a" 
                    size="medium" 
                    className="popular-tag"
                    onClick={() => setSearchQuery('Carpinter√≠a')}
                  />
                  <Chip 
                    label="Construcci√≥n" 
                    size="medium" 
                    className="popular-tag"
                    onClick={() => setSearchQuery('Construcci√≥n')}
                  />
                </div>
              </div>
            </div>
          </div>
        </Container>
      </section>

      {/* Services Section */}
      <Container maxWidth="lg" sx={{ py: 8 }}>
        <Typography variant="h3" textAlign="center" gutterBottom>
          {t('home.services.title')}
        </Typography>
        <Typography
          variant="h6"
          textAlign="center"
          color="text.secondary"
          sx={{ mb: 6 }}
        >
          {t('home.services.subtitle')}
        </Typography>
        
        <Grid container spacing={4}>
          {categories.map((category) => (
            <Grid key={category.id} size={{ xs: 12, sm: 6, md: 4 }}>
              <Card
                sx={{
                  height: '100%',
                  transition: 'transform 0.2s',
                  '&:hover': { transform: 'translateY(-4px)' },
                }}
              >
                <CardContent sx={{ textAlign: 'center', pt: 3 }}>
                  <Avatar
                    sx={{
                      bgcolor: 'primary.main',
                      width: 64,
                      height: 64,
                      mx: 'auto',
                      mb: 2,
                    }}
                  >
                    {getServiceIcon(category.icono)}
                  </Avatar>
                  <Typography variant="h6" gutterBottom>
                    {translateService(category.nombre)}
                  </Typography>
                  <Typography variant="body2" color="text.secondary">
                    {t(`services.descriptions.${category.descripcion}`, category.descripcion)}
                  </Typography>
                </CardContent>
                <CardActions sx={{ justifyContent: 'center', pb: 3 }}>
                  <Button size="small" variant="outlined">
                    {t('home.services.viewProfessionals')}
                  </Button>
                </CardActions>
              </Card>
            </Grid>
          ))}
        </Grid>
      </Container>

      {/* Features Section */}
      <Box sx={{ bgcolor: 'grey.50', py: 8 }}>
        <Container maxWidth="lg">
          <Typography variant="h3" textAlign="center" gutterBottom>
            {t('home.features.title')}
          </Typography>
          <Grid container spacing={4} sx={{ mt: 4 }}>
            {features.map((feature, index) => (
              <Grid key={index} size={{ xs: 12, md: 4 }}>
                <Box textAlign="center">
                  <Avatar
                    sx={{
                      bgcolor: 'primary.light',
                      width: 80,
                      height: 80,
                      mx: 'auto',
                      mb: 2,
                    }}
                  >
                    {feature.icon}
                  </Avatar>
                  <Typography variant="h5" gutterBottom>
                    {feature.title}
                  </Typography>
                  <Typography variant="body1" color="text.secondary">
                    {feature.description}
                  </Typography>
                </Box>
              </Grid>
            ))}
          </Grid>
        </Container>
      </Box>

      {/* Testimonials Section */}
      <Container maxWidth="lg" sx={{ py: 8 }}>
        <Typography variant="h3" textAlign="center" gutterBottom>
          {t('home.testimonials.title')}
        </Typography>
        <Grid container spacing={4} sx={{ mt: 4 }}>
          {testimonials.map((testimonial, index) => (
            <Grid key={index} size={{ xs: 12, md: 4 }}>
              <Card sx={{ height: '100%' }}>
                <CardContent>
                  <Box display="flex" alignItems="center" mb={2}>
                    <Avatar sx={{ mr: 2 }}>
                      {testimonial.name.charAt(0)}
                    </Avatar>
                    <Box>
                      <Typography variant="h6">{testimonial.name}</Typography>
                      <Chip label={testimonial.service} size="small" />
                    </Box>
                  </Box>
                  <Rating value={testimonial.rating} readOnly sx={{ mb: 2 }} />
                  <Typography variant="body2">"{testimonial.comment}"</Typography>
                </CardContent>
              </Card>
            </Grid>
          ))}
        </Grid>
      </Container>

      {/* CTA Section */}
      <Paper
        sx={{
          bgcolor: 'primary.main',
          color: 'white',
          py: 8,
          textAlign: 'center',
        }}
      >
        <Container maxWidth="md">
          <Typography variant="h3" gutterBottom>
            {t('home.cta.title')}
          </Typography>
          <Typography variant="h6" sx={{ mb: 4, opacity: 0.9 }}>
            {t('home.cta.subtitle')}
          </Typography>
          {!isAuthenticated && (
            <Button
              variant="contained"
              size="large"
              onClick={() => navigate('/register')}
              sx={{
                bgcolor: 'white',
                color: 'primary.main',
                '&:hover': { bgcolor: 'grey.100' },
              }}
            >
              {t('home.cta.createAccount')}
            </Button>
          )}
        </Container>
      </Paper>

      {/* Debug Info */}
      <Box sx={{ bgcolor: 'info.light', p: 2, mt: 4 }}>
        <Container maxWidth="lg">
          <Typography variant="subtitle2" gutterBottom>
            üîß {t('common.debugInfo')}:
          </Typography>
          <Typography variant="caption" component="div">
            ‚Ä¢ API URL configurada: {import.meta.env.VITE_API_URL || 'http://localhost:3000/api'}<br/>
            ‚Ä¢ Categor√≠as cargadas: {categories.length}<br/>
            ‚Ä¢ Backend esperado en: {import.meta.env.VITE_API_URL || 'http://localhost:3000/api'}
          </Typography>
        </Container>
      </Box>
    </Box>
  );
};

export default Home;
```

## c:\Users\rexma\Desktop\chambing-website\src\theme\muiTheme.js
```
// src/theme/muiTheme.js - ARCHIVO FALTANTE
import { createTheme } from '@mui/material/styles';

export const theme = createTheme({
  palette: {
    primary: {
      main: '#2563eb',
      light: '#3b82f6',
      dark: '#1d4ed8',
      contrastText: '#ffffff',
    },
    secondary: {
      main: '#64748b',
      light: '#94a3b8',
      dark: '#475569',
      contrastText: '#ffffff',
    },
    success: {
      main: '#10b981',
      light: '#34d399',
      dark: '#047857',
    },
    warning: {
      main: '#f59e0b',
      light: '#fbbf24',
      dark: '#d97706',
    },
    error: {
      main: '#ef4444',
      light: '#f87171',
      dark: '#dc2626',
    },
    info: {
      main: '#3b82f6',
      light: '#60a5fa',
      dark: '#2563eb',
    },
    background: {
      default: '#f8fafc',
      paper: '#ffffff',
    },
    text: {
      primary: '#1e293b',
      secondary: '#64748b',
    },
    grey: {
      50: '#f8fafc',
      100: '#f1f5f9',
      200: '#e2e8f0',
      300: '#cbd5e1',
      400: '#94a3b8',
      500: '#64748b',
      600: '#475569',
      700: '#334155',
      800: '#1e293b',
      900: '#0f172a',
    },
  },
  typography: {
    fontFamily: '"Roboto", "Helvetica", "Arial", sans-serif',
    h1: {
      fontSize: '2.5rem',
      fontWeight: 700,
      lineHeight: 1.2,
    },
    h2: {
      fontSize: '2rem',
      fontWeight: 600,
      lineHeight: 1.3,
    },
    h3: {
      fontSize: '1.75rem',
      fontWeight: 600,
      lineHeight: 1.3,
    },
    h4: {
      fontSize: '1.5rem',
      fontWeight: 500,
      lineHeight: 1.4,
    },
    h5: {
      fontSize: '1.25rem',
      fontWeight: 500,
      lineHeight: 1.4,
    },
    h6: {
      fontSize: '1rem',
      fontWeight: 500,
      lineHeight: 1.5,
    },
    body1: {
      fontSize: '1rem',
      lineHeight: 1.6,
    },
    body2: {
      fontSize: '0.875rem',
      lineHeight: 1.5,
    },
    button: {
      textTransform: 'none',
      fontWeight: 500,
    },
  },
  shape: {
    borderRadius: 8,
  },
  spacing: 8,
  components: {
    MuiButton: {
      styleOverrides: {
        root: {
          textTransform: 'none',
          borderRadius: '8px',
          fontSize: '1rem',
          fontWeight: 500,
          padding: '8px 16px',
          transition: 'all 0.2s ease-in-out',
          '&:hover': {
            transform: 'translateY(-1px)',
            boxShadow: '0 4px 8px rgba(0, 0, 0, 0.12)',
          },
        },
        containedPrimary: {
          background: 'linear-gradient(45deg, #2563eb 30%, #3b82f6 90%)',
          boxShadow: '0 2px 4px rgba(37, 99, 235, 0.3)',
        },
        sizeLarge: {
          padding: '12px 24px',
          fontSize: '1.1rem',
        },
      },
    },
    MuiTextField: {
      styleOverrides: {
        root: {
          '& .MuiOutlinedInput-root': {
            borderRadius: '8px',
            transition: 'all 0.2s ease-in-out',
            '&:hover': {
              '& .MuiOutlinedInput-notchedOutline': {
                borderColor: '#3b82f6',
              },
            },
            '&.Mui-focused': {
              '& .MuiOutlinedInput-notchedOutline': {
                borderColor: '#2563eb',
                borderWidth: 2,
              },
            },
          },
        },
      },
    },
    MuiCard: {
      styleOverrides: {
        root: {
          borderRadius: '12px',
          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
          transition: 'all 0.3s ease-in-out',
          border: '1px solid rgba(0, 0, 0, 0.05)',
          '&:hover': {
            boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
            transform: 'translateY(-2px)',
          },
        },
      },
    },
    MuiAppBar: {
      styleOverrides: {
        root: {
          boxShadow: '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)',
          backgroundColor: '#ffffff',
          color: '#1e293b',
        },
      },
    },
    MuiChip: {
      styleOverrides: {
        root: {
          borderRadius: '6px',
          fontWeight: 500,
        },
        colorPrimary: {
          backgroundColor: '#dbeafe',
          color: '#1d4ed8',
        },
        colorSecondary: {
          backgroundColor: '#f1f5f9',
          color: '#475569',
        },
      },
    },
    MuiAlert: {
      styleOverrides: {
        root: {
          borderRadius: '8px',
          border: '1px solid',
        },
        standardSuccess: {
          backgroundColor: '#f0fdf4',
          borderColor: '#22c55e',
          color: '#166534',
        },
        standardError: {
          backgroundColor: '#fef2f2',
          borderColor: '#ef4444',
          color: '#dc2626',
        },
        standardWarning: {
          backgroundColor: '#fffbeb',
          borderColor: '#f59e0b',
          color: '#d97706',
        },
        standardInfo: {
          backgroundColor: '#eff6ff',
          borderColor: '#3b82f6',
          color: '#2563eb',
        },
      },
    },
    MuiAvatar: {
      styleOverrides: {
        root: {
          backgroundColor: '#3b82f6',
          fontWeight: 600,
        },
      },
    },
    MuiDrawer: {
      styleOverrides: {
        paper: {
          borderRadius: '0 12px 12px 0',
          border: 'none',
          boxShadow: '0 20px 25px -5px rgba(0, 0, 0, 0.1)',
        },
      },
    },
    MuiMenu: {
      styleOverrides: {
        paper: {
          borderRadius: '8px',
          boxShadow: '0 10px 15px -3px rgba(0, 0, 0, 0.1)',
          border: '1px solid rgba(0, 0, 0, 0.05)',
        },
      },
    },
    MuiSnackbar: {
      styleOverrides: {
        root: {
          '& .MuiAlert-root': {
            borderRadius: '8px',
          },
        },
      },
    },
  },
  breakpoints: {
    values: {
      xs: 0,
      sm: 600,
      md: 900,
      lg: 1200,
      xl: 1536,
    },
  },
});

// Tema oscuro (para futuro uso)
export const darkTheme = createTheme({
  ...theme,
  palette: {
    mode: 'dark',
    primary: {
      main: '#3b82f6',
      light: '#60a5fa',
      dark: '#2563eb',
    },
    background: {
      default: '#0f172a',
      paper: '#1e293b',
    },
    text: {
      primary: '#f8fafc',
      secondary: '#cbd5e1',
    },
  },
});

export default theme;
```

## c:\Users\rexma\Desktop\chambing-website\src\services\authService.js
```
import api from './api';

export const authService = {
  async login(credentials) {
    try {
      console.log('üîß authService: Enviando petici√≥n login...', credentials);
      const response = await api.post('/auth/login', credentials);
      console.log('üîß authService: Respuesta recibida:', response.data);
      
      // ‚úÖ Usar los nombres correctos que retorna el backend
      const { accessToken, refreshToken, user } = response.data;

      // Guardar tokens y usuario en localStorage
      localStorage.setItem('token', accessToken);           // ‚úÖ accessToken del backend
      localStorage.setItem('refresh_token', refreshToken);  // ‚úÖ refreshToken del backend
      
      // Guardar usuario solo si existe en la respuesta
      if (user) {
        localStorage.setItem('user', JSON.stringify(user));
      }

     
      return {
        access_token: accessToken,  
        refresh_token: refreshToken,
        user: user
      };
    } catch (error) {
      console.error('‚ùå authService: Error en login:', error.response?.data || error);
      throw error;
    }
  },

  async register(userData) {
    try {
      console.log('üîß authService: Enviando petici√≥n registro...', userData);
     const response = await api.post('/users/register', userData);
      console.log('üîß authService: Respuesta registro:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå authService: Error en registro:', error.response?.data || error);
      throw error;
    }
  },

  async logout() {
    try {
      console.log('üîß authService: Enviando petici√≥n logout...');
      await api.post('/auth/logout');
    } catch (error) {
      console.error('‚ùå authService: Error en logout:', error.response?.data || error);
    }
    
    // Limpiar localStorage siempre
    localStorage.removeItem('token');
    localStorage.removeItem('refresh_token');
    localStorage.removeItem('user');
    window.location.href = '/login';
  },

  async refresh_token() {
    try {
      const refresh_token = localStorage.getItem('refresh_token');
      console.log('üîß authService: Refrescando token...');
      
      if (!refresh_token) {
        throw new Error('No hay refresh token disponible');
      }

      const response = await api.post('/auth/refresh', { 
        refreshToken: refresh_token  
      });
      
      const { accessToken } = response.data;  
      
      localStorage.setItem('token', accessToken);
      console.log('‚úÖ authService: Token refrescado exitosamente');
      return accessToken;
    } catch (error) {
      console.error('‚ùå authService: Error refrescando token:', error);
      this.logout();
      throw error;
    }
  },

  getCurrentUser() {
    const user = localStorage.getItem('user');
    return user ? JSON.parse(user) : null;
  },

  isAuthenticated() {
    return !!localStorage.getItem('token');
  },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\userService.js
```
import { get } from 'react-hook-form';
import api from './api';

export const userService = {
    async getProfile(){
        const response = await api.get('/user/profile');
        return response.data;
    },

    async updateProfile(userData){
        const response = await api.put('/user/profile', userData);
        return response.data;
    },

    async uploadProfilePhoto(file){
        const formData = new FormData();
        formData.append('photo', file);

        const respontse = await api.post('/user/profile/photo', formData, {
            headers: {
                'Content-Type': 'multipart/form-data'
            }
        });

        return respontse.data;
    },
    async getUsers(params = {}) {
        const response = await api.get('/user', { params });
        return response.data;
    },
    async getUserById(userId) {
        const response = await api.get(`/user/${id}`);
        return response.data;
    },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\contractService.js
```
import api from './api';

export const contractService = {
  // ========== OBTENER CONTRATOS ==========
  
  /**
   * Obtiene todos los contratos del usuario autenticado
   */
  async getMyContracts(rol = null, estado = null) {
    try {
      console.log('üîß Obteniendo mis contratos...');
      
      let url = '/contracts/mis-contratos';
      const params = [];
      
      if (rol) params.push(`rol=${rol}`); // 'empleador' o 'trabajador'
      if (estado) params.push(`estado=${estado}`);
      
      if (params.length > 0) {
        url += '?' + params.join('&');
      }
      
      const response = await api.get(url);
      console.log('‚úÖ Contratos recibidos:', response.data);
      
      return response.data;
    } catch (error) {
      console.error('‚ùå Error obteniendo contratos:', error);
      
      if (error.response?.status === 404 || error.response?.status === 401) {
        return { status: 'success', data: [], count: 0 };
      }
      
      throw error;
    }
  },

  /**
   * Obtiene un contrato por ID
   */
  async getContractById(id) {
    try {
      console.log('üîß Obteniendo contrato:', id);
      const response = await api.get(`/contracts/${id}`);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error obteniendo contrato:', error);
      throw error;
    }
  },

  /**
   * Busca un contrato por su c√≥digo
   */
  async getContractByCode(codigo) {
    try {
      console.log('üîß Buscando contrato por c√≥digo:', codigo);
      const response = await api.get(`/contracts/codigo/${codigo}`);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error buscando contrato:', error);
      throw error;
    }
  },

  // ========== CREAR CONTRATO ==========
  
  /**
   * Crea un nuevo contrato
   */
  async createContract(contractData) {
    try {
      console.log('üîß Creando contrato:', contractData);
      const response = await api.post('/contracts', contractData);
      console.log('‚úÖ Contrato creado:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error creando contrato:', error);
      throw error;
    }
  },

  // ========== ACTIVAR CONTRATO (PIN o QR) ==========
  
  /**
   * Activa un contrato usando PIN
   */
  async activarContratoConPIN(codigoContrato, pin) {
    try {
      console.log('üîß Activando contrato con PIN:', codigoContrato);
      const response = await api.post('/contracts/activar', {
        metodoActivacion: 'pin',
        codigoContrato,
        pin
      });
      console.log('‚úÖ Contrato activado:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error activando contrato:', error);
      throw error;
    }
  },

  /**
   * Activa un contrato usando QR code
   */
  async activarContratoConQR(qrData) {
    try {
      console.log('üîß Activando contrato con QR');
      const response = await api.post('/contracts/activar', {
        metodoActivacion: 'qr',
        qrData
      });
      console.log('‚úÖ Contrato activado:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error activando contrato con QR:', error);
      throw error;
    }
  },

  // ========== COMPLETAR CONTRATO ==========
  
  /**
   * Marca el contrato como completado (solo trabajador)
   */
  async completarContrato(contratoId, notas = '') {
    try {
      console.log('üîß Completando contrato:', contratoId);
      const response = await api.patch(`/contracts/${contratoId}/completar`, {
        notas
      });
      console.log('‚úÖ Contrato completado:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error completando contrato:', error);
      throw error;
    }
  },

  // ========== CERRAR CONTRATO (LIBERAR PAGO) ==========
  
  /**
   * Cierra el contrato y libera el pago (solo empleador)
   */
  async cerrarContrato(contratoId, notas = '') {
    try {
      console.log('üîß Cerrando contrato:', contratoId);
      const response = await api.patch(`/contracts/${contratoId}/cerrar`, {
        notas
      });
      console.log('‚úÖ Contrato cerrado:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error cerrando contrato:', error);
      throw error;
    }
  },

  // ========== CANCELAR CONTRATO ==========
  
  /**
   * Cancela el contrato
   */
  async cancelarContrato(contratoId, motivo) {
    try {
      console.log('üîß Cancelando contrato:', contratoId);
      const response = await api.patch(`/contracts/${contratoId}/cancelar`, {
        motivo
      });
      console.log('‚úÖ Contrato cancelado:', response.data);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error cancelando contrato:', error);
      throw error;
    }
  },

  // ========== HISTORIAL ==========
  
  /**
   * Obtiene el historial de cambios de estado
   */
  async getHistorial(contratoId) {
    try {
      console.log('üîß Obteniendo historial:', contratoId);
      const response = await api.get(`/contracts/${contratoId}/historial`);
      return response.data;
    } catch (error) {
      console.error('‚ùå Error obteniendo historial:', error);
      throw error;
    }
  }
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\paymentsService.js
```
import api from './api';

export const paymentsService = {
    async createPayment(data) {
        const response = await api.post('/payments', data);
        return response.data;
    },
    async getPaymentHistory(params = {}) {
        const response = await api.get('/payments/history', { params });
        return response.data;
    },

    async getWorkerBalance() {
        const response = await api.get('/payments/balance');
        return response.data;
    },

    async processWompiPayment(data) {
        const response = await api.post('/payments/wompi/process', data);
        return response.data;
    },
    async getPaymentById(id) {
        const response = await api.get(`/payments/${id}`);
        return response.data;
    },

    async confirmPayment(id) {
        const response = await api.post(`/payments/${id}/confirm`);
        return response.data;
    },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\main.jsx
```
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'
import './styles/globals.scss'
import './i18n/config'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

## c:\Users\rexma\Desktop\chambing-website\src\components\common\LanguageSelector.jsx
```
import React, { useState } from 'react';
import { useTranslation } from 'react-i18next';
import {
  IconButton,
  Menu,
  MenuItem,
  ListItemIcon,
  ListItemText,
  Tooltip,
  Box,
  Typography,
} from '@mui/material';
import {
  Language as LanguageIcon,
  Check as CheckIcon,
} from '@mui/icons-material';
import { changeLanguage, getCurrentLanguage } from '../../i18n/config';

const LanguageSelector = ({ 
  variant = 'icon', // 'icon' o 'button'
  color = 'inherit',
  size = 'medium'
}) => {
  const { t } = useTranslation();
  const [anchorEl, setAnchorEl] = useState(null);
  const [isChanging, setIsChanging] = useState(false);
  
  const currentLanguage = getCurrentLanguage();

  // Informaci√≥n de los idiomas
  const languages = {
    es: { name: 'Espa√±ol', nativeName: 'Espa√±ol', flag: 'üá™üá∏' },
    en: { name: 'English', nativeName: 'English', flag: 'üá∫üá∏' },
    fr: { name: 'Fran√ßais', nativeName: 'Fran√ßais', flag: 'üá´üá∑' },
  };

  const handleClick = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleClose = () => {
    setAnchorEl(null);
  };

  const handleLanguageChange = async (lng) => {
    if (lng === currentLanguage || isChanging) return;
    
    setIsChanging(true);
    
    try {
      console.log(`üåê LanguageSelector: Cambiando a ${lng}`);
      await changeLanguage(lng);
      
      // Peque√±a pausa para mostrar feedback visual
      setTimeout(() => {
        setIsChanging(false);
        handleClose();
      }, 300);
      
    } catch (error) {
      console.error('‚ùå Error changing language:', error);
      setIsChanging(false);
    }
  };

  const getCurrentLanguageInfo = () => {
    return languages[currentLanguage] || languages.es;
  };

  const renderTrigger = () => {
    const currentLangInfo = getCurrentLanguageInfo();
    
    if (variant === 'button') {
      return (
        <Box
          onClick={handleClick}
          sx={{
            display: 'flex',
            alignItems: 'center',
            gap: 1,
            cursor: 'pointer',
            padding: '8px 12px',
            borderRadius: 1,
            transition: 'background-color 0.2s',
            '&:hover': {
              backgroundColor: 'action.hover',
            },
          }}
        >
          <Typography component="span" sx={{ fontSize: '1.2em' }}>
            {currentLangInfo.flag}
          </Typography>
          <Typography variant="body2" sx={{ fontWeight: 500 }}>
            {currentLangInfo.nativeName}
          </Typography>
        </Box>
      );
    }
    
    // Variant 'icon' (default)
    return (
      <Tooltip title={`${t('common.language')}: ${currentLangInfo.name}`}>
        <IconButton
          onClick={handleClick}
          size={size}
          color={color}
          disabled={isChanging}
          sx={{
            position: 'relative',
            transition: 'all 0.3s ease',
            '&:hover': {
              transform: 'scale(1.05)',
            },
          }}
        >
          <LanguageIcon />
          {/* Badge con la bandera del idioma actual */}
          <Box
            sx={{
              position: 'absolute',
              top: -2,
              right: -2,
              width: 16,
              height: 16,
              borderRadius: '50%',
              backgroundColor: 'background.paper',
              border: '1px solid',
              borderColor: 'divider',
              display: 'flex',
              alignItems: 'center',
              justifyContent: 'center',
              fontSize: '0.6em',
            }}
          >
            {currentLangInfo.flag}
          </Box>
        </IconButton>
      </Tooltip>
    );
  };

  return (
    <>
      {renderTrigger()}
      
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleClose}
        anchorOrigin={{
          vertical: 'bottom',
          horizontal: 'right',
        }}
        transformOrigin={{
          vertical: 'top',
          horizontal: 'right',
        }}
        PaperProps={{
          elevation: 8,
          sx: {
            mt: 1,
            minWidth: 160,
            borderRadius: 2,
            '& .MuiMenuItem-root': {
              borderRadius: 1,
              margin: '2px 8px',
              transition: 'all 0.2s',
            },
          },
        }}
      >
        {Object.entries(languages).map(([lng, info]) => (
          <MenuItem
            key={lng}
            onClick={() => handleLanguageChange(lng)}
            selected={lng === currentLanguage}
            disabled={isChanging}
            sx={{
              display: 'flex',
              alignItems: 'center',
              gap: 1.5,
              py: 1,
              '&.Mui-selected': {
                backgroundColor: 'primary.light',
                color: 'primary.main',
                '&:hover': {
                  backgroundColor: 'primary.light',
                },
              },
            }}
          >
            <ListItemIcon sx={{ minWidth: 'auto' }}>
              <Typography component="span" sx={{ fontSize: '1.2em' }}>
                {info.flag}
              </Typography>
            </ListItemIcon>
            
            <ListItemText>
              <Typography variant="body2" sx={{ fontWeight: 500 }}>
                {info.nativeName}
              </Typography>
            </ListItemText>
            
            {lng === currentLanguage && (
              <CheckIcon 
                color="primary" 
                sx={{ 
                  fontSize: '1.1em',
                  ml: 1 
                }} 
              />
            )}
          </MenuItem>
        ))}
        
        {/* Footer del men√∫ */}
        <Box sx={{ px: 2, py: 1, borderTop: '1px solid', borderColor: 'divider', mt: 1 }}>
          <Typography variant="caption" color="text.secondary" align="center">
            {isChanging ? (
              'üîÑ Cambiando...'
            ) : (
              `üí° ${getCurrentLanguageInfo().nativeName}`
            )}
          </Typography>
        </Box>
      </Menu>
    </>
  );
};

export default LanguageSelector;
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useTranslations.js
```
import { useTranslation } from 'react-i18next';
import { 
  changeLanguage, 
  getCurrentLanguage 
} from '../i18n/config';

/**
 * Hook personalizado para manejar traducciones en ChambingApp
 * Proporciona funciones adicionales y shortcuts para operaciones comunes
 */
export const useTranslations = () => {
  const { t, i18n, ready } = useTranslation();

  // Shortcuts para traducciones comunes
  const common = {
    loading: t('common.loading'),
    error: t('common.error'),
    success: t('common.success'),
    cancel: t('common.cancel'),
    confirm: t('common.confirm'),
    save: t('common.save'),
    edit: t('common.edit'),
    delete: t('common.delete'),
    search: t('common.search'),
    back: t('common.back'),
    next: t('common.next'),
    previous: t('common.previous'),
    close: t('common.close'),
    language: t('common.language'),
  };

  const nav = {
    home: t('nav.home'),
    services: t('nav.services'),
    dashboard: t('nav.dashboard'),
    profile: t('nav.profile'),
    login: t('nav.login'),
    register: t('nav.register'),
    logout: t('nav.logout'),
  };

  // Funci√≥n para traducir nombres de servicios
  const translateService = (serviceKey) => {
    return t(`services.categories.${serviceKey}`, serviceKey);
  };

  // Funci√≥n para traducir tipos de usuario
  const translateUserType = (type) => {
    const typeMap = {
      'cliente': t('auth.register.client'),
      'trabajador': t('auth.register.worker'),
      'admin': t('common.admin'),
    };
    return typeMap[type] || type;
  };

  // Funci√≥n para obtener mensajes de error traducidos
  const getErrorMessage = (errorCode) => {
    const errorMap = {
      'network_error': t('errors.networkError'),
      'server_error': t('errors.serverError'),
      'auth_error': t('errors.authError'),
      'validation_error': t('errors.validationError'),
      'not_found': t('errors.notFound'),
      'permission_denied': t('errors.permissionDenied'),
    };
    return errorMap[errorCode] || t('errors.unknown');
  };

  // Funci√≥n para obtener mensajes de √©xito traducidos
  const getSuccessMessage = (actionType) => {
    const successMap = {
      'login': t('success.login'),
      'register': t('success.register'),
      'profile_updated': t('success.profileUpdated'),
      'contract_created': t('success.contractCreated'),
      'payment_completed': t('success.paymentCompleted'),
    };
    return successMap[actionType] || t('success.generic');
  };

  // Funci√≥n para obtener texto con interpolaci√≥n de variables
  const interpolate = (key, variables = {}) => {
    return t(key, variables);
  };

  return {
    // Funci√≥n de traducci√≥n b√°sica
    t,
    
    // Informaci√≥n del idioma
    language: getCurrentLanguage(),
    isReady: ready,
    
    // Funciones de control
    changeLanguage,
    
    // Shortcuts para traducciones comunes
    common,
    nav,
    
    // Funciones especializadas
    translateService,
    translateUserType,
    getErrorMessage,
    getSuccessMessage,
    interpolate,
    
    // Instancia de i18n para casos avanzados
    i18n,
  };
};

export default useTranslations;
```

## c:\Users\rexma\Desktop\chambing-website\src\i18n\config.js
```
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Importar traducciones
import esTranslation from '../locales/es/translation.json';
import enTranslation from '../locales/en/translation.json';
import frTranslation from '../locales/fr/translation.json';

// Configuraci√≥n de recursos de traducci√≥n
const resources = {
  es: {
    translation: esTranslation,
  },
  en: {
    translation: enTranslation,
  },
  fr: {
    translation: frTranslation,
  },
};

// Inicializar i18next - CONFIGURACI√ìN B√ÅSICA
i18n
  .use(LanguageDetector) // Detecta idioma autom√°ticamente
  .use(initReactI18next) // Conecta con React
  .init({
    resources,
    
    // Idiomas soportados
    supportedLngs: ['es', 'en', 'fr'],
    
    // Idioma por defecto si no se puede detectar
    fallbackLng: 'es',
    
    // Configuraci√≥n de detecci√≥n
    detection: {
      // D√≥nde guardar la preferencia del usuario
      caches: ['localStorage'],
      // Clave en localStorage
      lookupLocalStorage: 'chambing-language',
    },
    
    // Configuraci√≥n b√°sica
    debug: true, // Para ver logs en desarrollo
    
    interpolation: {
      escapeValue: false, // React ya protege contra XSS
    },
  });

// Funci√≥n simple para cambiar idioma
export const changeLanguage = (lng) => {
  console.log(`üåê Cambiando idioma a: ${lng}`);
  return i18n.changeLanguage(lng);
};

// Funci√≥n para obtener idioma actual
export const getCurrentLanguage = () => i18n.language;

export default i18n;
```

## c:\Users\rexma\Desktop\chambing-website\package.json
```
{
  "name": "chambing-website",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint . --ext js,jsx --report-unused-disable-directives --max-warnings 0",
    "preview": "vite preview"
  },
  "dependencies": {
    "@emotion/react": "^11.14.0",
    "@emotion/styled": "^11.14.0",
    "@hookform/resolvers": "^5.1.1",
    "@mui/icons-material": "^7.1.2",
    "@mui/material": "^7.1.2",
    "@mui/x-date-pickers": "^8.5.3",
    "axios": "^1.10.0",
    "i18next": "^25.2.1",
    "i18next-browser-languagedetector": "^8.2.0",
    "i18next-http-backend": "^3.0.2",
    "lucide-react": "^0.522.0",
    "react": "^19.1.0",
    "react-dom": "^19.1.0",
    "react-easy-crop": "^5.5.2",
    "react-hook-form": "^7.58.1",
    "react-i18next": "^15.5.3",
    "react-router-dom": "^7.6.2",
    "yup": "^1.6.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.25.0",
    "@types/react": "^19.1.2",
    "@types/react-dom": "^19.1.2",
    "@vitejs/plugin-react": "^4.4.1",
    "eslint": "^9.25.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "globals": "^16.0.0",
    "sass": "^1.89.2",
    "vite": "^6.3.5"
  }
}

```

## c:\Users\rexma\Desktop\chambing-website\src\App.jsx
```
import React, { useEffect } from 'react';
import { BrowserRouter as Router, Routes, Route, useLocation } from 'react-router-dom';
import { ThemeProvider } from '@mui/material/styles';
import { CssBaseline, Box } from '@mui/material';
import { AuthProvider } from './context/AuthContext';
import { theme } from './theme/muiTheme';
import Navbar from './components/common/Navbar';
import Footer from './components/common/Footer';
import ProtectedRoute from './components/auth/ProtectedRoute';
import Home from './pages/Home';
import LoginForm from './components/auth/LoginForm';
import RegisterForm from './components/auth/RegisterForm';
import Dashboard from './pages/Dashboard';
import AdminDashboard from './pages/AdminDashboard';
import EditProfile from './pages/EditProfile';
import PublicProfile from './pages/PublicProfile';
import Services from './pages/Service'; // ‚úÖ NUEVA IMPORTACI√ìN
import './styles/globals.scss';

// Componente para resetear el scroll en cada cambio de ruta
function ScrollToTop() {
  const { pathname } = useLocation();

  useEffect(() => {
    window.scrollTo(0, 0);
  }, [pathname]);

  return null;
}

function App() {
  return (
    <ThemeProvider theme={theme}>
      <CssBaseline />
      <AuthProvider>
        <Router>
          <ScrollToTop />
          <Box sx={{ 
            display: 'flex', 
            flexDirection: 'column', 
            minHeight: '100vh' 
          }}>
            <Navbar />
            
            <Box component="main" sx={{ flexGrow: 1 }}>
              <Routes>
                {/* Rutas p√∫blicas */}
                <Route path="/" element={<Home />} />
                <Route path="/login" element={<LoginForm />} />
                <Route path="/register" element={<RegisterForm />} />
                
                {/* Perfil P√∫blico - Sin autenticaci√≥n requerida */}
                <Route path="/profile/:userId" element={<PublicProfile />} />
                
                {/* ‚úÖ P√°gina de Servicios - P√∫blica */}
                <Route path="/service" element={<Services />} />
                
                {/* Rutas protegidas - Dashboard normal */}
                <Route
                  path="/dashboard"
                  element={
                    <ProtectedRoute>
                      <Dashboard />
                    </ProtectedRoute>
                  }
                />
                
                {/* Editar Perfil - Solo usuarios autenticados */}
                <Route
                  path="/edit-profile"
                  element={
                    <ProtectedRoute>
                      <EditProfile />
                    </ProtectedRoute>
                  }
                />
                
                {/* Ruta protegida - Dashboard Administrativo */}
                <Route
                  path="/admin"
                  element={
                    <ProtectedRoute requiredRoles={['admin', 'super_admin']}>
                      <AdminDashboard />
                    </ProtectedRoute>
                  }
                />
                
                {/* P√°ginas temporales */}
                <Route
                  path="/perfil"
                  element={
                    <ProtectedRoute>
                      <div style={{ padding: '2rem', textAlign: 'center' }}>
                        <h2>Mi Perfil</h2>
                        <p>P√°gina en construcci√≥n...</p>
                      </div>
                    </ProtectedRoute>
                  }
                />
                
                {/* P√°gina no encontrada */}
                <Route 
                  path="*" 
                  element={
                    <div style={{ padding: '2rem', textAlign: 'center' }}>
                      <h2>P√°gina no encontrada</h2>
                      <p>La p√°gina que buscas no existe.</p>
                    </div>
                  } 
                />
              </Routes>
            </Box>
            
            <Footer />
          </Box>
        </Router>
      </AuthProvider>
    </ThemeProvider>
  );
}

export default App;
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\Dashboard.jsx
```
import React, { useEffect, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useTranslations } from '../hooks/useTranslations';
import { useAuth } from '../context/AuthContext';
import { serviceService } from '../services/serviceService';
import { contractService } from '../services/contractService';
import ProfilePhotoModal from '../components/ProfilePhotoModal';
import CoverPhotoModal from '../components/CoverPhotoModal';
import { DashboardSkeleton } from '../components/SkeletonLoader';
import '../styles/dashboard.scss';
import '../styles/components/SkeletonLoader.scss';

// Iconos SVG
const RefreshIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
  </svg>
);

const NotificationsIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
  </svg>
);

const AccountCircleIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
  </svg>
);

const LogoutIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
  </svg>
);

const WorkIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
  </svg>
);

const AssignmentIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
  </svg>
);

const PaymentIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
  </svg>
);

const EditIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
  </svg>
);

const CameraIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
  </svg>
);

const WallpaperIcon = () => (
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
  </svg>
);

const Dashboard = () => {
  const navigate = useNavigate();
  const { user, logout } = useAuth();
  const { t, translateService, translateUserType, common } = useTranslations();
  const [categories, setCategories] = useState([]);
  const [contracts, setContracts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);
  const [menuOpen, setMenuOpen] = useState(false);
  const [photoModalOpen, setPhotoModalOpen] = useState(false);
  const [coverPhotoModalOpen, setCoverPhotoModalOpen] = useState(false);

  useEffect(() => {
    const loadDashboardData = async () => {
      try {
        setLoading(true);

        // Tiempo m√≠nimo de loading para evitar flashes
        const minLoadingTime = new Promise(resolve => setTimeout(resolve, 500));

        // Cargar datos en paralelo
        const dataPromises = Promise.all([
          serviceService.getCategories().catch(error => {
            console.error('Error cargando categor√≠as:', error);
            return [
              { id: 1, nombre: 'domesticCleaning', descripcion: 'Servicio de limpieza' },
              { id: 2, nombre: 'plumbing', descripcion: 'Reparaciones' },
              { id: 3, nombre: 'electricity', descripcion: 'Trabajos el√©ctricos' },
              { id: 4, nombre: 'gardening', descripcion: 'Mantenimiento' },
              { id: 5, nombre: 'carpentry', descripcion: 'Trabajos en madera' },
              { id: 6, nombre: 'construction', descripcion: 'Obras' },
            ];
          }),
          contractService.getMyContracts().catch(error => {
            console.error('Error cargando contratos:', error);
            return { status: 'success', data: [] };
          })
        ]);

        // Esperar tanto el tiempo m√≠nimo como la carga de datos
        const [results] = await Promise.all([dataPromises, minLoadingTime]);
        const [categoriesData, contractsResponse] = results;

        // Establecer categor√≠as
        setCategories(categoriesData);

        // Establecer contratos
        console.log('Respuesta de contratos:', contractsResponse);
        if (contractsResponse.status === 'success') {
          setContracts(contractsResponse.data || []);
        } else if (Array.isArray(contractsResponse)) {
          setContracts(contractsResponse);
        } else {
          setContracts([]);
        }
      } catch (error) {
        console.error('Error general:', error);
        setError('Error al cargar los datos del dashboard');
      } finally {
        setLoading(false);
      }
    };
    window.scrollTo(0, 0);

    loadDashboardData();
  }, []);

  const handleViewWorkers = (categoryId) => {
    navigate(`/workers?category=${categoryId}`);
  };

  const handleActivateContract = async (contract) => {
    const pin = prompt(`Ingresa el PIN para activar el contrato ${contract.codigo_contrato}:`);
    if (!pin) return;

    try {
      const response = await contractService.activarContratoConPIN(
        contract.codigo_contrato,
        pin
      );

      if (response.status === 'success') {
        alert('Contrato activado exitosamente');
        window.location.reload();
      }
    } catch (error) {
      alert('Error al activar el contrato: ' + (error.response?.data?.message || error.message));
    }
  };

  const handleMenuToggle = () => {
    setMenuOpen(!menuOpen);
  };

  const handleMenuClose = () => {
    setMenuOpen(false);
  };

  const handleLogout = async () => {
    await logout();
    handleMenuClose();
  };

  const handleRefresh = () => {
    window.location.reload();
  };

  const formatDate = (dateString) => {
    try {
      return new Date(dateString).toLocaleDateString();
    } catch {
      return dateString;
    }
  };

  const renderProfileAvatar = () => {
    if (user?.foto_perfil) {
      return (
        <img
          src={user.foto_perfil}
          alt={`Foto de perfil de ${user.nombre}`}
          className="dashboard__avatar"
          onError={(e) => {
            e.target.style.display = 'none';
          }}
        />
      );
    }

    return (
      <div className="dashboard__avatar dashboard__avatar--placeholder" aria-label="Avatar por defecto">
        {user?.nombre?.charAt(0) || '?'}
      </div>
    );
  };

  // MOSTRAR SKELETON LOADER MIENTRAS CARGA
  if (loading) {
    return <DashboardSkeleton />;
  }

  return (
    <div className="dashboard">
      {/* Header/AppBar */}
      <header className="dashboard__header" role="banner">
        <div className="dashboard__header-toolbar">
          <h1 className="dashboard__header-title">
            {t('nav.dashboard')} - ChambingApp
          </h1>

          <nav className="dashboard__header-actions" role="navigation" aria-label="Navegaci√≥n principal">
            {/* Bot√≥n Admin Panel - Solo visible para admins */}
            {(user?.tipo_usuario === 'admin' || user?.tipo_usuario === 'super_admin') && (
              <button
                className="dashboard__icon-btn dashboard__icon-btn--admin"
                onClick={() => window.location.href = '/admin'}
                aria-label="Panel de Administraci√≥n"
                type="button"
                title="Ir al Panel de Administraci√≥n"
              >
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
              </button>
            )}

            <button
              className="dashboard__icon-btn"
              onClick={handleRefresh}
              aria-label="Actualizar p√°gina"
              type="button"
            >
              <RefreshIcon />
            </button>

            <button
              className="dashboard__icon-btn"
              aria-label="Notificaciones"
              type="button"
            >
              <NotificationsIcon />
            </button>

            <button
              className="dashboard__icon-btn"
              onClick={handleMenuToggle}
              aria-label="Men√∫ de usuario"
              aria-expanded={menuOpen}
              aria-haspopup="true"
              type="button"
            >
              {user?.foto_perfil ? (
                <img
                  src={user.foto_perfil}
                  alt=""
                  style={{
                    width: '32px',
                    height: '32px',
                    borderRadius: '50%',
                    objectFit: 'cover'
                  }}
                />
              ) : (
                <AccountCircleIcon />
              )}
            </button>
          </nav>

          {menuOpen && (
            <>
              <div
                className="dashboard__menu-overlay"
                onClick={handleMenuClose}
                aria-hidden="true"
                style={{
                  position: 'fixed',
                  top: 0,
                  left: 0,
                  right: 0,
                  bottom: 0,
                  zIndex: 999
                }}
              />
              <div className="dashboard__menu" role="menu">
                <button
                  className="dashboard__menu-item"
                  onClick={handleMenuClose}
                  role="menuitem"
                  type="button"
                >
                  <AccountCircleIcon />
                  {t('nav.profile')}
                </button>
                <button
                  className="dashboard__menu-item"
                  onClick={handleLogout}
                  role="menuitem"
                  type="button"
                >
                  <LogoutIcon />
                  {t('nav.logout')}
                </button>
              </div>
            </>
          )}
        </div>
      </header>

      <main className="dashboard__container">
        {/* Secci√≥n de Perfil con Foto de Portada */}
        <article className="dashboard__profile-card" aria-labelledby="profile-heading">
          {/* Foto de Portada */}
          <div
            className="dashboard__cover-photo"
            style={{
              backgroundImage: user?.foto_portada ? `url(${user.foto_portada})` : undefined
            }}
            role="img"
            aria-label="Foto de portada del perfil"
          >
            <button
              className="dashboard__cover-photo-btn"
              onClick={() => setCoverPhotoModalOpen(true)}
              aria-label="Cambiar foto de portada"
              type="button"
            >
              <WallpaperIcon />
            </button>
            <div className="dashboard__cover-photo-overlay" aria-hidden="true"></div>
          </div>

          {/* Informaci√≥n del Perfil */}
          <div className="dashboard__profile-info">
            <div className="dashboard__profile-grid">
              <div className="dashboard__avatar-container">
                {renderProfileAvatar()}
                <button
                  className="dashboard__avatar-btn"
                  onClick={() => setPhotoModalOpen(true)}
                  aria-label="Cambiar foto de perfil"
                  type="button"
                >
                  <CameraIcon />
                </button>
              </div>

              <div className="dashboard__user-details">
                <h2 id="profile-heading">
                  {t('dashboard.welcome', { name: user?.nombre || 'Usuario' })}
                </h2>
                <p className="dashboard__user-details-email">{user?.email}</p>
                {user?.biografia && (
                  <p className="dashboard__user-bio">{user.biografia}</p>
                )}
                {/* Botones de Perfil */}
                <div className="dashboard__profile-actions">
                  <button
                    className="dashboard__btn dashboard__btn--outlined dashboard__btn--sm"
                    onClick={() => window.location.href = '/edit-profile'}
                    type="button"
                  >
                    <EditIcon />
                    Editar Perfil
                  </button>
                  <button
                    className="dashboard__btn dashboard__btn--primary dashboard__btn--sm"
                    onClick={() => window.location.href = `/profile/${user?.id}`}
                    type="button"
                  >
                    Ver Perfil P√∫blico
                  </button>
                </div>
                <div className="dashboard__chips" role="list">
                  <span className="dashboard__chip dashboard__chip--primary" role="listitem">
                    {t('dashboard.userType', { type: translateUserType(user?.tipo_usuario || 'usuario') })}
                  </span>
                  {user?.departamento && (
                    <span className="dashboard__chip dashboard__chip--info" role="listitem">
                      {`${user.departamento}, ${user.municipio}`}
                    </span>
                  )}
                  {user?.telefono && (
                    <span className="dashboard__chip dashboard__chip--secondary" role="listitem">
                      {user.telefono}
                    </span>
                  )}
                </div>
              </div>
            </div>
          </div>
        </article>

        {/* Mensajes de alerta */}
        {error && (
          <div className="dashboard__alert dashboard__alert--error" role="alert">
            {error}
          </div>
        )}

        <div className="dashboard__alert dashboard__alert--success" role="status">
          {t('success.login')}
        </div>

        {/* Estad√≠sticas r√°pidas */}
        <section className="dashboard__stats" aria-labelledby="stats-heading">
          <h2 id="stats-heading" className="visually-hidden">Estad√≠sticas del Dashboard</h2>

          <article className="dashboard__stat-card">
            <div className="dashboard__stat-card-icon" aria-hidden="true">
              <WorkIcon />
            </div>
            <div className="dashboard__stat-card-content">
              <h3>{categories.length}</h3>
              <p>{t('dashboard.stats.availableServices')}</p>
            </div>
          </article>

          <article className="dashboard__stat-card">
            <div className="dashboard__stat-card-icon" aria-hidden="true">
              <AssignmentIcon />
            </div>
            <div className="dashboard__stat-card-content">
              <h3>{contracts.length}</h3>
              <p>{t('dashboard.stats.myContracts')}</p>
            </div>
          </article>

          <article className="dashboard__stat-card">
            <div className="dashboard__stat-card-icon" aria-hidden="true">
              <PaymentIcon />
            </div>
            <div className="dashboard__stat-card-content">
              <h3>$10.00</h3>
              <p>{t('dashboard.stats.availableBalance')}</p>
            </div>
          </article>

          <article className="dashboard__stat-card">
            <div className="dashboard__stat-card-icon" aria-hidden="true">
              <NotificationsIcon />
            </div>
            <div className="dashboard__stat-card-content">
              <h3>0</h3>
              <p>{t('dashboard.stats.notifications')}</p>
            </div>
          </article>
        </section>

        {/* Servicios disponibles */}
        <section className="dashboard__section" aria-labelledby="services-heading">
          <div className="dashboard__section-header">
            <h2 id="services-heading">{t('dashboard.availableServices')}</h2>
          </div>
          <div className="dashboard__services">
            {categories.slice(0, 6).map((category) => (
              <article key={category.id} className="dashboard__service-card">
                <h3>{translateService(category.nombre)}</h3>
                <p>{category.descripcion}</p>
                <button 
                  className="dashboard__btn dashboard__btn--outlined" 
                  onClick={() => handleViewWorkers(category.id)}
                  type="button"
                >
                  Ver Trabajadores
                </button>
              </article>
            ))}
          </div>
        </section>

        {/* Contratos recientes */}
        <section className="dashboard__section" aria-labelledby="contracts-heading">
          <div className="dashboard__section-header">
            <h2 id="contracts-heading">{t('dashboard.recentContracts')}</h2>
            <button className="dashboard__btn dashboard__btn--outlined" type="button">
              <AssignmentIcon />
              {t('dashboard.viewAll')}
            </button>
          </div>

          {contracts.length > 0 ? (
            <div className="dashboard__contracts">
              {contracts.slice(0, 3).map((contract) => (
                <article key={contract.id} className="dashboard__contract-card">
                  <div className="dashboard__contract-header">
                    <h3>Contrato {contract.codigo_contrato}</h3>
                    <span className={`dashboard__contract-status dashboard__contract-status--${contract.estado}`}>
                      {contract.estado.replace('_', ' ').toUpperCase()}
                    </span>
                  </div>

                  <div className="dashboard__contract-details">
                    <p><strong>Categor√≠a:</strong> {contract.categoria?.nombre || 'N/A'}</p>
                    <p><strong>Monto:</strong> ${contract.monto_total}</p>
                    <p><strong>Fecha:</strong> {formatDate(contract.fecha_creacion)}</p>

                    {contract.estado === 'pendiente_activacion' && (
                      <div className="dashboard__contract-pin">
                        <p><strong>PIN de activaci√≥n:</strong></p>
                        <code className="dashboard__pin-code">{contract.pin_activacion}</code>
                      </div>
                    )}
                  </div>

                  <div className="dashboard__contract-actions">
                    <button
                      className="dashboard__btn dashboard__btn--text"
                      onClick={() => window.location.href = `/contracts/${contract.id}`}
                      type="button"
                    >
                      Ver Detalles
                    </button>

                    {contract.estado === 'pendiente_activacion' && (
                      <button
                        className="dashboard__btn dashboard__btn--primary dashboard__btn--sm"
                        onClick={() => handleActivateContract(contract)}
                        type="button"
                      >
                        Activar Contrato
                      </button>
                    )}
                  </div>
                </article>
              ))}
            </div>
          ) : (
            <div className="dashboard__empty-state">
              <div className="dashboard__empty-state-icon" aria-hidden="true">
                <AssignmentIcon />
              </div>
              <h3>{t('dashboard.noContracts.title')}</h3>
              <p>{t('dashboard.noContracts.subtitle')}</p>
              <button className="dashboard__btn dashboard__btn--primary" type="button">
                {t('dashboard.noContracts.exploreServices')}
              </button>
            </div>
          )}
        </section>

        {/* Debug info */}
        <section className="dashboard__debug" aria-labelledby="debug-heading">
          <h3 id="debug-heading">{t('common.debugInfo')}</h3>
          <pre>
            Usuario autenticado: {user?.email ? 'S√≠' : 'No'}{'\n'}
            Foto de perfil: {user?.foto_perfil ? 'S√≠' : 'No'}{'\n'}
            URL foto perfil: {user?.foto_perfil || 'No disponible'}{'\n'}
            Foto de portada: {user?.foto_portada ? 'S√≠' : 'No'}{'\n'}
            URL foto portada: {user?.foto_portada || 'No disponible'}{'\n'}
            Categor√≠as cargadas: {categories.length}{'\n'}
            Contratos cargados: {contracts.length}{'\n'}
            Estado de carga: {loading ? common.loading : 'Completo'}{'\n'}
            API URL: {import.meta.env.VITE_API_URL || 'http://localhost:3000'}{'\n'}
            Token guardado: {localStorage.getItem('token') ? 'S√≠' : 'No'}
          </pre>
        </section>
      </main>

      {/* Modales */}
      <ProfilePhotoModal
        open={photoModalOpen}
        onClose={() => setPhotoModalOpen(false)}
        onPhotoUpdated={(newPhotoUrl) => console.log('Foto actualizada:', newPhotoUrl)}
      />

      <CoverPhotoModal
        open={coverPhotoModalOpen}
        onClose={() => setCoverPhotoModalOpen(false)}
        onPhotoUpdated={(newCoverUrl) => console.log('Foto de portada actualizada:', newCoverUrl)}
      />
    </div>
  );
};

export default Dashboard;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\SkeletonLoader.jsx
```
import React from 'react';
import '../styles/components/SkeletonLoader.scss';

// Componente base de skeleton
const SkeletonBase = ({ className = '', style = {} }) => (
  <div className={`skeleton ${className}`} style={style} aria-hidden="true"></div>
);

// Skeleton para el header
export const SkeletonHeader = () => (
  <header className="skeleton-header">
    <div className="skeleton-header__toolbar">
      <SkeletonBase className="skeleton-header__title" style={{ width: '250px', height: '28px' }} />
      <div className="skeleton-header__actions">
        <SkeletonBase className="skeleton-header__icon" />
        <SkeletonBase className="skeleton-header__icon" />
        <SkeletonBase className="skeleton-header__icon" />
      </div>
    </div>
  </header>
);

// Skeleton para la tarjeta de perfil
export const SkeletonProfileCard = () => (
  <article className="skeleton-profile-card">
    <SkeletonBase className="skeleton-profile-card__cover" />
    
    <div className="skeleton-profile-card__content">
      <div className="skeleton-profile-card__grid">
        <div className="skeleton-profile-card__avatar-container">
          <SkeletonBase className="skeleton-profile-card__avatar" />
        </div>
        
        <div className="skeleton-profile-card__details">
          <SkeletonBase style={{ width: '60%', height: '32px', marginBottom: '12px' }} />
          <SkeletonBase style={{ width: '40%', height: '20px', marginBottom: '16px' }} />
          <SkeletonBase style={{ width: '80%', height: '16px', marginBottom: '8px' }} />
          <SkeletonBase style={{ width: '70%', height: '16px', marginBottom: '20px' }} />
          
          <div className="skeleton-profile-card__actions">
            <SkeletonBase style={{ width: '120px', height: '36px' }} />
            <SkeletonBase style={{ width: '160px', height: '36px' }} />
          </div>
          
          <div className="skeleton-profile-card__chips">
            <SkeletonBase style={{ width: '100px', height: '28px', borderRadius: '14px' }} />
            <SkeletonBase style={{ width: '140px', height: '28px', borderRadius: '14px' }} />
            <SkeletonBase style={{ width: '120px', height: '28px', borderRadius: '14px' }} />
          </div>
        </div>
      </div>
    </div>
  </article>
);

// Skeleton para las tarjetas de estad√≠sticas
export const SkeletonStatsCard = () => (
  <div className="skeleton-stats-card">
    <SkeletonBase className="skeleton-stats-card__icon" />
    <div className="skeleton-stats-card__content">
      <SkeletonBase style={{ width: '60px', height: '32px', marginBottom: '8px' }} />
      <SkeletonBase style={{ width: '100%', height: '20px' }} />
    </div>
  </div>
);

// Skeleton para las tarjetas de servicios
export const SkeletonServiceCard = () => (
  <div className="skeleton-service-card">
    <SkeletonBase style={{ width: '70%', height: '24px', marginBottom: '12px' }} />
    <SkeletonBase style={{ width: '100%', height: '16px', marginBottom: '8px' }} />
    <SkeletonBase style={{ width: '90%', height: '16px', marginBottom: '20px' }} />
    <SkeletonBase style={{ width: '120px', height: '36px' }} />
  </div>
);

// Skeleton para las tarjetas de contratos
export const SkeletonContractCard = () => (
  <div className="skeleton-contract-card">
    <div className="skeleton-contract-card__header">
      <SkeletonBase style={{ width: '140px', height: '24px' }} />
      <SkeletonBase style={{ width: '100px', height: '24px', borderRadius: '12px' }} />
    </div>
    
    <div className="skeleton-contract-card__details">
      <SkeletonBase style={{ width: '70%', height: '20px', marginBottom: '12px' }} />
      <SkeletonBase style={{ width: '50%', height: '20px', marginBottom: '12px' }} />
      <SkeletonBase style={{ width: '60%', height: '20px' }} />
    </div>
    
    <div className="skeleton-contract-card__actions">
      <SkeletonBase style={{ width: '100px', height: '36px' }} />
      <SkeletonBase style={{ width: '130px', height: '36px' }} />
    </div>
  </div>
);

// Skeleton completo del Dashboard
export const DashboardSkeleton = () => (
  <div className="dashboard-skeleton">
    <SkeletonHeader />
    
    <main className="dashboard-skeleton__container">
      <SkeletonProfileCard />
      
      <section className="dashboard-skeleton__stats">
        {[...Array(4)].map((_, i) => (
          <SkeletonStatsCard key={i} />
        ))}
      </section>
      
      <section className="dashboard-skeleton__section">
        <SkeletonBase style={{ width: '200px', height: '28px', marginBottom: '24px' }} />
        <div className="dashboard-skeleton__services">
          {[...Array(6)].map((_, i) => (
            <SkeletonServiceCard key={i} />
          ))}
        </div>
      </section>
      
      <section className="dashboard-skeleton__section">
        <div className="dashboard-skeleton__section-header">
          <SkeletonBase style={{ width: '180px', height: '28px' }} />
          <SkeletonBase style={{ width: '120px', height: '36px' }} />
        </div>
        <div className="dashboard-skeleton__contracts">
          {[...Array(3)].map((_, i) => (
            <SkeletonContractCard key={i} />
          ))}
        </div>
      </section>
    </main>
  </div>
);

// Ejemplo de uso en el componente
const SkeletonLoaderDemo = () => {
  const [loading, setLoading] = React.useState(true);

  React.useEffect(() => {
    // Simular carga de datos
    const timer = setTimeout(() => setLoading(false), 3000);
    return () => clearTimeout(timer);
  }, []);

  if (loading) {
    return <DashboardSkeleton />;
  }

  return (
    <div style={{ padding: '2rem', textAlign: 'center' }}>
      <h2>Contenido cargado</h2>
      <p>El skeleton loader ha sido reemplazado por el contenido real.</p>
      <button 
        onClick={() => setLoading(true)}
        style={{
          marginTop: '1rem',
          padding: '0.75rem 1.5rem',
          background: '#667eea',
          color: 'white',
          border: 'none',
          borderRadius: '8px',
          cursor: 'pointer'
        }}
      >
        Volver a cargar skeleton
      </button>
    </div>
  );
};

export default SkeletonLoaderDemo;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\ProfilePhotoModal.jsx
```
import React, { useState, useRef, useCallback } from 'react';
import {
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
  Button,
  Box,
  Avatar,
  Typography,
  CircularProgress,
  Alert,
  IconButton,
  Slider,
  Stack,
} from '@mui/material';
import {
  PhotoCamera,
  AccountCircle,
  Close,
  ZoomIn,
  ZoomOut,
  RotateLeft,
} from '@mui/icons-material';
import Cropper from 'react-easy-crop';
import { useAuth } from '../context/AuthContext';

const ProfilePhotoModal = ({ open, onClose, onPhotoUpdated }) => {
  const { user, updateUser } = useAuth();
  const [selectedFile, setSelectedFile] = useState(null);
  const [imageSrc, setImageSrc] = useState(null);
  const [crop, setCrop] = useState({ x: 0, y: 0 });
  const [zoom, setZoom] = useState(1);
  const [rotation, setRotation] = useState(0);
  const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);
  const [uploading, setUploading] = useState(false);
  const [error, setError] = useState(null);
  const fileInputRef = useRef(null);

  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {
    setCroppedAreaPixels(croppedAreaPixels);
  }, []);

  const handleFileSelect = (event) => {
    const file = event.target.files[0];
    
    if (!file) return;

    // Validar tipo de archivo
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      setError('Solo se permiten archivos JPG, PNG o WebP');
      return;
    }

    // Validar tama√±o (5MB m√°ximo)
    if (file.size > 5 * 1024 * 1024) {
      setError('El archivo no puede ser mayor a 5MB');
      return;
    }

    setError(null);
    setSelectedFile(file);

    // Crear preview con FileReader
    const reader = new FileReader();
    reader.onload = (e) => {
      setImageSrc(e.target.result);
      // Reset crop settings
      setCrop({ x: 0, y: 0 });
      setZoom(1);
      setRotation(0);
    };
    reader.readAsDataURL(file);
  };

  const createImage = (url) =>
    new Promise((resolve, reject) => {
      const image = new Image();
      image.addEventListener('load', () => resolve(image));
      image.addEventListener('error', (error) => reject(error));
      image.src = url;
    });

  const getCroppedImg = async (imageSrc, pixelCrop, rotation = 0) => {
    const image = await createImage(imageSrc);
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    const maxSize = Math.max(image.width, image.height);
    const safeArea = 2 * ((maxSize / 2) * Math.sqrt(2));

    canvas.width = safeArea;
    canvas.height = safeArea;

    ctx.translate(safeArea / 2, safeArea / 2);
    ctx.rotate((rotation * Math.PI) / 180);
    ctx.translate(-safeArea / 2, -safeArea / 2);

    ctx.drawImage(
      image,
      safeArea / 2 - image.width * 0.5,
      safeArea / 2 - image.height * 0.5
    );

    const data = ctx.getImageData(0, 0, safeArea, safeArea);

    canvas.width = pixelCrop.width;
    canvas.height = pixelCrop.height;

    ctx.putImageData(
      data,
      0 - safeArea / 2 + image.width * 0.5 - pixelCrop.x,
      0 - safeArea / 2 + image.height * 0.5 - pixelCrop.y
    );

    return new Promise((resolve) => {
      canvas.toBlob((blob) => {
        resolve(blob);
      }, 'image/jpeg', 0.95);
    });
  };

  const handleUpload = async () => {
    if (!imageSrc || !croppedAreaPixels) return;

    setUploading(true);
    setError(null);

    try {
      // Crear imagen recortada
      const croppedBlob = await getCroppedImg(imageSrc, croppedAreaPixels, rotation);
      
      // Crear FormData con la imagen recortada
      const formData = new FormData();
      formData.append('file', croppedBlob, selectedFile.name);

      const token = localStorage.getItem('token');
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/profile-photo`,
        {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`,
          },
          body: formData,
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al subir la foto');
      }

      const result = await response.json();
      
      // Actualizar el usuario en el contexto
      if (updateUser) {
        updateUser({
          ...user,
          foto_perfil: result.data.foto_perfil
        });
      }

      // Llamar callback si existe
      if (onPhotoUpdated) {
        onPhotoUpdated(result.data.foto_perfil);
      }

      // Cerrar modal
      handleClose();
      
    } catch (error) {
      console.error('Error uploading photo:', error);
      setError(error.message || 'Error al subir la foto');
    } finally {
      setUploading(false);
    }
  };

  const handleClose = () => {
    setSelectedFile(null);
    setImageSrc(null);
    setCrop({ x: 0, y: 0 });
    setZoom(1);
    setRotation(0);
    setError(null);
    setUploading(false);
    onClose();
  };

  const handleRotate = () => {
    setRotation((prev) => (prev + 90) % 360);
  };

  return (
    <Dialog 
      open={open} 
      onClose={handleClose}
      maxWidth="md"
      fullWidth
    >
      <DialogTitle>
        <Box display="flex" justifyContent="space-between" alignItems="center">
          <Typography variant="h6">
            Cambiar Foto de Perfil
          </Typography>
          <IconButton onClick={handleClose}>
            <Close />
          </IconButton>
        </Box>
      </DialogTitle>

      <DialogContent>
        <Box display="flex" flexDirection="column" py={2}>
          {!imageSrc ? (
            // Vista sin imagen seleccionada
            <Box textAlign="center" py={4}>
              <Box position="relative" display="inline-block" mb={3}>
                <Avatar
                  src={user?.foto_perfil}
                  sx={{ 
                    width: 120, 
                    height: 120,
                    margin: '0 auto',
                  }}
                >
                  {!user?.foto_perfil && (user?.nombre?.charAt(0) || <AccountCircle />)}
                </Avatar>
                
                <IconButton
                  onClick={() => fileInputRef.current?.click()}
                  sx={{
                    position: 'absolute',
                    bottom: -8,
                    right: -8,
                    bgcolor: 'primary.main',
                    color: 'white',
                    '&:hover': { bgcolor: 'primary.dark' }
                  }}
                >
                  <PhotoCamera />
                </IconButton>
              </Box>

              <input
                ref={fileInputRef}
                type="file"
                accept="image/jpeg,image/jpg,image/png,image/webp"
                onChange={handleFileSelect}
                style={{ display: 'none' }}
              />

              {error && (
                <Alert severity="error" sx={{ mt: 2 }}>
                  {error}
                </Alert>
              )}

              <Typography variant="body2" color="text.secondary" sx={{ mt: 2 }}>
                Haz clic en el icono de la c√°mara para seleccionar una foto.
                <br />
                Formatos permitidos: JPG, PNG, WebP (m√°ximo 5MB)
              </Typography>
            </Box>
          ) : (
            // Vista con editor de recorte
            <>
              {/* √Årea de recorte */}
              <Box
                sx={{
                  position: 'relative',
                  width: '100%',
                  height: 400,
                  bgcolor: 'grey.900',
                  borderRadius: 2,
                  overflow: 'hidden',
                }}
              >
                <Cropper
                  image={imageSrc}
                  crop={crop}
                  zoom={zoom}
                  rotation={rotation}
                  aspect={1}
                  cropShape="round"
                  showGrid={false}
                  onCropChange={setCrop}
                  onZoomChange={setZoom}
                  onCropComplete={onCropComplete}
                />
              </Box>

              {/* Controles */}
              <Box sx={{ mt: 3 }}>
                <Stack spacing={2}>
                  {/* Control de zoom */}
                  <Box>
                    <Typography variant="body2" gutterBottom>
                      Zoom
                    </Typography>
                    <Stack direction="row" spacing={2} alignItems="center">
                      <ZoomOut fontSize="small" />
                      <Slider
                        value={zoom}
                        min={1}
                        max={3}
                        step={0.1}
                        onChange={(e, value) => setZoom(value)}
                        sx={{ flexGrow: 1 }}
                      />
                      <ZoomIn fontSize="small" />
                    </Stack>
                  </Box>

                  {/* Bot√≥n de rotaci√≥n */}
                  <Box>
                    <Button
                      startIcon={<RotateLeft />}
                      onClick={handleRotate}
                      variant="outlined"
                      size="small"
                    >
                      Rotar 90¬∞
                    </Button>
                  </Box>

                  {/* Bot√≥n para cambiar imagen */}
                  <Box>
                    <Button
                      startIcon={<PhotoCamera />}
                      onClick={() => fileInputRef.current?.click()}
                      variant="outlined"
                      size="small"
                      fullWidth
                    >
                      Seleccionar otra imagen
                    </Button>
                    <input
                      ref={fileInputRef}
                      type="file"
                      accept="image/jpeg,image/jpg,image/png,image/webp"
                      onChange={handleFileSelect}
                      style={{ display: 'none' }}
                    />
                  </Box>
                </Stack>
              </Box>

              {error && (
                <Alert severity="error" sx={{ mt: 2 }}>
                  {error}
                </Alert>
              )}

              <Typography variant="caption" color="text.secondary" sx={{ mt: 2, display: 'block' }}>
                Arrastra para reposicionar, usa el zoom para ajustar el tama√±o
              </Typography>
            </>
          )}
        </Box>
      </DialogContent>

      <DialogActions>
        <Button onClick={handleClose} disabled={uploading}>
          Cancelar
        </Button>
        <Button
          onClick={handleUpload}
          variant="contained"
          disabled={!imageSrc || uploading}
          startIcon={uploading ? <CircularProgress size={20} /> : null}
        >
          {uploading ? 'Subiendo...' : 'Guardar Foto'}
        </Button>
      </DialogActions>
    </Dialog>
  );
};

export default ProfilePhotoModal;
```

## c:\Users\rexma\Desktop\chambing-website\src\services\profileService.js
```
import api from './api';

export const profileService = {
  // Usa api (axios) para todo excepto uploads
  async uploadProfilePhoto(file) {
    try {
      const formData = new FormData();
      formData.append('file', file);
      
      const response = await api.post('/users/profile-photo', formData, {
        headers: { 'Content-Type': 'multipart/form-data' },
      });
      
      return response.data;
    } catch (error) {
      console.error('Error uploading profile photo:', error);
      throw error;
    }
  },

  async getCurrentUser() {
    try {
      const response = await api.get('/users/me');
      return response.data;
    } catch (error) {
      console.error('Error getting current user:', error);
      throw error;
    }
  },

  async updateProfile(userData) {
    try {
      const response = await api.patch('/users/profile', userData);
      return response.data;
    } catch (error) {
      console.error('Error updating profile:', error);
      throw error;
    }
  },

  async getAvailableSkills() {
    try {
      const response = await api.get('/skills');
      return response.data;
    } catch (error) {
      console.error('Error fetching skills:', error);
      throw error;
    }
  },

  async getMySkills() {
    try {
      const response = await api.get('/users/me/skills');
      return response.data;
    } catch (error) {
      console.error('Error fetching user skills:', error);
      throw error;
    }
  },

  async updateSkills(skillIds) {
    try {
      const response = await api.put('/users/profile/skills', { skillIds });
      return response.data;
    } catch (error) {
      console.error('Error updating skills:', error);
      throw error;
    }
  },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useAdmin.js
```
import { useState, useCallback } from 'react';
import adminService from '../services/adminService';
import { useAuth } from '../context/AuthContext';

export const useAdmin = () => {
  const { user } = useAuth();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  // Verificar si el usuario es admin o super admin
  const isAdmin = user?.tipo_usuario === 'admin' || user?.tipo_usuario === 'super_admin';
  const isSuperAdmin = user?.tipo_usuario === 'super_admin';

  // Wrapper gen√©rico para manejar operaciones async con loading y error
  const executeAdminOperation = useCallback(async (operation) => {
    try {
      setLoading(true);
      setError(null);
      const result = await operation();
      return { success: true, data: result };
    } catch (err) {
      const errorMessage = err.response?.data?.message || err.message || 'Error en la operaci√≥n';
      setError(errorMessage);
      console.error('Admin operation error:', err);
      return { success: false, error: errorMessage };
    } finally {
      setLoading(false);
    }
  }, []);

  // ===== CATEGOR√çAS =====
  const getCategories = useCallback(() => {
    return executeAdminOperation(() => adminService.getCategories());
  }, [executeAdminOperation]);

  const createCategory = useCallback((categoryData) => {
    return executeAdminOperation(() => adminService.createCategory(categoryData));
  }, [executeAdminOperation]);

  const updateCategory = useCallback((id, categoryData) => {
    return executeAdminOperation(() => adminService.updateCategory(id, categoryData));
  }, [executeAdminOperation]);

  const deleteCategory = useCallback((id) => {
    return executeAdminOperation(() => adminService.deleteCategory(id));
  }, [executeAdminOperation]);

  // ===== DOCUMENTOS =====
  const getPendingDocuments = useCallback(() => {
    return executeAdminOperation(() => adminService.getPendingDocuments());
  }, [executeAdminOperation]);

  const getAllDocuments = useCallback((filters) => {
    return executeAdminOperation(() => adminService.getAllDocuments(filters));
  }, [executeAdminOperation]);

  const verifyDocument = useCallback((documentId, verificationData) => {
    return executeAdminOperation(() => 
      adminService.verifyDocument(documentId, {
        ...verificationData,
        verificadorId: user.id
      })
    );
  }, [executeAdminOperation, user]);

  // ===== CONTRATOS =====
  const getAllContracts = useCallback((filters) => {
    return executeAdminOperation(() => adminService.getAllContracts(filters));
  }, [executeAdminOperation]);

  const updateContractStatus = useCallback((contractId, newStatus, notas) => {
    return executeAdminOperation(() => 
      adminService.updateContractStatus(contractId, {
        nuevoEstado: newStatus,
        usuarioId: user.id,
        notas
      })
    );
  }, [executeAdminOperation, user]);

  const getContractHistory = useCallback((contractId) => {
    return executeAdminOperation(() => adminService.getContractHistory(contractId));
  }, [executeAdminOperation]);

  // ===== USUARIOS =====
  const getAllUsers = useCallback((filters) => {
    return executeAdminOperation(() => adminService.getAllUsers(filters));
  }, [executeAdminOperation]);

  const getUserById = useCallback((userId) => {
    return executeAdminOperation(() => adminService.getUserById(userId));
  }, [executeAdminOperation]);

  const updateUser = useCallback((userId, userData) => {
    return executeAdminOperation(() => adminService.updateUser(userId, userData));
  }, [executeAdminOperation]);

  const deleteUser = useCallback((userId) => {
    if (!isSuperAdmin) {
      return Promise.resolve({ 
        success: false, 
        error: 'Solo Super Admins pueden eliminar usuarios' 
      });
    }
    return executeAdminOperation(() => adminService.deleteUser(userId));
  }, [executeAdminOperation, isSuperAdmin]);

  const suspendUser = useCallback((userId, reason) => {
    return executeAdminOperation(() => adminService.suspendUser(userId, reason));
  }, [executeAdminOperation]);

  // ===== ROLES =====
  const getAllRoles = useCallback(() => {
    if (!isSuperAdmin) {
      return Promise.resolve({ 
        success: false, 
        error: 'Solo Super Admins pueden gestionar roles' 
      });
    }
    return executeAdminOperation(() => adminService.getAllRoles());
  }, [executeAdminOperation, isSuperAdmin]);

  const assignRole = useCallback((assignmentData) => {
    if (!isSuperAdmin) {
      return Promise.resolve({ 
        success: false, 
        error: 'Solo Super Admins pueden asignar roles' 
      });
    }
    return executeAdminOperation(() => adminService.assignRole(assignmentData));
  }, [executeAdminOperation, isSuperAdmin]);

  const removeRole = useCallback((userId, roleId) => {
    if (!isSuperAdmin) {
      return Promise.resolve({ 
        success: false, 
        error: 'Solo Super Admins pueden remover roles' 
      });
    }
    return executeAdminOperation(() => adminService.removeRole(userId, roleId));
  }, [executeAdminOperation, isSuperAdmin]);

  // ===== ESTAD√çSTICAS =====
  const getAdminStats = useCallback(() => {
    return executeAdminOperation(() => adminService.getAdminStats());
  }, [executeAdminOperation]);

  const getDashboardMetrics = useCallback(() => {
    return executeAdminOperation(() => adminService.getDashboardMetrics());
  }, [executeAdminOperation]);

  return {
    // Estado
    loading,
    error,
    isAdmin,
    isSuperAdmin,

    // Categor√≠as
    getCategories,
    createCategory,
    updateCategory,
    deleteCategory,

    // Documentos
    getPendingDocuments,
    getAllDocuments,
    verifyDocument,

    // Contratos
    getAllContracts,
    updateContractStatus,
    getContractHistory,

    // Usuarios
    getAllUsers,
    getUserById,
    updateUser,
    deleteUser,
    suspendUser,

    // Roles
    getAllRoles,
    assignRole,
    removeRole,

    // Estad√≠sticas
    getAdminStats,
    getDashboardMetrics,

    // Utilidades
    clearError: () => setError(null)
  };
};

export default useAdmin;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\common\footer.jsx
```
import React from 'react';
import { useTranslations } from '../../hooks/useTranslations'; // ‚≠ê Usar nuestro hook
import {
  Box,
  Container,
  Grid,
  Typography,
  Link,
  IconButton,
} from '@mui/material';
import {
  Facebook,
  Twitter,
  Instagram,
  Email,
  Phone,
  LocationOn,
} from '@mui/icons-material';

const Footer = () => {
  const { t, translateService } = useTranslations(); // ‚≠ê Usar nuestro hook

  return (
    <Box
      component="footer"
      sx={{
        bgcolor: 'grey.900',
        color: 'white',
        py: 6,
        mt: 'auto',
      }}
    >
      <Container maxWidth="lg">
        <Grid container spacing={4}>
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              ChambingApp
            </Typography>
            <Typography variant="body2" sx={{ mb: 2 }}>
              {t('footer.description')}
            </Typography>
            <Box>
              <IconButton color="inherit" aria-label="Facebook">
                <Facebook />
              </IconButton>
              <IconButton color="inherit" aria-label="Twitter">
                <Twitter />
              </IconButton>
              <IconButton color="inherit" aria-label="Instagram">
                <Instagram />
              </IconButton>
            </Box>
          </Grid>
          
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              {t('footer.services')}
            </Typography>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('domesticCleaning')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('plumbing')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('electricity')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {translateService('gardening')}
            </Link>
          </Grid>
          
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              {t('footer.company')}
            </Typography>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.about')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.terms')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.privacy')}
            </Link>
            <Link href="#" color="inherit" display="block" sx={{ mb: 1 }}>
              {t('footer.help')}
            </Link>
          </Grid>
          
          <Grid size={{ xs: 12, sm: 6, md: 3 }}>
            <Typography variant="h6" gutterBottom>
              {t('footer.contact')}
            </Typography>
            <Box display="flex" alignItems="center" sx={{ mb: 1 }}>
              <Email sx={{ mr: 1, fontSize: 'small' }} />
              <Typography variant="body2">{t('footer.email')}</Typography>
            </Box>
            <Box display="flex" alignItems="center" sx={{ mb: 1 }}>
              <Phone sx={{ mr: 1, fontSize: 'small' }} />
              <Typography variant="body2">{t('footer.phone')}</Typography>
            </Box>
            <Box display="flex" alignItems="center">
              <LocationOn sx={{ mr: 1, fontSize: 'small' }} />
              <Typography variant="body2">{t('footer.address')}</Typography>
            </Box>
          </Grid>
        </Grid>
        
        <Box
          sx={{
            borderTop: 1,
            borderColor: 'grey.700',
            pt: 3,
            mt: 4,
            textAlign: 'center',
          }}
        >
          <Typography variant="body2" color="grey.400">
            {t('footer.rights')}
          </Typography>
        </Box>
      </Container>
    </Box>
  );
};

export default Footer;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\auth\RegisterForm.jsx
```
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useAuth } from '../../context/AuthContext'; // Tu AuthContext existente
import {
  Box,
  Container,
  Card,
  CardContent,
  TextField,
  Button,
  Typography,
  Alert,
  InputAdornment,
  IconButton,
  FormControl,
  InputLabel,
  Select,
  MenuItem,
  FormHelperText,
  Divider,
  Grid,
  LinearProgress,
} from '@mui/material';
import { 
  Visibility, 
  VisibilityOff, 
  Email, 
  Lock, 
  Person,
  Phone,
  LocationOn,
  PersonAdd,
  Badge,
} from '@mui/icons-material';
import { useForm } from 'react-hook-form';
import { yupResolver } from '@hookform/resolvers/yup';
import * as yup from 'yup';

const schema = yup.object().shape({
  nombre: yup.string().required('Nombre es requerido'),
  apellido: yup.string().required('Apellido es requerido'),
  email: yup.string().email('Email inv√°lido').required('Email es requerido'),
  telefono: yup.string()
    .matches(/^[0-9]{8}$/, 'El tel√©fono debe tener 8 d√≠gitos')
    .required('Tel√©fono es requerido'),
  dui: yup.string()
    .matches(/^\d{8}-\d$/, 'El DUI debe tener el formato: 01234567-8')
    .optional(),
  departamento: yup.string().required('Departamento es requerido'),
  municipio: yup.string().required('Municipio es requerido'),
  direccion_detalle: yup.string().optional(),
  password: yup
    .string()
    .min(6, 'La contrase√±a debe tener al menos 6 caracteres')
    .required('Contrase√±a es requerida'),
  confirmPassword: yup
    .string()
    .oneOf([yup.ref('password')], 'Las contrase√±as deben coincidir')
    .required('Confirmar contrase√±a es requerido'),
  tipo_usuario: yup.string().oneOf(['cliente', 'trabajador']).required('Tipo de usuario es requerido'),
});

const departamentosSV = [
  'Ahuachap√°n', 'Caba√±as', 'Chalatenango', 'Cuscatl√°n', 'La Libertad',
  'La Paz', 'La Uni√≥n', 'Moraz√°n', 'San Miguel', 'San Salvador',
  'San Vicente', 'Santa Ana', 'Sonsonate', 'Usulut√°n'
];

// Municipios por departamento (algunos ejemplos principales)
const municipiosPorDepartamento = {
  'San Salvador': [
    'San Salvador', 'Mejicanos', 'Soyapango', 'Apopa', 'Delgado', 
    'Ilopango', 'San Marcos', 'Ayutuxtepeque', 'Cuscatancingo'
  ],
  'La Libertad': [
    'Santa Tecla', 'Antiguo Cuscatl√°n', 'Nuevo Cuscatl√°n', 
    'San Juan Opico', 'Col√≥n', 'La Libertad', 'Quezaltepeque'
  ],
  'Santa Ana': [
    'Santa Ana', 'Metap√°n', 'Chalchuapa', 'Candelaria de la Frontera',
    'Coatepeque', 'El Congo', 'Texistepeque'
  ],
  'San Miguel': [
    'San Miguel', 'Usulut√°n', 'Santiago de Mar√≠a', 'Chinameca',
    'Nueva Guadalupe', 'San Rafael Oriente'
  ],
  'Sonsonate': [
    'Sonsonate', 'Acajutla', 'Izalco', 'Nahuizalco',
    'Sonzacate', 'Armenia', 'Caluco'
  ],
  // Agregar m√°s seg√∫n necesites o cargar din√°micamente
};

const RegisterForm = () => {
  const [showPassword, setShowPassword] = useState(false);
  const [showConfirmPassword, setShowConfirmPassword] = useState(false);
  const { register: registerUser, loading, error, clearError } = useAuth();
  const navigate = useNavigate();

  const {
    register,
    handleSubmit,
    watch,
    setValue,
    formState: { errors },
  } = useForm({
    resolver: yupResolver(schema),
    defaultValues: {
      tipo_usuario: 'cliente',
    },
  });

  const watchTipo = watch('tipo_usuario');
  const watchDepartamento = watch('departamento');

  // Limpiar municipio cuando cambia el departamento
  React.useEffect(() => {
    if (watchDepartamento) {
      setValue('municipio', '');
    }
  }, [watchDepartamento, setValue]);

  // Limpiar errores cuando el usuario empiece a escribir
  React.useEffect(() => {
    if (error) {
      const timer = setTimeout(() => {
        clearError();
      }, 8000); // Auto-limpiar despu√©s de 8 segundos

      return () => clearTimeout(timer);
    }
  }, [error, clearError]);

  const onSubmit = async (data) => {
  try {
    console.log('üöÄ Iniciando registro para:', data.email);
    
    // Limpiar errores previos
    clearError();
    
    // ‚úÖ CORRECCI√ìN: El backend espera campos separados, no un objeto direccion
    const { confirmPassword, direccion_detalle, ...userData } = data;
    
    const registrationData = {
      ...userData,
      // direccion como string simple (si existe)
      direccion: direccion_detalle || '',
      // departamento y municipio ya vienen en userData
    };
    
    console.log('üì§ Enviando datos:', registrationData);
    
    await registerUser(registrationData);
    
    console.log('‚úÖ Registro exitoso');
    
    navigate('/login', { 
      state: { 
        message: '¬°Registro exitoso! Por favor inicia sesi√≥n con tus credenciales.',
        email: data.email
      } 
    });
  } catch (error) {
    console.error('‚ùå Error en registro:', error);
    // El error ya se maneja en el AuthContext
  }
};

  return (
    <Container maxWidth="md" sx={{ py: 4 }}>
      <Card elevation={3}>
        <CardContent sx={{ p: 4 }}>
          {/* Header */}
          <Box textAlign="center" mb={3}>
            <PersonAdd color="primary" sx={{ fontSize: 48, mb: 2 }} />
            <Typography variant="h4" component="h1" gutterBottom>
              Crear Cuenta
            </Typography>
            <Typography variant="body2" color="text.secondary">
              √önete a la comunidad de ChambingApp
            </Typography>
          </Box>
          
          {/* Loading bar */}
          {loading && (
            <Box sx={{ width: '100%', mb: 2 }}>
              <LinearProgress />
            </Box>
          )}
          
          {/* Error message */}
          {error && (
            <Alert severity="error" sx={{ mb: 2 }} onClose={clearError}>
              {error}
            </Alert>
          )}

          <form onSubmit={handleSubmit(onSubmit)}>
            {/* Tipo de usuario */}
            <FormControl fullWidth margin="normal" error={!!errors.tipo_usuario}>
              <InputLabel>Tipo de Usuario</InputLabel>
              <Select
                {...register('tipo_usuario')}
                label="Tipo de Usuario"
                defaultValue="cliente"
              >
                <MenuItem value="cliente">
                  Cliente - Busco servicios
                </MenuItem>
                <MenuItem value="trabajador">
                  Trabajador - Ofrezco servicios
                </MenuItem>
              </Select>
              <FormHelperText>
                {errors.tipo_usuario?.message || 
                 (watchTipo === 'cliente' ? 
                   'Podr√°s contratar servicios dom√©sticos y de construcci√≥n' : 
                   'Podr√°s ofrecer tus servicios y recibir trabajos')}
              </FormHelperText>
            </FormControl>

            {/* Informaci√≥n personal */}
            <Typography variant="h6" sx={{ mt: 3, mb: 1 }}>
              Informaci√≥n Personal
            </Typography>
            
            <Grid container spacing={2}>
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('nombre')}
                  fullWidth
                  label="Nombre"
                  error={!!errors.nombre}
                  helperText={errors.nombre?.message}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Person />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>
              
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('apellido')}
                  fullWidth
                  label="Apellido"
                  error={!!errors.apellido}
                  helperText={errors.apellido?.message}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Person />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>
            </Grid>

            {/* Email */}
            <TextField
              {...register('email')}
              fullWidth
              label="Correo Electr√≥nico"
              type="email"
              error={!!errors.email}
              helperText={errors.email?.message}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Email />
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            <Grid container spacing={2}>
              {/* Tel√©fono */}
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('telefono')}
                  fullWidth
                  label="Tel√©fono"
                  placeholder="12345678"
                  error={!!errors.telefono}
                  helperText={errors.telefono?.message || 'Sin guiones ni espacios'}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Phone />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>

              {/* DUI */}
              <Grid item xs={12} sm={6}>
                <TextField
                  {...register('dui')}
                  fullWidth
                  label="DUI (Opcional)"
                  placeholder="01234567-8"
                  error={!!errors.dui}
                  helperText={errors.dui?.message || 'Formato: 01234567-8'}
                  InputProps={{
                    startAdornment: (
                      <InputAdornment position="start">
                        <Badge />
                      </InputAdornment>
                    ),
                  }}
                  margin="normal"
                />
              </Grid>
            </Grid>

            {/* Ubicaci√≥n */}
            <Typography variant="h6" sx={{ mt: 3, mb: 1 }}>
              Ubicaci√≥n
            </Typography>
            
            <Grid container spacing={2}>
              <Grid item xs={12} sm={6}>
                <FormControl fullWidth margin="normal" error={!!errors.departamento}>
                  <InputLabel>Departamento</InputLabel>
                  <Select
                    {...register('departamento')}
                    label="Departamento"
                  >
                    {departamentosSV.map((dep) => (
                      <MenuItem key={dep} value={dep}>
                        {dep}
                      </MenuItem>
                    ))}
                  </Select>
                  <FormHelperText>
                    {errors.departamento?.message}
                  </FormHelperText>
                </FormControl>
              </Grid>

              <Grid item xs={12} sm={6}>
                <FormControl fullWidth margin="normal" error={!!errors.municipio}>
                  <InputLabel>Municipio</InputLabel>
                  <Select
                    {...register('municipio')}
                    label="Municipio"
                    disabled={!watchDepartamento}
                  >
                    {watchDepartamento && municipiosPorDepartamento[watchDepartamento] ? 
                     municipiosPorDepartamento[watchDepartamento].map((mun) => (
                      <MenuItem key={mun} value={mun}>
                        {mun}
                      </MenuItem>
                    )) : 
                    <MenuItem value="">
                      {!watchDepartamento ? 'Selecciona un departamento primero' : 'Municipio no disponible en la lista'}
                    </MenuItem>
                    }
                  </Select>
                  <FormHelperText>
                    {errors.municipio?.message || 
                     (!watchDepartamento ? 'Selecciona primero un departamento' : '')}
                  </FormHelperText>
                </FormControl>
              </Grid>
            </Grid>

            {/* Direcci√≥n detalle */}
            <TextField
              {...register('direccion_detalle')}
              fullWidth
              label="Direcci√≥n Detallada (Opcional)"
              placeholder="Colonia, calle, n√∫mero de casa, referencias..."
              multiline
              rows={2}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <LocationOn />
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            {/* Contrase√±as */}
            <Typography variant="h6" sx={{ mt: 3, mb: 1 }}>
              Seguridad
            </Typography>
            
            <TextField
              {...register('password')}
              fullWidth
              label="Contrase√±a"
              type={showPassword ? 'text' : 'password'}
              error={!!errors.password}
              helperText={errors.password?.message}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Lock />
                  </InputAdornment>
                ),
                endAdornment: (
                  <InputAdornment position="end">
                    <IconButton
                      onClick={() => setShowPassword(!showPassword)}
                      edge="end"
                    >
                      {showPassword ? <VisibilityOff /> : <Visibility />}
                    </IconButton>
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            <TextField
              {...register('confirmPassword')}
              fullWidth
              label="Confirmar Contrase√±a"
              type={showConfirmPassword ? 'text' : 'password'}
              error={!!errors.confirmPassword}
              helperText={errors.confirmPassword?.message}
              InputProps={{
                startAdornment: (
                  <InputAdornment position="start">
                    <Lock />
                  </InputAdornment>
                ),
                endAdornment: (
                  <InputAdornment position="end">
                    <IconButton
                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                      edge="end"
                    >
                      {showConfirmPassword ? <VisibilityOff /> : <Visibility />}
                    </IconButton>
                  </InputAdornment>
                ),
              }}
              margin="normal"
            />

            {/* Informaci√≥n para trabajadores */}
            {watchTipo === 'trabajador' && (
              <Alert severity="info" sx={{ mt: 2 }}>
                <Typography variant="body2">
                  <strong>Para trabajadores:</strong> Despu√©s del registro podr√°s subir tu foto de perfil 
                  desde tu perfil. La foto es obligatoria para ofrecer servicios en la plataforma.
                </Typography>
              </Alert>
            )}
            
            <Button
              type="submit"
              fullWidth
              variant="contained"
              size="large"
              disabled={loading}
              sx={{ mt: 3, mb: 2, py: 1.5 }}
            >
              {loading ? 'Creando cuenta...' : 'Crear Cuenta'}
            </Button>

            <Divider sx={{ my: 2 }}>
              <Typography variant="body2" color="text.secondary">
                o
              </Typography>
            </Divider>

            <Box textAlign="center">
              <Typography variant="body2">
                ¬øYa tienes cuenta?{' '}
                <Link 
                  to="/login" 
                  style={{ 
                    color: '#2563eb',
                    textDecoration: 'none',
                    fontWeight: 'bold'
                  }}
                >
                  Inicia sesi√≥n aqu√≠
                </Link>
              </Typography>
            </Box>
          </form>
        </CardContent>
      </Card>
    </Container>
  );
};

export default RegisterForm;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\common\navbar.jsx
```
import React, { useState } from 'react';
import { useNavigate, Link } from 'react-router-dom';
import { useTranslations } from '../../hooks/useTranslations';
import {
  AppBar,
  Toolbar,
  Typography,
  Button,
  Box,
  IconButton,
  Menu,
  MenuItem,
  Avatar,
  useTheme,
  useMediaQuery,
  Drawer,
  List,
  ListItem,
  ListItemText,
  Divider,
  Fade,
} from '@mui/material';
import {
  Menu as MenuIcon,
  AccountCircle,
  Logout,
  Dashboard,
  Work,
  Home as HomeIcon,
  Person,
} from '@mui/icons-material';
import { useAuth } from '../../context/AuthContext';
import LanguageSelector from './LanguageSelector';

const Navbar = () => {
  const { user, isAuthenticated, logout } = useAuth();
  const { nav } = useTranslations();
  const navigate = useNavigate();
  const theme = useTheme();
  const isMobile = useMediaQuery(theme.breakpoints.down('md'));
  
  const [anchorEl, setAnchorEl] = useState(null);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

  const handleMenuOpen = (event) => {
    setAnchorEl(event.currentTarget);
  };

  const handleMenuClose = () => {
    setAnchorEl(null);
  };

  const handleLogout = async () => {
    await logout();
    handleMenuClose();
  };

  const handleMobileMenuToggle = () => {
    setMobileMenuOpen(!mobileMenuOpen);
  };

  // Men√∫s con traducciones e iconos
  const menuItems = [
    { label: nav.home, path: '/', icon: <HomeIcon /> },
    { label: nav.services, path: '/service', icon: <Work /> },
  ];

  const authMenuItems = isAuthenticated
    ? [
        { label: nav.dashboard, path: '/dashboard', icon: <Dashboard /> },
        { label: nav.profile, path: '/perfil', icon: <Person /> },
      ]
    : [
        { label: nav.login, path: '/login', icon: null },
        { label: nav.register, path: '/register', icon: null },
      ];

  // Logo mejorado con mejor tama√±o y centrado
  const ChambingLogo = ({ size = 'normal' }) => (
    <Box
      component={Link}
      to="/"
      className="chambing-brand-container"
      sx={{
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'flex-start',
        textDecoration: 'none',
        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
        '&:hover': {
          transform: 'scale(1.03)',
        },
      }}
    >
      <Box
        component="img"
        src="/LogoChambing.png"
        alt="ChambingApp Logo"
        className="chambing-brand-logo"
        sx={{
          height: {
            xs: size === 'small' ? 48 : 56, // M√≥vil m√°s grande
            sm: size === 'small' ? 52 : 64, // Tablet
            md: size === 'small' ? 56 : 72, // Desktop
          },
          width: 'auto',
          maxWidth: '200px',
          objectFit: 'contain',
          transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
          filter: 'drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1))',
          '&:hover': {
            filter: 'drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15)) brightness(1.05)',
          },
        }}
        onError={(e) => {
          // Fallback elegante si no carga la imagen
          e.target.style.display = 'none';
          e.target.nextSibling.style.display = 'block';
        }}
      />
      {/* Fallback text mejorado */}
      <Typography
        variant="h5"
        className="chambing-brand-text-fallback"
        sx={{
          display: 'none',
          fontWeight: 700,
          color: 'text.primary',
          letterSpacing: '0.5px',
          fontFamily: '"Inter", "Roboto", sans-serif',
        }}
      >
        Chambing
      </Typography>
    </Box>
  );

  const MobileNavigationDrawer = () => (
    <Drawer
      anchor="left"
      open={mobileMenuOpen}
      onClose={handleMobileMenuToggle}
      className="chambing-mobile-drawer"
      PaperProps={{
        sx: {
          width: 300,
          backgroundColor: 'background.paper',
          boxShadow: '0 8px 32px rgba(0, 0, 0, 0.12)',
          borderRadius: '0 16px 16px 0',
        }
      }}
    >
      <Box sx={{ pt: 4, pb: 2 }}>
        {/* Logo en el drawer m√≥vil - m√°s grande */}
        <Box 
          className="chambing-mobile-brand-section"
          sx={{ 
            px: 3, 
            pb: 3, 
            display: 'flex', 
            justifyContent: 'center',
            alignItems: 'center',
            minHeight: '80px'
          }}
        >
          <ChambingLogo size="small" />
        </Box>
        
        <Divider sx={{ opacity: 0.1 }} />
        
        <List sx={{ pt: 2, px: 2 }}>
          {[...menuItems, ...authMenuItems].map((item, index) => (
            <ListItem
              button
              key={index}
              component={Link}
              to={item.path}
              onClick={handleMobileMenuToggle}
              className="chambing-mobile-nav-item"
              sx={{
                borderRadius: 3,
                mb: 1,
                py: 1.5,
                transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                '&:hover': {
                  backgroundColor: 'rgba(0, 0, 0, 0.04)',
                  transform: 'translateX(6px)',
                  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',
                },
              }}
            >
              {item.icon && (
                <Box 
                  className="chambing-mobile-nav-icon"
                  sx={{ 
                    mr: 2.5, 
                    color: 'text.secondary',
                    minWidth: 28,
                    display: 'flex',
                    justifyContent: 'center'
                  }}
                >
                  {item.icon}
                </Box>
              )}
              <ListItemText 
                primary={item.label}
                primaryTypographyProps={{
                  fontWeight: 600,
                  fontSize: '1rem',
                  color: 'text.primary'
                }}
              />
            </ListItem>
          ))}
          
          {isAuthenticated && (
            <>
              <Divider sx={{ my: 3, opacity: 0.1 }} />
              <ListItem 
                button 
                onClick={handleLogout}
                className="chambing-mobile-logout-item"
                sx={{
                  borderRadius: 3,
                  py: 1.5,
                  transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                  '&:hover': {
                    backgroundColor: 'rgba(244, 67, 54, 0.08)',
                    transform: 'translateX(6px)',
                    boxShadow: '0 2px 8px rgba(244, 67, 54, 0.2)',
                  },
                }}
              >
                <Box 
                  className="chambing-mobile-logout-icon"
                  sx={{ 
                    mr: 2.5, 
                    color: 'error.main',
                    minWidth: 28,
                    display: 'flex',
                    justifyContent: 'center'
                  }}
                >
                  <Logout />
                </Box>
                <ListItemText 
                  primary={nav.logout}
                  primaryTypographyProps={{
                    fontWeight: 600,
                    fontSize: '1rem',
                    color: 'error.main'
                  }}
                />
              </ListItem>
            </>
          )}
        </List>
        
        <Box sx={{ px: 3, pt: 3 }}>
          <LanguageSelector variant="button" />
        </Box>
      </Box>
    </Drawer>
  );

  // Avatar mejorado con mejores efectos
  const UserProfileAvatar = ({ size = 40 }) => {
    if (user?.foto_perfil) {
      return (
        <Avatar 
          src={user.foto_perfil} 
          alt={user.nombre}
          className="chambing-user-avatar-image"
          sx={{ 
            width: size, 
            height: size,
            border: '2px solid rgba(0, 0, 0, 0.08)',
            transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
            '&:hover': {
              transform: 'scale(1.08)',
              boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',
              borderColor: 'primary.main',
            }
          }}
          onError={(e) => {
            e.target.style.display = 'none';
          }}
        />
      );
    }
    
    return (
      <Avatar 
        className="chambing-user-avatar-default"
        sx={{ 
          width: size, 
          height: size,
          bgcolor: 'grey.700',
          border: '2px solid rgba(0, 0, 0, 0.08)',
          transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
          '&:hover': {
            transform: 'scale(1.08)',
            boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',
            borderColor: 'primary.main',
          }
        }}
      >
        {user?.nombre?.charAt(0) || <AccountCircle />}
      </Avatar>
    );
  };

  return (
    <>
      <AppBar 
        position="sticky" 
        elevation={0}
        className="chambing-main-appbar"
        sx={{
          backgroundColor: 'background.paper',
          borderBottom: '1px solid rgba(0, 0, 0, 0.08)',
          backdropFilter: 'blur(12px)',
        }}
      >
        <Toolbar 
          className="chambing-main-toolbar"
          sx={{ 
            minHeight: { xs: 72, sm: 80, md: 100 }, // Toolbar m√°s alto para acomodar logo m√°s grande
            px: { xs: 2, sm: 3, md: 4 },
            justifyContent: 'space-between',
            alignItems: 'center'
          }}
        >
          {isMobile && (
            <IconButton
              edge="start"
              onClick={handleMobileMenuToggle}
              className="chambing-mobile-menu-trigger"
              sx={{ 
                mr: 2,
                color: 'text.primary',
                '&:hover': {
                  backgroundColor: 'rgba(0, 0, 0, 0.04)',
                  transform: 'scale(1.05)',
                },
                transition: 'all 0.2s ease-in-out',
              }}
            >
              <MenuIcon />
            </IconButton>
          )}
          
          {/* Logo principal con mejor posicionamiento */}
          <Box 
            className="chambing-brand-section"
            sx={{ 
              flexGrow: 1,
              display: 'flex',
              alignItems: 'center',
              justifyContent: isMobile ? 'center' : 'flex-start',
              minHeight: '80px'
            }}
          >
            <ChambingLogo />
          </Box>

          {!isMobile && (
            <Box 
              className="chambing-desktop-nav-section"
              sx={{ display: 'flex', alignItems: 'center', gap: 1 }}
            >
              {/* Men√∫ principal */}
              {menuItems.map((item, index) => (
                <Button
                  key={index}
                  component={Link}
                  to={item.path}
                  startIcon={item.icon}
                  className="chambing-nav-button"
                  sx={{
                    color: 'text.primary',
                    textTransform: 'none',
                    fontWeight: 600,
                    fontSize: '0.95rem',
                    px: 3,
                    py: 1.5,
                    borderRadius: 3,
                    transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                    '&:hover': {
                      backgroundColor: 'rgba(0, 0, 0, 0.04)',
                      transform: 'translateY(-2px)',
                      boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',
                    },
                  }}
                >
                  {item.label}
                </Button>
              ))}
              
              {isAuthenticated ? (
                <>
                  <Button
                    component={Link}
                    to="/dashboard"
                    startIcon={<Dashboard />}
                    className="chambing-dashboard-button"
                    sx={{
                      color: 'text.primary',
                      textTransform: 'none',
                      fontWeight: 600,
                      fontSize: '0.95rem',
                      px: 3,
                      py: 1.5,
                      borderRadius: 3,
                      ml: 1,
                      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                      '&:hover': {
                        backgroundColor: 'rgba(0, 0, 0, 0.04)',
                        transform: 'translateY(-2px)',
                        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',
                      },
                    }}
                  >
                    {nav.dashboard}
                  </Button>
                  
                  <Box sx={{ mx: 2 }}>
                    <LanguageSelector variant="icon" size="medium" />
                  </Box>
                  
                  <IconButton 
                    onClick={handleMenuOpen}
                    className="chambing-profile-trigger"
                    sx={{ ml: 1 }}
                  >
                    <UserProfileAvatar size={40} />
                  </IconButton>
                </>
              ) : (
                <>
                  <Box sx={{ mx: 2 }}>
                    <LanguageSelector variant="icon" size="medium" />
                  </Box>
                  
                  <Button 
                    component={Link} 
                    to="/login"
                    className="chambing-login-button"
                    sx={{
                      color: 'text.primary',
                      textTransform: 'none',
                      fontWeight: 600,
                      fontSize: '0.95rem',
                      px: 3,
                      py: 1.5,
                      borderRadius: 3,
                      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                      '&:hover': {
                        backgroundColor: 'rgba(0, 0, 0, 0.04)',
                        transform: 'translateY(-2px)',
                        boxShadow: '0 4px 12px rgba(0, 0, 0, 0.1)',
                      },
                    }}
                  >
                    {nav.login}
                  </Button>
                  
                  <Button
                    variant="contained"
                    component={Link}
                    to="/register"
                    className="chambing-register-button"
                    sx={{ 
                      ml: 2,
                      textTransform: 'none',
                      fontWeight: 700,
                      fontSize: '0.95rem',
                      px: 4,
                      py: 1.5,
                      borderRadius: 3,
                      backgroundColor: 'text.primary',
                      color: 'background.paper',
                      boxShadow: 'none',
                      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
                      '&:hover': {
                        backgroundColor: 'text.secondary',
                        boxShadow: '0 6px 20px rgba(0, 0, 0, 0.15)',
                        transform: 'translateY(-2px)',
                      },
                    }}
                  >
                    {nav.register}
                  </Button>
                </>
              )}
            </Box>
          )}
          
          {/* Selector de idioma para m√≥vil solo si no est√° autenticado */}
          {isMobile && !isAuthenticated && (
            <LanguageSelector variant="icon" size="small" />
          )}
        </Toolbar>
      </AppBar>

      {/* Men√∫ de perfil mejorado */}
      <Menu
        anchorEl={anchorEl}
        open={Boolean(anchorEl)}
        onClose={handleMenuClose}
        TransitionComponent={Fade}
        className="chambing-profile-dropdown"
        PaperProps={{
          elevation: 12,
          sx: {
            mt: 1.5,
            minWidth: 260,
            borderRadius: 4,
            backgroundColor: 'background.paper',
            border: '1px solid rgba(0, 0, 0, 0.08)',
            boxShadow: '0 12px 40px rgba(0, 0, 0, 0.15)',
            '& .MuiMenuItem-root': {
              borderRadius: 3,
              margin: '4px 16px',
              fontWeight: 600,
              fontSize: '0.95rem',
              transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
              '&:hover': {
                backgroundColor: 'rgba(0, 0, 0, 0.04)',
                transform: 'translateX(4px)',
                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',
              },
            },
          },
        }}
      >
        {/* Header del men√∫ con info del usuario */}
        {user && (
          <Box 
            className="chambing-profile-header"
            sx={{ 
              px: 4, 
              py: 3, 
              borderBottom: '1px solid rgba(0, 0, 0, 0.08)',
              backgroundColor: 'rgba(0, 0, 0, 0.02)'
            }}
          >
            <Box sx={{ display: 'flex', alignItems: 'center', gap: 3 }}>
              <UserProfileAvatar size={48} />
              <Box>
                <Typography 
                  variant="subtitle1" 
                  className="chambing-profile-name"
                  sx={{ 
                    fontWeight: 700,
                    color: 'text.primary',
                    mb: 0.5,
                    fontSize: '1.1rem'
                  }}
                >
                  {user.nombre}
                </Typography>
                <Typography 
                  variant="caption" 
                  className="chambing-profile-email"
                  sx={{ 
                    color: 'text.secondary',
                    fontSize: '0.8rem'
                  }}
                >
                  {user.email}
                </Typography>
              </Box>
            </Box>
          </Box>
        )}
        
        <MenuItem 
          component={Link} 
          to="/perfil" 
          onClick={handleMenuClose}
          className="chambing-profile-menu-item"
          sx={{ mt: 1 }}
        >
          <Person sx={{ 
            fontSize: '1.3em', 
            mr: 2, 
            color: 'text.secondary' 
          }} />
          {nav.profile}
        </MenuItem>
        
        <MenuItem 
          onClick={handleLogout}
          className="chambing-logout-menu-item"
          sx={{ color: 'error.main' }}
        >
          <Logout sx={{ fontSize: '1.3em', mr: 2 }} />
          {nav.logout}
        </MenuItem>
      </Menu>

      <MobileNavigationDrawer />
    </>
  );
};

export default Navbar;
```

## c:\Users\rexma\Desktop\chambing-website\src\styles\navbar.scss
```
// Variables de colores elegantes y neutros
:root {
  --chambing-primary: #1a1a1a;
  --chambing-secondary: #666666;
  --chambing-light-gray: #f8f9fa;
  --chambing-border: rgba(0, 0, 0, 0.08);
  --chambing-hover: rgba(0, 0, 0, 0.04);
  --chambing-shadow: rgba(0, 0, 0, 0.12);
  --chambing-text: #2c3e50;
  --chambing-text-light: #6c757d;
  --chambing-brand-shadow: rgba(0, 0, 0, 0.15);
}

// Mixins elegantes y minimalistas
@mixin elegant-shadow {
  box-shadow: 0 6px 20px var(--chambing-shadow);
}

@mixin subtle-shadow {
  box-shadow: 0 3px 12px rgba(0, 0, 0, 0.08);
}

@mixin smooth-transition($duration: 0.3s) {
  transition: all #{$duration} cubic-bezier(0.4, 0, 0.2, 1);
}

@mixin hover-lift($lift: -2px) {
  &:hover {
    transform: translateY(#{$lift});
    @include subtle-shadow;
  }
}

@mixin glass-effect {
  backdrop-filter: blur(12px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid var(--chambing-border);
}

// Estilos principales del navbar con nuevos nombres de clases
.chambing-main-appbar {
  @include glass-effect;
  backdrop-filter: blur(16px);
  
  // Sombra sutil al hacer scroll
  &.scrolled {
    @include subtle-shadow;
    backdrop-filter: blur(20px);
  }
}

.chambing-main-toolbar {
  min-height: 96px !important; // Mucho m√°s alto para acomodar logo grande
  
  @media (max-width: 960px) {
    min-height: 88px !important;
  }
  
  @media (max-width: 768px) {
    min-height: 80px !important;
  }
  
  @media (max-width: 480px) {
    min-height: 76px !important;
  }
}

// Secci√≥n de la marca/logo mejorada
.chambing-brand-section {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  min-height: 80px;
  
  @media (max-width: 768px) {
    justify-content: center;
    min-height: 70px;
  }
  
  @media (max-width: 480px) {
    min-height: 60px;
  }
}

.chambing-brand-container {
  @include smooth-transition;
  display: flex;
  align-items: center;
  text-decoration: none;
  padding: 8px 12px;
  border-radius: 12px;
  
  &:hover {
    transform: scale(1.02);
    background: var(--chambing-hover);
    
    .chambing-brand-logo {
      filter: drop-shadow(0 4px 12px var(--chambing-brand-shadow)) brightness(1.05);
    }
  }
  
  &:active {
    transform: scale(0.98);
  }
}

.chambing-brand-logo {
  @include smooth-transition;
  filter: drop-shadow(0 2px 6px rgba(0, 0, 0, 0.1));
  max-height: 120px; // Logo mucho m√°s grande por defecto
  width: auto;
  max-width: 300px;
  object-fit: contain;
  
  @media (max-width: 1200px) {
    max-height: 100px;
    max-width: 280px;
  }
  
  @media (max-width: 960px) {
    max-height: 88px;
    max-width: 250px;
  }
  
  @media (max-width: 768px) {
    max-height: 76px;
    max-width: 220px;
  }
  
  @media (max-width: 480px) {
    max-height: 64px;
    max-width: 200px;
  }
}

.chambing-brand-text-fallback {
  font-family: 'Inter', 'Roboto', sans-serif;
  font-weight: 700;
  font-size: 1.8rem;
  letter-spacing: 0.5px;
  color: var(--chambing-primary);
  
  @media (max-width: 768px) {
    font-size: 1.6rem;
  }
  
  @media (max-width: 480px) {
    font-size: 1.4rem;
  }
}

// Navegaci√≥n desktop mejorada
.chambing-desktop-nav-section {
  display: flex;
  align-items: center;
  gap: 8px;
}

.chambing-nav-button {
  position: relative;
  @include smooth-transition;
  font-weight: 600 !important;
  padding: 12px 20px !important;
  border-radius: 12px !important;
  
  &::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 50%;
    width: 0;
    height: 2px;
    background: var(--chambing-primary);
    transform: translateX(-50%);
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 1px;
  }
  
  &:hover {
    @include hover-lift(-2px);
    
    &::after {
      width: 40%;
    }
  }
  
  &:active {
    transform: scale(0.98);
  }
}

.chambing-dashboard-button {
  @extend .chambing-nav-button;
  margin-left: 8px !important;
}

.chambing-login-button {
  @extend .chambing-nav-button;
}

.chambing-register-button {
  position: relative;
  overflow: hidden;
  font-weight: 700 !important;
  padding: 12px 24px !important;
  border-radius: 12px !important;
  @include smooth-transition;
  
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg, 
      transparent, 
      rgba(255, 255, 255, 0.2), 
      transparent
    );
    transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  &:hover {
    @include hover-lift(-2px);
    
    &::before {
      left: 100%;
    }
  }
}

// Avatares de usuario mejorados
.chambing-user-avatar-image,
.chambing-user-avatar-default {
  @include smooth-transition;
  border: 2px solid rgba(0, 0, 0, 0.08);
  
  &:hover {
    transform: scale(1.08);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    border-color: var(--chambing-primary);
  }
}

.chambing-profile-trigger {
  @include smooth-transition;
  
  &:hover {
    transform: scale(1.05);
    background: var(--chambing-hover);
  }
}

// Men√∫ m√≥vil mejorado
.chambing-mobile-drawer {
  .MuiDrawer-paper {
    @include elegant-shadow;
    border-radius: 0 20px 20px 0 !important;
    
    // Overlay sutil
    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(
        180deg,
        rgba(0, 0, 0, 0.02) 0%,
        transparent 25%
      );
      pointer-events: none;
      border-radius: inherit;
    }
  }
}

.chambing-mobile-brand-section {
  min-height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(
    135deg,
    var(--chambing-light-gray) 0%,
    rgba(255, 255, 255, 0.95) 100%
  );
  margin: 0 16px;
  border-radius: 12px;
  
  .chambing-brand-logo {
    max-height: 72px;
  }
}

.chambing-mobile-menu-trigger {
  @include smooth-transition;
  
  &:hover {
    transform: scale(1.05);
    background: var(--chambing-hover);
  }
}

.chambing-mobile-nav-item {
  position: relative;
  border-radius: 12px !important;
  margin-bottom: 8px !important;
  padding: 12px 16px !important;
  
  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0;
    height: 70%;
    background: var(--chambing-primary);
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 0 4px 4px 0;
  }
  
  &:hover {
    transform: translateX(8px);
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
    
    &::before {
      width: 4px;
    }
  }
}

.chambing-mobile-nav-icon {
  min-width: 28px;
  display: flex;
  justify-content: center;
  align-items: center;
  color: var(--chambing-secondary);
}

.chambing-mobile-logout-item {
  @extend .chambing-mobile-nav-item;
  
  &::before {
    background: #dc3545;
  }
  
  &:hover {
    background: rgba(244, 67, 54, 0.08) !important;
    box-shadow: 0 3px 12px rgba(244, 67, 54, 0.2);
  }
}

.chambing-mobile-logout-icon {
  @extend .chambing-mobile-nav-icon;
  color: #dc3545 !important;
}

// Men√∫ desplegable de perfil mejorado
.chambing-profile-dropdown {
  .MuiPaper-root {
    @include glass-effect;
    @include elegant-shadow;
    border-radius: 16px !important;
    
    // Animaci√≥n de entrada elegante
    animation: profileMenuFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
}

.chambing-profile-header {
  background: linear-gradient(
    135deg, 
    var(--chambing-light-gray) 0%, 
    rgba(255, 255, 255, 0.95) 100%
  );
  border-radius: 12px;
  margin: 8px;
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 1px;
    background: var(--chambing-border);
    opacity: 0.5;
  }
}

.chambing-profile-name {
  font-weight: 700 !important;
  font-size: 1.1rem !important;
  color: var(--chambing-text) !important;
}

.chambing-profile-email {
  font-size: 0.8rem !important;
  color: var(--chambing-text-light) !important;
  opacity: 0.8;
}

.chambing-profile-menu-item,
.chambing-logout-menu-item {
  position: relative;
  border-radius: 12px !important;
  margin: 4px 16px !important;
  padding: 12px 16px !important;
  font-weight: 600 !important;
  @include smooth-transition;
  
  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0;
    background: var(--chambing-primary);
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 12px 0 0 12px;
  }
  
  &:hover {
    transform: translateX(6px);
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
    
    &::before {
      width: 3px;
    }
  }
}

.chambing-logout-menu-item {
  &::before {
    background: #dc3545;
  }
  
  &:hover {
    background: rgba(244, 67, 54, 0.08) !important;
    box-shadow: 0 3px 12px rgba(244, 67, 54, 0.2) !important;
  }
}

// Selector de idioma mejorado
.language-selector {
  .MuiButton-root,
  .MuiIconButton-root {
    @include smooth-transition;
    border-radius: 12px !important;
    
    &:hover {
      transform: scale(1.05);
      background: var(--chambing-hover);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
  }
}

// Animaciones elegantes y sutiles
@keyframes profileMenuFadeIn {
  from {
    opacity: 0;
    transform: translate3d(0, -12px, 0) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0) scale(1);
  }
}

@keyframes slideInLeft {
  from {
    opacity: 0;
    transform: translate3d(-24px, 0, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes subtle-pulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.02);
  }
}

// Estados de loading elegantes
.chambing-loading-skeleton {
  background: linear-gradient(
    90deg, 
    #f0f0f0 25%, 
    #e8e8e8 50%, 
    #f0f0f0 75%
  );
  background-size: 200% 100%;
  animation: shimmer 2.5s infinite;
  border-radius: 8px;
}

@keyframes shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

// Estados de notificaci√≥n discretos
.chambing-notification-dot {
  position: relative;
  
  &::after {
    content: '';
    position: absolute;
    top: -3px;
    right: -3px;
    width: 8px;
    height: 8px;
    background: #dc3545;
    border: 2px solid white;
    border-radius: 50%;
    animation: subtle-pulse 3s infinite;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }
}

// Efectos de focus elegantes para accesibilidad
.chambing-main-appbar {
  .MuiButton-root:focus-visible,
  .MuiIconButton-root:focus-visible {
    outline: 2px solid var(--chambing-primary);
    outline-offset: 3px;
    border-radius: 8px;
  }
}

// Estados activos con mejor indicador
.chambing-nav-item-active {
  position: relative;
  background: var(--chambing-hover) !important;
  
  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 50%;
    transform: translateX(-50%);
    width: 24px;
    height: 3px;
    background: var(--chambing-primary);
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
  }
}

// Responsive design elegante con breakpoints mejorados
@media (max-width: 1200px) {
  .chambing-brand-logo {
    max-height: 100px;
    max-width: 280px;
  }
  
  .chambing-nav-button {
    padding: 10px 16px !important;
    font-size: 0.9rem !important;
  }
}

@media (max-width: 960px) {
  .chambing-main-toolbar {
    padding-left: 16px !important;
    padding-right: 16px !important;
    min-height: 88px !important;
  }
  
  .chambing-brand-logo {
    max-height: 88px;
    max-width: 250px;
  }
}

@media (max-width: 768px) {
  .chambing-main-toolbar {
    min-height: 80px !important;
    padding-left: 12px !important;
    padding-right: 12px !important;
  }
  
  .chambing-brand-section {
    justify-content: center;
    flex-grow: 1;
  }
  
  .chambing-brand-logo {
    max-height: 76px;
    max-width: 220px;
  }
  
  .chambing-mobile-drawer {
    .MuiDrawer-paper {
      width: 300px !important;
    }
  }
}

@media (max-width: 480px) {
  .chambing-main-toolbar {
    min-height: 76px !important;
    padding-left: 8px !important;
    padding-right: 8px !important;
  }
  
  .chambing-brand-logo {
    max-height: 64px;
    max-width: 200px;
  }
  
  .chambing-mobile-drawer {
    .MuiDrawer-paper {
      width: 280px !important;
    }
  }
  
  .chambing-mobile-brand-section {
    min-height: 90px;
    
    .chambing-brand-logo {
      max-height: 60px;
    }
  }
}

// Micro interacciones elegantes
@media (hover: hover) {
  .chambing-interactive-element {
    @include smooth-transition;
    
    &:hover {
      transform: translateY(-1px);
    }
    
    &:active {
      transform: translateY(1px);
    }
  }
}

// Tema oscuro elegante (opcional)
@media (prefers-color-scheme: dark) {
  :root {
    --chambing-primary: #ffffff;
    --chambing-secondary: #a0a0a0;
    --chambing-light-gray: #1e1e1e;
    --chambing-border: rgba(255, 255, 255, 0.08);
    --chambing-hover: rgba(255, 255, 255, 0.04);
    --chambing-shadow: rgba(0, 0, 0, 0.4);
    --chambing-text: #ffffff;
    --chambing-text-light: #a0a0a0;
    --chambing-brand-shadow: rgba(255, 255, 255, 0.1);
  }
  
  .chambing-main-appbar {
    background: rgba(18, 18, 18, 0.95) !important;
    border-color: var(--chambing-border);
  }
  
  .chambing-mobile-drawer {
    .MuiDrawer-paper {
      background: #1a1a1a !important;
      color: white !important;
    }
  }
  
  .chambing-profile-header,
  .chambing-mobile-brand-section {
    background: linear-gradient(
      135deg, 
      #2a2a2a 0%, 
      rgba(30, 30, 30, 0.95) 100%
    ) !important;
  }
  
  .chambing-brand-logo {
    filter: drop-shadow(0 2px 6px rgba(255, 255, 255, 0.1)) brightness(1.1);
  }
}

// Utilidades para spacing elegante
.chambing-spacing {
  &-xs { margin: 4px; }
  &-sm { margin: 8px; }
  &-md { margin: 16px; }
  &-lg { margin: 24px; }
  &-xl { margin: 32px; }
  &-xxl { margin: 48px; }
}

// Bordes elegantes
.chambing-border {
  border: 1px solid var(--chambing-border);
  border-radius: 12px;
}

.chambing-border-subtle {
  border: 1px solid rgba(0, 0, 0, 0.04);
  border-radius: 8px;
}

.chambing-border-top {
  border-top: 1px solid var(--chambing-border);
}

.chambing-border-bottom {
  border-bottom: 1px solid var(--chambing-border);
}

// Estados de hover personalizados
.chambing-hover-lift {
  @include smooth-transition;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
  }
}

.chambing-hover-scale {
  @include smooth-transition;
  
  &:hover {
    transform: scale(1.02);
  }
}
```

## c:\Users\rexma\Desktop\chambing-website\index.html
```
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChambingApp</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>

```

## c:\Users\rexma\Desktop\chambing-website\src\context\AuthContext.jsx
```
import React, { createContext, useContext, useState, useReducer, useEffect } from 'react';
import { authService } from '../services/authService'; 

const AuthContext = createContext();

// Debug: Verificar m√∫ltiples instancias
console.log('üîç AuthContext module loaded:', new Date().toISOString());

const authReducer = (state, action) => {
  switch (action.type) {
    case 'LOGIN_START':
      return { ...state, loading: true, error: null };
      
    case 'LOGIN_SUCCESS':
      // Validaci√≥n para evitar el error
      if (!action.payload) {
        console.error('‚ùå LOGIN_SUCCESS: payload es undefined');
        return {
          ...state,
          loading: false,
          error: 'Error en la respuesta del servidor',
          isAuthenticated: false,
        };
      }
      
      // ‚≠ê SOLUCI√ìN: Guardar token en localStorage
      const token = action.payload.access_token || action.payload.token;
      const user = action.payload.user;
      
      if (token) {
        localStorage.setItem('token', token);
        console.log('‚úÖ Token guardado en localStorage:', token.substring(0, 20) + '...');
      }
      
      if (user) {
        localStorage.setItem('user', JSON.stringify(user));
        console.log('‚úÖ Usuario guardado en localStorage:', user.email);
      }
      
      return {
        ...state,
        loading: false,
        user: user || null,
        token: token || null,
        isAuthenticated: true,
        error: null,
      };
      
    case 'LOGIN_FAILURE':
      return {
        ...state,
        loading: false,
        error: action.payload,
        isAuthenticated: false,
      };
      
    case 'LOGOUT':
      // ‚≠ê Limpiar localStorage en logout
      localStorage.removeItem('token');
      localStorage.removeItem('user');
      console.log('üö™ Token y usuario removidos del localStorage');
      
      return {
        ...state,
        user: null,
        token: null,
        isAuthenticated: false,
        loading: false,
        error: null,
      };
      
    case 'SET_USER':
      return {
        ...state,
        user: action.payload,
      };
      
    case 'UPDATE_USER':
      // Actualizar usuario y guardarlo en localStorage
      const updatedUser = {
        ...state.user,
        ...action.payload
      };
      
      localStorage.setItem('user', JSON.stringify(updatedUser));
      console.log('üîÑ Usuario actualizado en localStorage');
      
      return {
        ...state,
        user: updatedUser
      };
      
    case 'REFRESH_USER_START':
      return {
        ...state,
        loading: true
      };
      
    case 'REFRESH_USER_SUCCESS':
      // Guardar usuario actualizado en localStorage
      if (action.payload) {
        localStorage.setItem('user', JSON.stringify(action.payload));
        console.log('‚úÖ Usuario actualizado desde servidor');
      }
      
      return {
        ...state,
        loading: false,
        user: action.payload,
        error: null
      };
      
    case 'REFRESH_USER_FAILURE':
      return {
        ...state,
        loading: false,
        error: action.payload
      };
      
    case 'SET_LOADING':
      return {
        ...state,
        loading: action.payload,
      };
      
    case 'SET_ERROR':
      return {
        ...state,
        error: action.payload,
        loading: false,
      };
      
    case 'CLEAR_ERROR':
      return {
        ...state,
        error: null,
      };
      
    // ‚≠ê NUEVO: Para inicializaci√≥n desde localStorage
    case 'INIT_FROM_STORAGE':
      return {
        ...state,
        user: action.payload.user,
        token: action.payload.token,
        isAuthenticated: true,
        loading: false,
        error: null,
      };
      
    case 'INIT_COMPLETE':
      return {
        ...state,
        loading: false,
      };
      
    default:
      return state;
  }
};

const initialState = {
  user: null,
  token: null,
  isAuthenticated: false,
  loading: true, // ‚≠ê IMPORTANTE: Empezar con loading=true para evitar redirects prematuros
  error: null,
};

export const AuthProvider = ({ children }) => {
  console.log('üîç AuthProvider renderizado');
  const [state, dispatch] = useReducer(authReducer, initialState);

  // Nueva funci√≥n: Refrescar datos del usuario desde el servidor
  const refreshUser = async () => {
    const token = state.token || localStorage.getItem('token');
    
    if (!token) {
      console.log('üîí No token available for refresh');
      return;
    }

    dispatch({ type: 'REFRESH_USER_START' });
    
    try {
      console.log('üîÑ Refreshing user data from server...');
      
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/me`,
        {
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json',
          },
        }
      );

      if (!response.ok) {
        if (response.status === 401) {
          // Token expirado, cerrar sesi√≥n
          console.log('üîí Token expired, logging out');
          dispatch({ type: 'LOGOUT' });
          return;
        }
        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
      }

      const userData = await response.json();
      console.log('‚úÖ User data refreshed:', {
        id: userData.data?.id,
        email: userData.data?.email,
        hasFoto: !!userData.data?.foto_perfil,
        fotoUrl: userData.data?.foto_perfil || 'No photo'
      });

      dispatch({
        type: 'REFRESH_USER_SUCCESS',
        payload: userData.data
      });

    } catch (error) {
      console.error('‚ùå Error refreshing user:', error);
      dispatch({
        type: 'REFRESH_USER_FAILURE',
        payload: error.message
      });
    }
  };

  // Nueva funci√≥n: Debug del estado del usuario
  const debugUserState = async () => {
    const token = state.token || localStorage.getItem('token');
    
    if (!token) {
      console.log('üêõ Debug: No token available');
      return { error: 'No token available' };
    }

    try {
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/debug`,
        {
          headers: {
            'Authorization': `Bearer ${token}`,
          },
        }
      );

      if (response.ok) {
        const debugData = await response.json();
        console.log('üêõ Debug data from server:', debugData);
        return debugData;
      } else {
        console.error('üêõ Debug request failed:', response.status);
        return { error: `HTTP ${response.status}` };
      }
    } catch (error) {
      console.error('üêõ Debug error:', error);
      return { error: error.message };
    }
  };

  // ‚≠ê INICIALIZACI√ìN MEJORADA
  useEffect(() => {
    const initializeAuth = async () => {
      const token = localStorage.getItem('token');
      const storedUser = localStorage.getItem('user');
      
      console.log('üîç Inicializando auth...', {
        hasToken: !!token,
        hasStoredUser: !!storedUser,
        tokenPreview: token ? token.substring(0, 20) + '...' : 'No token'
      });
      
      if (token) {
        console.log('üîç Found stored token, initializing auth...');
        
        // Si hay usuario en localStorage, restaurar estado inmediatamente
        if (storedUser) {
          try {
            const user = JSON.parse(storedUser);
            console.log('‚úÖ Restored user from localStorage:', user.email);
            
            // ‚≠ê Restaurar estado completo desde localStorage
            dispatch({
              type: 'INIT_FROM_STORAGE',
              payload: { token, user }
            });
            
            // Despu√©s, refrescar datos del servidor en background
            setTimeout(async () => {
              try {
                await refreshUser();
              } catch (error) {
                console.error('‚ùå Error refreshing user in background:', error);
                // Si falla la verificaci√≥n del token, limpiar todo
                if (error.message.includes('401') || error.message.includes('Token')) {
                  console.log('üîí Token invalid, logging out');
                  dispatch({ type: 'LOGOUT' });
                }
              }
            }, 100);
            
          } catch (error) {
            console.error('‚ùå Error parsing stored user:', error);
            // Si hay error parseando, limpiar localStorage y probar con solo token
            localStorage.removeItem('user');
            
            // Intentar verificar token con el servidor
            try {
              const response = await fetch(
                `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/me`,
                {
                  headers: {
                    'Authorization': `Bearer ${token}`,
                    'Content-Type': 'application/json',
                  },
                }
              );
              
              if (response.ok) {
                const userData = await response.json();
                dispatch({
                  type: 'INIT_FROM_STORAGE',
                  payload: { token, user: userData.data }
                });
              } else {
                throw new Error('Invalid token');
              }
            } catch (verifyError) {
              console.error('‚ùå Token verification failed:', verifyError);
              localStorage.removeItem('token');
              dispatch({ type: 'INIT_COMPLETE' });
            }
          }
        } else {
          // Si hay token pero no usuario, verificar con servidor
          try {
            console.log('üîÑ No stored user, verifying token with server...');
            const response = await fetch(
              `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/me`,
              {
                headers: {
                  'Authorization': `Bearer ${token}`,
                  'Content-Type': 'application/json',
                },
              }
            );
            
            if (response.ok) {
              const userData = await response.json();
              console.log('‚úÖ Token verified, user data received');
              dispatch({
                type: 'INIT_FROM_STORAGE',
                payload: { token, user: userData.data }
              });
            } else {
              throw new Error('Invalid token');
            }
          } catch (error) {
            console.error('‚ùå Token verification failed:', error);
            localStorage.removeItem('token');
            dispatch({ type: 'INIT_COMPLETE' });
          }
        }
      } else {
        console.log('üîí No token found in localStorage');
        dispatch({ type: 'INIT_COMPLETE' });
      }
    };

    initializeAuth();
  }, []);

  const login = async (credentials) => {
    dispatch({ type: 'LOGIN_START' });
    try {
      console.log('üîë AuthContext: Iniciando login...');
      const response = await authService.login(credentials);
      
      // Verificar que la respuesta no sea undefined o null
      if (!response) {
        throw new Error('La respuesta del servidor es undefined');
      }
      
      console.log('‚úÖ AuthContext: Login exitoso', response);
      
      dispatch({
        type: 'LOGIN_SUCCESS',
        payload: response,
      });

      // Despu√©s del login exitoso, refrescar datos del usuario
      console.log('üîÑ Refreshing user data after login...');
      setTimeout(async () => {
        try {
          await refreshUser();
        } catch (error) {
          console.error('‚ùå Error refreshing user after login:', error);
        }
      }, 500);
      
      return response;
    } catch (error) {
      console.error('‚ùå AuthContext: Error en login', error);
      const errorMessage = error.response?.data?.message || 
                          error.message || 
                          'Error al iniciar sesi√≥n';
      dispatch({
        type: 'LOGIN_FAILURE',
        payload: errorMessage,
      });
      throw error;
    }
  };

  const register = async (userData) => {
    dispatch({ type: 'LOGIN_START' });
    try {
      console.log('üìù AuthContext: Iniciando registro...');
      const response = await authService.register(userData);
      
      // Verificar que la respuesta no sea undefined
      if (!response) {
        throw new Error('La respuesta del servidor es undefined');
      }
      
      console.log('‚úÖ AuthContext: Registro exitoso', response);
      return response;
    } catch (error) {
      console.error('‚ùå AuthContext: Error en registro', error);
      const errorMessage = error.response?.data?.message || 
                          error.message || 
                          'Error al registrarse';
      dispatch({
        type: 'LOGIN_FAILURE',
        payload: errorMessage,
      });
      throw error;
    }
  };

  const logout = async () => {
    try {
      console.log('üö™ AuthContext: Cerrando sesi√≥n...');
      await authService.logout();
    } catch (error) {
      console.error('Error during logout:', error);
    } finally {
      dispatch({ type: 'LOGOUT' });
      console.log('‚úÖ AuthContext: Sesi√≥n cerrada');
    }
  };

  const updateUser = (userData) => {
    console.log('üîÑ Updating user locally:', userData);
    dispatch({ type: 'UPDATE_USER', payload: userData });
  };

  const clearError = () => {
    dispatch({ type: 'CLEAR_ERROR' });
  };

  const setLoading = (loading) => {
    dispatch({ type: 'SET_LOADING', payload: loading });
  };

  const value = {
    ...state,
    login,
    register,
    logout,
    updateUser,
    refreshUser,        
    debugUserState,     
    clearError,
    setLoading,
  };

  console.log('üîç AuthProvider value:', {
    hasUser: !!value.user,
    hasToken: !!value.token,
    isAuthenticated: value.isAuthenticated,
    loading: value.loading,
    userHasPhoto: !!value.user?.foto_perfil,
    tokenInStorage: !!localStorage.getItem('token')
  });

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;
};

export const useAuth = () => {
  console.log('üîç useAuth llamado');
  const context = useContext(AuthContext);
  
  if (!context) {
    console.error('‚ùå useAuth: Context es undefined!');
    console.error('‚ùå Esto significa que useAuth se est√° llamando fuera del AuthProvider');
    console.trace('‚ùå Stack trace:');
    throw new Error('useAuth must be used within an AuthProvider');
  }
  return context;
};
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useApi.js
```
import { useState, useEffect } from 'react';

export const useApi = (apiFunction, dependencies = []) => {
    const [data, setData] = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);

    
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        setError(null);
        console.log('üîÑ useApi: Fetching data...');
        const result = await apiFunction();
        setData(result);
        console.log('‚úÖ useApi: Data fetched successfully');
      } catch (err) {
        console.error('‚ùå useApi: Error fetching data', err);
        setError(err.response?.data?.message || err.message || 'Error desconocido');
      } finally {
        setLoading(false);
      }
    };

     fetchData();
  }, dependencies);

  const refetch = async () => {
    try {
      setLoading(true);
      setError(null);
      const result = await apiFunction();
      setData(result);
      return result;
    } catch (err) {
      setError(err.response?.data?.message || err.message || 'Error desconocido');
      throw err;
    } finally {
      setLoading(false);
    }
  };

  return { data, loading, error, refetch };
};

```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useLocalStorage.js
```
import { useState, useEffect } from "react";

export const useLocalStorage = (key, initialValue) => {
    const [storedValue, setStoredValue] = useState(() => {
        try {
            const item = window.localStorage.getItem(key);
            return item ? JSON.parse(item) : initialValue;
        } catch (error) {
            console.error(`Error reading localStorage key "${key}":`, error);
            return initialValue;
        }
    });
const setValue = (value) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value;
      setStoredValue(valueToStore);
      window.localStorage.setItem(key, JSON.stringify(valueToStore));
    } catch (error) {
      console.error(`Error setting localStorage key "${key}":`, error);
    }
  };

  const removeValue = () => {
    try {
      window.localStorage.removeItem(key);
      setStoredValue(initialValue);
    } catch (error) {
      console.error(`Error removing localStorage key "${key}":`, error);
    }
  };

  return [storedValue, setValue, removeValue];

}
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useNotification.js
```
import { useApp } from '../context/AppContext';

export const useNotification = () => {
  const { addNotification, removeNotification, notifications } = useApp();

  const showSuccess = (message, options = {}) => {
    addNotification({
      type: 'success',
      message,
      ...options,
    });
  };

  const showError = (message, options = {}) => {
    addNotification({
      type: 'error',
      message,
      ...options,
    });
  };

  const showWarning = (message, options = {}) => {
    addNotification({
      type: 'warning',
      message,
      ...options,
    });
  };

  const showInfo = (message, options = {}) => {
    addNotification({
      type: 'info',
      message,
      ...options,
    });
  };

  return {
    notifications,
    showSuccess,
    showError,
    showWarning,
    showInfo,
    removeNotification,
  };
};
```

## c:\Users\rexma\Desktop\chambing-website\src\hooks\useForm.js
```
import { useState } from 'react';

export const useForm = (initialValues = {}, validationSchema = null) => {
  const [values, setValues] = useState(initialValues);
  const [errors, setErrors] = useState({});
  const [touched, setTouched] = useState({});
  const [isSubmitting, setIsSubmitting] = useState(false);

  const handleChange = (name, value) => {
    setValues(prev => ({
      ...prev,
      [name]: value,
    }));

    
    if (errors[name]) {
      setErrors(prev => ({
        ...prev,
        [name]: undefined,
      }));
    }
  };

  const handleBlur = (name) => {
    setTouched(prev => ({
      ...prev,
      [name]: true,
    }));

    
    if (validationSchema) {
      validateField(name, values[name]);
    }
  };

  const validateField = (name, value) => {
    if (!validationSchema) return true;

    try {
      validationSchema.validateSyncAt(name, { [name]: value });
      setErrors(prev => ({
        ...prev,
        [name]: undefined,
      }));
      return true;
    } catch (error) {
      setErrors(prev => ({
        ...prev,
        [name]: error.message,
      }));
      return false;
    }
  };

  const validateForm = () => {
    if (!validationSchema) return true;

    try {
      validationSchema.validateSync(values, { abortEarly: false });
      setErrors({});
      return true;
    } catch (error) {
      const formErrors = {};
      error.inner.forEach(err => {
        formErrors[err.path] = err.message;
      });
      setErrors(formErrors);
      return false;
    }
  };

  const handleSubmit = async (onSubmit) => {
    setIsSubmitting(true);
    
    // Mark all fields as touched
    const touchedFields = {};
    Object.keys(values).forEach(key => {
      touchedFields[key] = true;
    });
    setTouched(touchedFields);

    // Validate form
    if (!validateForm()) {
      setIsSubmitting(false);
      return;
    }

    try {
      await onSubmit(values);
    } catch (error) {
      console.error('Form submission error:', error);
    } finally {
      setIsSubmitting(false);
    }
  };

  const reset = (newValues = initialValues) => {
    setValues(newValues);
    setErrors({});
    setTouched({});
    setIsSubmitting(false);
  };

  return {
    values,
    errors,
    touched,
    isSubmitting,
    handleChange,
    handleBlur,
    handleSubmit,
    reset,
    setValues,
    setErrors,
  };
};

```

## c:\Users\rexma\Desktop\chambing-website\src\utils\constants.js
```
export const USER_TYPES = {
  CLIENTE: 'cliente',
  TRABAJADOR: 'trabajador',
  ADMIN: 'admin',
};

export const CONTRACT_STATES = {
  PENDIENTE: 'pendiente',
  ACEPTADO: 'aceptado',
  EN_PROGRESO: 'en_progreso',
  COMPLETADO: 'completado',
  CANCELADO: 'cancelado',
};

export const PAYMENT_STATES = {
  PENDIENTE: 'pendiente',
  PROCESANDO: 'procesando',
  COMPLETADO: 'completado',
  FALLIDO: 'fallido',
  REEMBOLSADO: 'reembolsado',
};

export const NOTIFICATION_TYPES = {
  SUCCESS: 'success',
  ERROR: 'error',
  WARNING: 'warning',
  INFO: 'info',
};

export const API_ENDPOINTS = {
  AUTH: {
    LOGIN: '/auth/login',
    REGISTER: '/auth/register',
    LOGOUT: '/auth/logout',
    REFRESH: '/auth/refresh',
  },
  USERS: {
    PROFILE: '/users/profile',
    UPDATE_PROFILE: '/users/profile',
    UPLOAD_PHOTO: '/users/profile-photo',
  },
  SERVICES: {
    CATEGORIES: '/services/categories',
    WORKER_CATEGORIES: '/services/worker-categories',
    TARIFFS: '/services/tariffs',
  },
  CONTRACTS: {
    BASE: '/contracts',
    MY_CONTRACTS: '/contracts/my-contracts',
    STATES: '/contracts/states',
  },
  PAYMENTS: {
    BASE: '/payments',
    HISTORY: '/payments/history',
    BALANCE: '/payments/balance',
    WOMPI: '/payments/wompi',
  },
};
```

## c:\Users\rexma\Desktop\chambing-website\src\utils\helpers.js
```
export const formatCurrency = (amount, currency = 'USD') => {
  return new Intl.NumberFormat('es-SV', {
    style: 'currency',
    currency: currency,
  }).format(amount);
};

export const formatDate = (date, options = {}) => {
  const defaultOptions = {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    ...options,
  };
  
  return new Intl.DateTimeFormat('es-SV', defaultOptions).format(new Date(date));
};

export const formatPhoneNumber = (phone) => {
  // Format salvadoran phone numbers
  const cleaned = phone.replace(/\D/g, '');
  const match = cleaned.match(/^(\d{4})(\d{4})$/);
  
  if (match) {
    return `${match[1]}-${match[2]}`;
  }
  
  return phone;
};

export const getInitials = (name) => {
  return name
    .split(' ')
    .map(word => word.charAt(0))
    .join('')
    .toUpperCase()
    .slice(0, 2);
};

export const truncateText = (text, maxLength = 100) => {
  if (text.length <= maxLength) return text;
  return text.slice(0, maxLength) + '...';
};

export const debounce = (func, wait) => {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
};

export const generateUniqueId = () => {
  return Date.now().toString(36) + Math.random().toString(36).substr(2);
};

export const isValidEmail = (email) => {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
};

export const capitalizeFirst = (str) => {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
};
```

## c:\Users\rexma\Desktop\chambing-website\src\services\api.js
```
import axios from 'axios';

const API_BASE_URL = import.meta.env.VITE_API_URL || 'http://localhost:3000/api';

const api = axios.create({
  baseURL: API_BASE_URL,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Variable para evitar m√∫ltiples redirects
let isRedirecting = false;

api.interceptors.request.use(
  (config) => {
    const token = localStorage.getItem('token');
    if (token) {
      config.headers.Authorization = `Bearer ${token}`;
      console.log('üîß API: Token agregado a la petici√≥n');
    } else {
      console.log('üîß API: No hay token disponible');
    }
    return config;
  },
  (error) => {
    return Promise.reject(error);
  }
);

api.interceptors.response.use(
  (response) => {
    console.log('‚úÖ API: Respuesta exitosa', response.status);
    return response;
  },
  async (error) => {
    console.log('‚ùå API: Error en respuesta', error.response?.status, error.response?.data);
    
    if (error.response?.status === 401) {
      console.log('üîç API: Detectado error 401 - token inv√°lido o expirado');
      
      // Evitar m√∫ltiples redirects simult√°neos
      if (isRedirecting) {
        return Promise.reject(error);
      }
      
      // Intentar refrescar el token antes de hacer logout
      const refreshToken = localStorage.getItem('refresh_token');
      
      if (refreshToken && !error.config._retry) {
        console.log('üîÑ API: Intentando refrescar token...');
        error.config._retry = true;
        
        try {
          // Usar una instancia separada para evitar interceptor recursivo
          const refreshResponse = await axios.post(`${API_BASE_URL}/auth/refresh`, {
            refreshToken: refreshToken  // ‚úÖ Backend espera 'refreshToken'
          });
          
          const newToken = refreshResponse.data.accessToken;  // ‚úÖ Backend retorna 'accessToken'
          localStorage.setItem('token', newToken);
          
          // Reintentar la petici√≥n original con el nuevo token
          error.config.headers.Authorization = `Bearer ${newToken}`;
          console.log('‚úÖ API: Token refrescado, reintentando petici√≥n...');
          return api.request(error.config);
          
        } catch (refreshError) {
          console.log('‚ùå API: Error al refrescar token, haciendo logout...');
          // Si el refresh falla, entonces s√≠ hacer logout
          handleLogout();
        }
      } else {
        console.log('‚ùå API: No hay refresh token o ya se intent√≥, haciendo logout...');
        handleLogout();
      }
    }
    
    return Promise.reject(error);
  }
);

// Funci√≥n separada para manejar logout
function handleLogout() {
  if (isRedirecting) return;
  
  isRedirecting = true;
  console.log('üö™ API: Ejecutando logout autom√°tico...');
  
  // Limpiar localStorage
  localStorage.removeItem('token');
  localStorage.removeItem('refresh_token');
  localStorage.removeItem('user');
  
  // Redirigir despu√©s de un peque√±o delay para evitar problemas de race condition
  setTimeout(() => {
    window.location.href = '/login';
    isRedirecting = false;
  }, 100);
}

export default api;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\CoverPhotoModal.jsx
```
import React, { useState, useRef, useCallback } from 'react';
import {
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
  Button,
  Box,
  Typography,
  CircularProgress,
  Alert,
  IconButton,
  Slider,
  Stack,
} from '@mui/material';
import {
  PhotoCamera,
  Close,
  DeleteOutline,
  ZoomIn,
  ZoomOut,
  RotateLeft,
} from '@mui/icons-material';
import Cropper from 'react-easy-crop';
import { useAuth } from '../context/AuthContext';

const CoverPhotoModal = ({ open, onClose, onPhotoUpdated }) => {
  const { user, updateUser } = useAuth();
  const [selectedFile, setSelectedFile] = useState(null);
  const [imageSrc, setImageSrc] = useState(null);
  const [crop, setCrop] = useState({ x: 0, y: 0 });
  const [zoom, setZoom] = useState(1);
  const [rotation, setRotation] = useState(0);
  const [croppedAreaPixels, setCroppedAreaPixels] = useState(null);
  const [uploading, setUploading] = useState(false);
  const [error, setError] = useState(null);
  const [deleteMode, setDeleteMode] = useState(false);
  const fileInputRef = useRef(null);

  const onCropComplete = useCallback((croppedArea, croppedAreaPixels) => {
    setCroppedAreaPixels(croppedAreaPixels);
  }, []);

  const handleFileSelect = (event) => {
    const file = event.target.files[0];
    
    if (!file) return;

    // Validar tipo de archivo
    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      setError('Solo se permiten archivos JPG, PNG o WebP');
      return;
    }

    // Validar tama√±o (10MB m√°ximo para portada)
    if (file.size > 10 * 1024 * 1024) {
      setError('El archivo no puede ser mayor a 10MB');
      return;
    }

    setError(null);
    setSelectedFile(file);
    setDeleteMode(false);

    // Crear preview con FileReader
    const reader = new FileReader();
    reader.onload = (e) => {
      setImageSrc(e.target.result);
      // Reset crop settings
      setCrop({ x: 0, y: 0 });
      setZoom(1);
      setRotation(0);
    };
    reader.readAsDataURL(file);
  };

  const createImage = (url) =>
    new Promise((resolve, reject) => {
      const image = new Image();
      image.addEventListener('load', () => resolve(image));
      image.addEventListener('error', (error) => reject(error));
      image.src = url;
    });

  const getCroppedImg = async (imageSrc, pixelCrop, rotation = 0) => {
    const image = await createImage(imageSrc);
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');

    const maxSize = Math.max(image.width, image.height);
    const safeArea = 2 * ((maxSize / 2) * Math.sqrt(2));

    canvas.width = safeArea;
    canvas.height = safeArea;

    ctx.translate(safeArea / 2, safeArea / 2);
    ctx.rotate((rotation * Math.PI) / 180);
    ctx.translate(-safeArea / 2, -safeArea / 2);

    ctx.drawImage(
      image,
      safeArea / 2 - image.width * 0.5,
      safeArea / 2 - image.height * 0.5
    );

    const data = ctx.getImageData(0, 0, safeArea, safeArea);

    canvas.width = pixelCrop.width;
    canvas.height = pixelCrop.height;

    ctx.putImageData(
      data,
      0 - safeArea / 2 + image.width * 0.5 - pixelCrop.x,
      0 - safeArea / 2 + image.height * 0.5 - pixelCrop.y
    );

    return new Promise((resolve) => {
      canvas.toBlob((blob) => {
        resolve(blob);
      }, 'image/jpeg', 0.95);
    });
  };

  const handleUpload = async () => {
    if (!imageSrc || !croppedAreaPixels) return;

    setUploading(true);
    setError(null);

    try {
      // Crear imagen recortada
      const croppedBlob = await getCroppedImg(imageSrc, croppedAreaPixels, rotation);
      
      // Crear FormData con la imagen recortada
      const formData = new FormData();
      formData.append('file', croppedBlob, selectedFile.name);

      const token = localStorage.getItem('token');
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/cover-photo`,
        {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${token}`,
          },
          body: formData,
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al subir la foto');
      }

      const result = await response.json();
      
      // Actualizar el usuario en el contexto
      if (updateUser) {
        updateUser({
          ...user,
          foto_portada: result.data.foto_portada
        });
      }

      // Llamar callback si existe
      if (onPhotoUpdated) {
        onPhotoUpdated(result.data.foto_portada);
      }

      // Cerrar modal
      handleClose();
      
    } catch (error) {
      console.error('Error uploading cover photo:', error);
      setError(error.message || 'Error al subir la foto');
    } finally {
      setUploading(false);
    }
  };

  const handleDelete = async () => {
    setUploading(true);
    setError(null);

    try {
      const token = localStorage.getItem('token');
      const response = await fetch(
        `${import.meta.env.VITE_API_URL || 'http://localhost:3000'}/users/cover-photo`,
        {
          method: 'DELETE',
          headers: {
            'Authorization': `Bearer ${token}`,
          },
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.message || 'Error al eliminar la foto');
      }

      // Actualizar el usuario en el contexto
      if (updateUser) {
        updateUser({
          ...user,
          foto_portada: null
        });
      }

      // Llamar callback si existe
      if (onPhotoUpdated) {
        onPhotoUpdated(null);
      }

      // Cerrar modal
      handleClose();
      
    } catch (error) {
      console.error('Error deleting cover photo:', error);
      setError(error.message || 'Error al eliminar la foto');
    } finally {
      setUploading(false);
    }
  };

  const handleClose = () => {
    setSelectedFile(null);
    setImageSrc(null);
    setCrop({ x: 0, y: 0 });
    setZoom(1);
    setRotation(0);
    setError(null);
    setUploading(false);
    setDeleteMode(false);
    onClose();
  };

  const handleRotate = () => {
    setRotation((prev) => (prev + 90) % 360);
  };

  return (
    <Dialog 
      open={open} 
      onClose={handleClose}
      maxWidth="lg"
      fullWidth
    >
      <DialogTitle>
        <Box display="flex" justifyContent="space-between" alignItems="center">
          <Typography variant="h6">
            {deleteMode ? 'Eliminar Foto de Portada' : 'Cambiar Foto de Portada'}
          </Typography>
          <IconButton onClick={handleClose}>
            <Close />
          </IconButton>
        </Box>
      </DialogTitle>

      <DialogContent>
        <Box display="flex" flexDirection="column" py={2}>
          {!imageSrc && !deleteMode ? (
            // Vista sin imagen seleccionada
            <Box textAlign="center" py={4}>
              <Box
                sx={{
                  width: '100%',
                  height: 250,
                  borderRadius: 2,
                  overflow: 'hidden',
                  position: 'relative',
                  bgcolor: 'grey.200',
                  mb: 3,
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                }}
              >
                {user?.foto_portada ? (
                  <Box
                    component="img"
                    src={user.foto_portada}
                    alt="Cover"
                    sx={{
                      width: '100%',
                      height: '100%',
                      objectFit: 'cover',
                    }}
                  />
                ) : (
                  <Typography variant="body2" color="text.secondary">
                    No hay foto de portada
                  </Typography>
                )}
                
                <IconButton
                  onClick={() => fileInputRef.current?.click()}
                  disabled={uploading}
                  sx={{
                    position: 'absolute',
                    bottom: 16,
                    right: 16,
                    bgcolor: 'primary.main',
                    color: 'white',
                    '&:hover': { bgcolor: 'primary.dark' }
                  }}
                >
                  <PhotoCamera />
                </IconButton>
              </Box>

              <input
                ref={fileInputRef}
                type="file"
                accept="image/jpeg,image/jpg,image/png,image/webp"
                onChange={handleFileSelect}
                style={{ display: 'none' }}
              />

              {error && (
                <Alert severity="error" sx={{ mt: 2 }}>
                  {error}
                </Alert>
              )}

              <Typography variant="body2" color="text.secondary" sx={{ mt: 2 }}>
                Haz clic en el icono de la c√°mara para seleccionar una foto.
                <br />
                Formatos permitidos: JPG, PNG, WebP (m√°ximo 10MB)
                <br />
                Recomendado: 1200x300 p√≠xeles (ratio 4:1)
              </Typography>
            </Box>
          ) : deleteMode ? (
            // Vista de confirmaci√≥n de eliminaci√≥n
            <Box textAlign="center" py={4}>
              <Box
                sx={{
                  width: '100%',
                  height: 200,
                  borderRadius: 2,
                  overflow: 'hidden',
                  bgcolor: 'grey.200',
                  mb: 3,
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                }}
              >
                {user?.foto_portada && (
                  <Box
                    component="img"
                    src={user.foto_portada}
                    alt="Cover"
                    sx={{
                      width: '100%',
                      height: '100%',
                      objectFit: 'cover',
                      filter: 'grayscale(100%) opacity(0.5)',
                    }}
                  />
                )}
              </Box>
              
              <Alert severity="warning">
                ¬øEst√°s seguro de que deseas eliminar tu foto de portada?
              </Alert>
            </Box>
          ) : (
            // Vista con editor de recorte
            <>
              {/* √Årea de recorte - Ratio 4:1 para portada */}
              <Box
                sx={{
                  position: 'relative',
                  width: '100%',
                  height: 400,
                  bgcolor: 'grey.900',
                  borderRadius: 2,
                  overflow: 'hidden',
                }}
              >
                <Cropper
                  image={imageSrc}
                  crop={crop}
                  zoom={zoom}
                  rotation={rotation}
                  aspect={4 / 1}
                  cropShape="rect"
                  showGrid={true}
                  onCropChange={setCrop}
                  onZoomChange={setZoom}
                  onCropComplete={onCropComplete}
                />
              </Box>

              {/* Controles */}
              <Box sx={{ mt: 3 }}>
                <Stack spacing={2}>
                  {/* Control de zoom */}
                  <Box>
                    <Typography variant="body2" gutterBottom>
                      Zoom
                    </Typography>
                    <Stack direction="row" spacing={2} alignItems="center">
                      <ZoomOut fontSize="small" />
                      <Slider
                        value={zoom}
                        min={1}
                        max={3}
                        step={0.1}
                        onChange={(e, value) => setZoom(value)}
                        sx={{ flexGrow: 1 }}
                      />
                      <ZoomIn fontSize="small" />
                    </Stack>
                  </Box>

                  {/* Bot√≥n de rotaci√≥n */}
                  <Box>
                    <Button
                      startIcon={<RotateLeft />}
                      onClick={handleRotate}
                      variant="outlined"
                      size="small"
                    >
                      Rotar 90¬∞
                    </Button>
                  </Box>

                  {/* Bot√≥n para cambiar imagen */}
                  <Box>
                    <Button
                      startIcon={<PhotoCamera />}
                      onClick={() => fileInputRef.current?.click()}
                      variant="outlined"
                      size="small"
                      fullWidth
                    >
                      Seleccionar otra imagen
                    </Button>
                    <input
                      ref={fileInputRef}
                      type="file"
                      accept="image/jpeg,image/jpg,image/png,image/webp"
                      onChange={handleFileSelect}
                      style={{ display: 'none' }}
                    />
                  </Box>
                </Stack>
              </Box>

              {error && (
                <Alert severity="error" sx={{ mt: 2 }}>
                  {error}
                </Alert>
              )}

              <Typography variant="caption" color="text.secondary" sx={{ mt: 2, display: 'block' }}>
                Arrastra para reposicionar, usa el zoom para ajustar el tama√±o
              </Typography>
            </>
          )}
        </Box>
      </DialogContent>

      <DialogActions sx={{ p: 2, gap: 1 }}>
        {user?.foto_portada && !deleteMode && !imageSrc && (
          <Button
            onClick={() => setDeleteMode(true)}
            color="error"
            startIcon={<DeleteOutline />}
            disabled={uploading}
          >
            Eliminar
          </Button>
        )}
        
        <Box sx={{ flexGrow: 1 }} />
        
        <Button onClick={handleClose} disabled={uploading}>
          Cancelar
        </Button>
        
        {deleteMode ? (
          <Button
            onClick={handleDelete}
            variant="contained"
            color="error"
            disabled={uploading}
            startIcon={uploading ? <CircularProgress size={20} /> : null}
          >
            {uploading ? 'Eliminando...' : 'Confirmar Eliminaci√≥n'}
          </Button>
        ) : (
          <Button
            onClick={handleUpload}
            variant="contained"
            disabled={!imageSrc || uploading}
            startIcon={uploading ? <CircularProgress size={20} /> : null}
          >
            {uploading ? 'Subiendo...' : 'Guardar Foto'}
          </Button>
        )}
      </DialogActions>
    </Dialog>
  );
};

export default CoverPhotoModal;
```

## c:\Users\rexma\Desktop\chambing-website\src\context\AdminContext.jsx
```
import React, { createContext, useContext, useMemo } from 'react';
import { useAuth } from './AuthContext';

const AdminContext = createContext();

export const useAdmin = () => {
  const context = useContext(AdminContext);
  if (!context) {
    throw new Error('useAdmin debe usarse dentro de AdminProvider');
  }
  return context;
};

export const AdminProvider = ({ children }) => {
  const { user } = useAuth();

  const permissions = useMemo(() => {
    if (!user) {
      return {
        isAdmin: false,
        isSuperAdmin: false,
        canManageUsers: false,
        canManageCategories: false,
        canVerifyDocuments: false,
        canManageContracts: false,
        canManageRoles: false,
        canDeleteAdmins: false,
      };
    }

    const userRole = user.tipo_usuario?.toLowerCase();
    const isSuperAdmin = userRole === 'super_admin' || userRole === 'superadmin';
    const isAdmin = isSuperAdmin || userRole === 'admin';

    return {
      isAdmin,
      isSuperAdmin,
      canManageUsers: isAdmin,
      canManageCategories: isAdmin,
      canVerifyDocuments: isAdmin,
      canManageContracts: isAdmin,
      canManageRoles: isSuperAdmin,
      canDeleteAdmins: isSuperAdmin,
      canCreateSuperAdmin: isSuperAdmin,
    };
  }, [user]);

  return (
    <AdminContext.Provider value={permissions}>
      {children}
    </AdminContext.Provider>
  );
};
```

## c:\Users\rexma\Desktop\chambing-website\src\components\admin\ContractsManager.jsx
```
import React, { useState, useEffect } from 'react';
import { useAuth } from '../../context/AuthContext';
import adminService from '../../services/adminService';

const ContractsManager = () => {
  const { user } = useAuth();
  const [contracts, setContracts] = useState([]);
  const [loading, setLoading] = useState(true);
  const [filterStatus, setFilterStatus] = useState('todos');
  const [selectedContract, setSelectedContract] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [history, setHistory] = useState([]);

  useEffect(() => {
    loadContracts();
  }, [filterStatus]);

  const loadContracts = async () => {
    try {
      setLoading(true);
      const data = await adminService.getAllContracts({
        estado: filterStatus !== 'todos' ? filterStatus : undefined
      });
      setContracts(data);
    } catch (error) {
      console.error('Error cargando contratos:', error);
      alert('Error al cargar los contratos');
    } finally {
      setLoading(false);
    }
  };

  const viewContractDetails = async (contract) => {
    try {
      setSelectedContract(contract);
      const historyData = await adminService.getContractHistory(contract.id);
      setHistory(historyData);
      setShowModal(true);
    } catch (error) {
      console.error('Error cargando historial:', error);
    }
  };

  const updateStatus = async (contractId, newStatus) => {
    if (!window.confirm(`¬øCambiar estado del contrato a "${newStatus}"?`)) {
      return;
    }

    try {
      await adminService.updateContractStatus(contractId, {
        nuevoEstado: newStatus,
        usuarioId: user.id,
        notas: 'Actualizaci√≥n desde panel administrativo'
      });
      alert('Estado actualizado exitosamente');
      setShowModal(false);
      loadContracts();
    } catch (error) {
      console.error('Error actualizando estado:', error);
      alert('Error al actualizar el estado del contrato');
    }
  };

  const closeModal = () => {
    setShowModal(false);
    setSelectedContract(null);
    setHistory([]);
  };

  const getStatusBadge = (status) => {
    const badges = {
      'pendiente': { color: 'warning', icon: '‚è≥', text: 'Pendiente' },
      'en_progreso': { color: 'info', icon: 'üîÑ', text: 'En Progreso' },
      'completado': { color: 'success', icon: '‚úÖ', text: 'Completado' },
      'cancelado': { color: 'danger', icon: '‚ùå', text: 'Cancelado' },
      'cerrado': { color: 'muted', icon: 'üîí', text: 'Cerrado' }
    };
    const badge = badges[status] || badges['pendiente'];
    return (
      <span className={`admin-badge admin-badge--${badge.color}`}>
        {badge.icon} {badge.text}
      </span>
    );
  };

  const getAvailableTransitions = (currentStatus) => {
    const transitions = {
      'pendiente': ['en_progreso', 'cancelado'],
      'en_progreso': ['completado', 'cancelado'],
      'completado': ['cerrado'],
      'cancelado': [],
      'cerrado': []
    };
    return transitions[currentStatus] || [];
  };

  if (loading) {
    return (
      <div className="admin-section__loading">
        <div className="admin-dashboard__spinner" />
        <p>Cargando contratos...</p>
      </div>
    );
  }

  return (
    <div className="admin-section">
      <div className="admin-section__header">
        <div>
          <h2>Gesti√≥n de Contratos</h2>
          <p className="admin-section__subtitle">
            Supervisa y gestiona todos los contratos de la plataforma
          </p>
        </div>
      </div>

      {/* Estad√≠sticas */}
      <div className="admin-section__stats">
        <div className="admin-stat-badge admin-stat-badge--primary">
          <strong>{contracts.length}</strong>
          <span>Total de contratos</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--info">
          <strong>{contracts.filter(c => c.estado === 'en_progreso').length}</strong>
          <span>En progreso</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--warning">
          <strong>{contracts.filter(c => c.estado === 'pendiente').length}</strong>
          <span>Pendientes</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--success">
          <strong>{contracts.filter(c => c.estado === 'completado').length}</strong>
          <span>Completados</span>
        </div>
      </div>

      {/* Filtros */}
      <div className="admin-filters">
        <button 
          className={`admin-filter-chip ${filterStatus === 'todos' ? 'active' : ''}`}
          onClick={() => setFilterStatus('todos')}
        >
          Todos ({contracts.length})
        </button>
        <button 
          className={`admin-filter-chip ${filterStatus === 'pendiente' ? 'active' : ''}`}
          onClick={() => setFilterStatus('pendiente')}
        >
          ‚è≥ Pendientes
        </button>
        <button 
          className={`admin-filter-chip ${filterStatus === 'en_progreso' ? 'active' : ''}`}
          onClick={() => setFilterStatus('en_progreso')}
        >
          üîÑ En Progreso
        </button>
        <button 
          className={`admin-filter-chip ${filterStatus === 'completado' ? 'active' : ''}`}
          onClick={() => setFilterStatus('completado')}
        >
          ‚úÖ Completados
        </button>
        <button 
          className={`admin-filter-chip ${filterStatus === 'cancelado' ? 'active' : ''}`}
          onClick={() => setFilterStatus('cancelado')}
        >
          ‚ùå Cancelados
        </button>
      </div>

      {/* Lista de Contratos */}
      <div className="admin-cards-grid">
        {contracts.map(contract => (
          <div key={contract.id} className="admin-card">
            <div className="admin-card__header">
              <div>
                <h4>üìù {contract.codigo_contrato}</h4>
                <p className="admin-card__date">
                  {new Date(contract.fecha_creacion).toLocaleDateString()}
                </p>
              </div>
              {getStatusBadge(contract.estado)}
            </div>

            <div className="admin-card__body">
              <div className="admin-card__parties">
                <div className="admin-card__party">
                  <span className="admin-card__label">Empleador:</span>
                  <span className="admin-card__value">{contract.empleador?.nombre}</span>
                </div>
                <div className="admin-card__party">
                  <span className="admin-card__label">Trabajador:</span>
                  <span className="admin-card__value">{contract.trabajador?.nombre}</span>
                </div>
              </div>

              <div className="admin-card__info">
                <span className="admin-card__label">Categor√≠a:</span>
                <span className="admin-card__value">{contract.categoria?.nombre}</span>
              </div>

              <div className="admin-card__info">
                <span className="admin-card__label">Monto:</span>
                <span className="admin-card__value admin-card__amount">
                  ${parseFloat(contract.monto).toFixed(2)}
                </span>
              </div>

              <div className="admin-card__dates">
                <div>
                  <span className="admin-card__label">Inicio:</span>
                  <span>{new Date(contract.fecha_inicio).toLocaleDateString()}</span>
                </div>
                {contract.fecha_fin && (
                  <div>
                    <span className="admin-card__label">Fin:</span>
                    <span>{new Date(contract.fecha_fin).toLocaleDateString()}</span>
                  </div>
                )}
              </div>
            </div>

            <div className="admin-card__actions">
              <button 
                className="admin-btn admin-btn--secondary admin-btn--sm"
                onClick={() => viewContractDetails(contract)}
              >
                üëÅÔ∏è Ver Detalles
              </button>
            </div>
          </div>
        ))}
      </div>

      {contracts.length === 0 && (
        <div className="admin-empty-state">
          <div className="admin-empty-state__icon">üìù</div>
          <h3>No hay contratos {filterStatus !== 'todos' ? filterStatus : ''}</h3>
          <p>Los contratos aparecer√°n aqu√≠ cuando sean creados</p>
        </div>
      )}

      {/* Modal de Detalles */}
      {showModal && selectedContract && (
        <>
          <div className="admin-modal-overlay" onClick={closeModal} />
          <div className="admin-modal admin-modal--large">
            <div className="admin-modal__header">
              <h3>Detalles del Contrato {selectedContract.codigo_contrato}</h3>
              <button className="admin-modal__close" onClick={closeModal}>√ó</button>
            </div>

            <div className="admin-modal__content">
              <div className="admin-contract-details">
                {/* Informaci√≥n Principal */}
                <div className="admin-contract-section">
                  <h4>Informaci√≥n General</h4>
                  <div className="admin-info-grid">
                    <div className="admin-info-row">
                      <span className="admin-info-label">C√≥digo:</span>
                      <span className="admin-info-value">{selectedContract.codigo_contrato}</span>
                    </div>
                    <div className="admin-info-row">
                      <span className="admin-info-label">Estado:</span>
                      {getStatusBadge(selectedContract.estado)}
                    </div>
                    <div className="admin-info-row">
                      <span className="admin-info-label">Monto:</span>
                      <span className="admin-info-value">${parseFloat(selectedContract.monto).toFixed(2)}</span>
                    </div>
                    <div className="admin-info-row">
                      <span className="admin-info-label">Categor√≠a:</span>
                      <span className="admin-info-value">{selectedContract.categoria?.nombre}</span>
                    </div>
                  </div>
                </div>

                {/* Partes del Contrato */}
                <div className="admin-contract-section">
                  <h4>Partes del Contrato</h4>
                  <div className="admin-parties-grid">
                    <div className="admin-party-card">
                      <h5>üíº Empleador</h5>
                      <p><strong>{selectedContract.empleador?.nombre}</strong></p>
                      <p>{selectedContract.empleador?.email}</p>
                      <p>{selectedContract.empleador?.telefono}</p>
                    </div>
                    <div className="admin-party-card">
                      <h5>üë∑ Trabajador</h5>
                      <p><strong>{selectedContract.trabajador?.nombre}</strong></p>
                      <p>{selectedContract.trabajador?.email}</p>
                      <p>{selectedContract.trabajador?.telefono}</p>
                    </div>
                  </div>
                </div>

                {/* Historial de Estados */}
                <div className="admin-contract-section">
                  <h4>Historial de Estados</h4>
                  <div className="admin-timeline">
                    {history.map((item, index) => (
                      <div key={index} className="admin-timeline-item">
                        <div className="admin-timeline-icon">
                          {getStatusBadge(item.estado_nuevo)}
                        </div>
                        <div className="admin-timeline-content">
                          <p className="admin-timeline-date">
                            {new Date(item.fecha_cambio).toLocaleString()}
                          </p>
                          <p className="admin-timeline-change">
                            {item.estado_anterior ? 
                              `Cambio de "${item.estado_anterior}" a "${item.estado_nuevo}"` :
                              `Contrato creado con estado "${item.estado_nuevo}"`
                            }
                          </p>
                          {item.notas && (
                            <p className="admin-timeline-notes">üí¨ {item.notas}</p>
                          )}
                          <p className="admin-timeline-user">
                            Por: {item.usuario?.nombre}
                          </p>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Acciones de Estado */}
                {getAvailableTransitions(selectedContract.estado).length > 0 && (
                  <div className="admin-contract-section">
                    <h4>Cambiar Estado</h4>
                    <div className="admin-state-actions">
                      {getAvailableTransitions(selectedContract.estado).map(newState => (
                        <button
                          key={newState}
                          className="admin-btn admin-btn--primary"
                          onClick={() => updateStatus(selectedContract.id, newState)}
                        >
                          Marcar como {newState.replace('_', ' ')}
                        </button>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </div>

            <div className="admin-modal__footer">
              <button className="admin-btn admin-btn--secondary" onClick={closeModal}>
                Cerrar
              </button>
            </div>
          </div>
        </>
      )}
    </div>
  );
};

export default ContractsManager;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\admin\CategoriesManager.jsx
```
import React, { useState, useEffect } from 'react';
import { useTranslation } from 'react-i18next';
import adminService from '../../services/adminService';

const CategoriesManager = () => {
  const { t } = useTranslation();
  const [categories, setCategories] = useState([]);
  const [loading, setLoading] = useState(true);
  const [showModal, setShowModal] = useState(false);
  const [editingCategory, setEditingCategory] = useState(null);
  const [formData, setFormData] = useState({
    nombre: '',
    descripcion: '',
    requisitosDocumentos: {},
    activo: true
  });

  useEffect(() => {
    loadCategories();
  }, []);

  const loadCategories = async () => {
    try {
      setLoading(true);
      const data = await adminService.getCategories();
      setCategories(data);
    } catch (error) {
      console.error('Error cargando categor√≠as:', error);
      alert(t('errors.serverError'));
    } finally {
      setLoading(false);
    }
  };

  const handleSubmit = async (e) => {
    e.preventDefault();
    try {
      if (editingCategory) {
        await adminService.updateCategory(editingCategory.id, formData);
        alert(t('success.generic'));
      } else {
        await adminService.createCategory(formData);
        alert(t('success.generic'));
      }
      setShowModal(false);
      setFormData({ nombre: '', descripcion: '', requisitosDocumentos: {}, activo: true });
      setEditingCategory(null);
      loadCategories();
    } catch (error) {
      console.error('Error guardando categor√≠a:', error);
      alert(t('errors.serverError'));
    }
  };

  const handleEdit = (category) => {
    setEditingCategory(category);
    setFormData({
      nombre: category.nombre,
      descripcion: category.descripcion || '',
      requisitosDocumentos: category.requisitosDocumentos || {},
      activo: category.activo
    });
    setShowModal(true);
  };

  const handleDelete = async (id) => {
    if (!window.confirm(t('admin.users.confirmations.delete'))) return;
    
    try {
      await adminService.deleteCategory(id);
      alert(t('success.generic'));
      loadCategories();
    } catch (error) {
      console.error('Error eliminando categor√≠a:', error);
      alert(t('errors.serverError'));
    }
  };

  const closeModal = () => {
    setShowModal(false);
    setEditingCategory(null);
    setFormData({ nombre: '', descripcion: '', requisitosDocumentos: {}, activo: true });
  };

  if (loading) {
    return (
      <div className="admin-section__loading">
        <div className="admin-dashboard__spinner" />
        <p>{t('common.loading')}</p>
      </div>
    );
  }

  return (
    <div className="admin-section">
      <div className="admin-section__header">
        <div>
          <h2>{t('services.categories.domesticCleaning')}</h2>
          <p className="admin-section__subtitle">
            {t('nav.services')}
          </p>
        </div>
        <button 
          className="admin-btn admin-btn--primary"
          onClick={() => setShowModal(true)}
        >
          <span>‚ûï</span>
          Nueva Categor√≠a
        </button>
      </div>

      <div className="admin-section__stats">
        <div className="admin-stat-badge admin-stat-badge--primary">
          <strong>{categories.length}</strong>
          <span>{t('admin.users.stats.total')}</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--success">
          <strong>{categories.filter(c => c.activo).length}</strong>
          <span>Activas</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--muted">
          <strong>{categories.filter(c => !c.activo).length}</strong>
          <span>Inactivas</span>
        </div>
      </div>

      <div className="admin-table-container">
        <table className="admin-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Descripci√≥n</th>
              <th>Estado</th>
              <th>Trabajadores</th>
              <th>{t('common.actions')}</th>
            </tr>
          </thead>
          <tbody>
            {categories.map(category => (
              <tr key={category.id}>
                <td>
                  <div className="admin-table__name">
                    <span className="admin-table__icon">üè∑Ô∏è</span>
                    <strong>{category.nombre}</strong>
                  </div>
                </td>
                <td>
                  <span className="admin-table__description">
                    {category.descripcion || 'Sin descripci√≥n'}
                  </span>
                </td>
                <td>
                  <span className={`admin-badge ${category.activo ? 'admin-badge--success' : 'admin-badge--muted'}`}>
                    {category.activo ? 'Activa' : 'Inactiva'}
                  </span>
                </td>
                <td>
                  <span className="admin-table__count">
                    {category.trabajadoresCategorias?.length || 0}
                  </span>
                </td>
                <td>
                  <div className="admin-table__actions">
                    <button
                      className="admin-icon-btn admin-icon-btn--edit"
                      onClick={() => handleEdit(category)}
                      title={t('common.edit')}
                    >
                      ‚úèÔ∏è
                    </button>
                    <button
                      className="admin-icon-btn admin-icon-btn--delete"
                      onClick={() => handleDelete(category.id)}
                      title={t('common.delete')}
                    >
                      üóëÔ∏è
                    </button>
                  </div>
                </td>
              </tr>
            ))}
          </tbody>
        </table>

        {categories.length === 0 && (
          <div className="admin-empty-state">
            <div className="admin-empty-state__icon">üìã</div>
            <h3>No hay categor√≠as registradas</h3>
            <p>Crea la primera categor√≠a para comenzar</p>
            <button 
              className="admin-btn admin-btn--primary"
              onClick={() => setShowModal(true)}
            >
              Crear Categor√≠a
            </button>
          </div>
        )}
      </div>

      {/* Modal */}
      {showModal && (
        <>
          <div className="admin-modal-overlay" onClick={closeModal} />
          <div className="admin-modal">
            <div className="admin-modal__header">
              <h3>{editingCategory ? t('common.edit') : 'Nueva'} Categor√≠a</h3>
              <button className="admin-modal__close" onClick={closeModal}>√ó</button>
            </div>
            <form onSubmit={handleSubmit} className="admin-form">
              <div className="admin-form__group">
                <label className="admin-form__label">Nombre *</label>
                <input
                  type="text"
                  className="admin-form__input"
                  value={formData.nombre}
                  onChange={(e) => setFormData({...formData, nombre: e.target.value})}
                  required
                  placeholder="ej. Limpieza Dom√©stica"
                />
              </div>

              <div className="admin-form__group">
                <label className="admin-form__label">Descripci√≥n</label>
                <textarea
                  className="admin-form__textarea"
                  value={formData.descripcion}
                  onChange={(e) => setFormData({...formData, descripcion: e.target.value})}
                  rows="3"
                  placeholder="Describe el tipo de servicio..."
                />
              </div>

              <div className="admin-form__group">
                <label className="admin-form__checkbox">
                  <input
                    type="checkbox"
                    checked={formData.activo}
                    onChange={(e) => setFormData({...formData, activo: e.target.checked})}
                  />
                  <span>Categor√≠a activa</span>
                </label>
              </div>

              <div className="admin-form__actions">
                <button 
                  type="button" 
                  className="admin-btn admin-btn--secondary"
                  onClick={closeModal}
                >
                  {t('common.cancel')}
                </button>
                <button type="submit" className="admin-btn admin-btn--primary">
                  {editingCategory ? t('common.save') : 'Crear'}
                </button>
              </div>
            </form>
          </div>
        </>
      )}
    </div>
  );
};

export default CategoriesManager;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\admin\DocumentsVerifier.jsx
```
import React, { useState, useEffect } from 'react';
import { useAuth } from '../../context/AuthContext';
import adminService from '../../services/adminService';

const DocumentsVerifier = () => {
  const { user } = useAuth();
  const [documents, setDocuments] = useState([]);
  const [loading, setLoading] = useState(true);
  const [filter, setFilter] = useState('pendiente');
  const [selectedDoc, setSelectedDoc] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [verificationNotes, setVerificationNotes] = useState('');

  useEffect(() => {
    loadDocuments();
  }, [filter]);

  const loadDocuments = async () => {
    try {
      setLoading(true);
      const data = await adminService.getAllDocuments({ 
        estadoVerificacion: filter !== 'todos' ? filter : undefined 
      });
      setDocuments(data);
    } catch (error) {
      console.error('Error cargando documentos:', error);
      alert('Error al cargar los documentos');
    } finally {
      setLoading(false);
    }
  };

  const handleVerify = async (documentId, resultado) => {
    if (!window.confirm(`¬øConfirmar ${resultado === 'aprobado' ? 'aprobaci√≥n' : 'rechazo'} del documento?`)) {
      return;
    }

    try {
      await adminService.verifyDocument(documentId, {
        verificadorId: user.id,
        resultado,
        notas: verificationNotes || undefined
      });
      alert(`Documento ${resultado === 'aprobado' ? 'aprobado' : 'rechazado'} exitosamente`);
      setShowModal(false);
      setSelectedDoc(null);
      setVerificationNotes('');
      loadDocuments();
    } catch (error) {
      console.error('Error verificando documento:', error);
      alert('Error al verificar el documento');
    }
  };

  const openDocumentModal = (doc) => {
    setSelectedDoc(doc);
    setShowModal(true);
  };

  const closeModal = () => {
    setShowModal(false);
    setSelectedDoc(null);
    setVerificationNotes('');
  };

  const getStatusBadge = (estado) => {
    const badges = {
      'pendiente': { color: 'warning', text: 'Pendiente', icon: '‚è≥' },
      'aprobado': { color: 'success', text: 'Aprobado', icon: '‚úÖ' },
      'rechazado': { color: 'danger', text: 'Rechazado', icon: '‚ùå' }
    };
    const badge = badges[estado] || badges['pendiente'];
    return (
      <span className={`admin-badge admin-badge--${badge.color}`}>
        {badge.icon} {badge.text}
      </span>
    );
  };

  const getDocumentIcon = (tipo) => {
    const icons = {
      'dui': 'ü™™',
      'licencia': 'üöó',
      'titulo': 'üéì',
      'certificado': 'üìú',
      'antecedentes': 'üìã'
    };
    return icons[tipo] || 'üìÑ';
  };

  if (loading) {
    return (
      <div className="admin-section__loading">
        <div className="admin-dashboard__spinner" />
        <p>Cargando documentos...</p>
      </div>
    );
  }

  const pendingCount = documents.filter(d => d.estadoVerificacion === 'pendiente').length;

  return (
    <div className="admin-section">
      <div className="admin-section__header">
        <div>
          <h2>Verificaci√≥n de Documentos</h2>
          <p className="admin-section__subtitle">
            Revisa y verifica los documentos de los trabajadores
          </p>
        </div>
      </div>

      {/* Estad√≠sticas */}
      <div className="admin-section__stats">
        <div className="admin-stat-badge admin-stat-badge--warning">
          <strong>{pendingCount}</strong>
          <span>Pendientes de revisi√≥n</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--success">
          <strong>{documents.filter(d => d.estadoVerificacion === 'aprobado').length}</strong>
          <span>Aprobados</span>
        </div>
        <div className="admin-stat-badge admin-stat-badge--danger">
          <strong>{documents.filter(d => d.estadoVerificacion === 'rechazado').length}</strong>
          <span>Rechazados</span>
        </div>
      </div>

      {/* Filtros */}
      <div className="admin-filters">
        <button 
          className={`admin-filter-chip ${filter === 'todos' ? 'active' : ''}`}
          onClick={() => setFilter('todos')}
        >
          Todos ({documents.length})
        </button>
        <button 
          className={`admin-filter-chip ${filter === 'pendiente' ? 'active' : ''}`}
          onClick={() => setFilter('pendiente')}
        >
          ‚è≥ Pendientes ({pendingCount})
        </button>
        <button 
          className={`admin-filter-chip ${filter === 'aprobado' ? 'active' : ''}`}
          onClick={() => setFilter('aprobado')}
        >
          ‚úÖ Aprobados
        </button>
        <button 
          className={`admin-filter-chip ${filter === 'rechazado' ? 'active' : ''}`}
          onClick={() => setFilter('rechazado')}
        >
          ‚ùå Rechazados
        </button>
      </div>

      {/* Lista de Documentos */}
      <div className="admin-cards-grid">
        {documents.map(doc => (
          <div key={doc.id} className="admin-card">
            <div className="admin-card__header">
              <div className="admin-card__user">
                <span className="admin-card__icon">
                  {getDocumentIcon(doc.tipoDocumento)}
                </span>
                <div>
                  <h4>{doc.usuario?.nombre || 'Usuario'}</h4>
                  <p className="admin-card__email">{doc.usuario?.email}</p>
                </div>
              </div>
              {getStatusBadge(doc.estadoVerificacion)}
            </div>

            <div className="admin-card__body">
              <div className="admin-card__info">
                <span className="admin-card__label">Tipo de documento:</span>
                <span className="admin-card__value">{doc.tipoDocumento}</span>
              </div>
              <div className="admin-card__info">
                <span className="admin-card__label">Fecha de carga:</span>
                <span className="admin-card__value">
                  {new Date(doc.fecha_carga).toLocaleDateString()}
                </span>
              </div>
              {doc.fecha_vencimiento && (
                <div className="admin-card__info">
                  <span className="admin-card__label">Vencimiento:</span>
                  <span className="admin-card__value">
                    {new Date(doc.fecha_vencimiento).toLocaleDateString()}
                  </span>
                </div>
              )}
            </div>

            <div className="admin-card__actions">
              <button 
                className="admin-btn admin-btn--secondary admin-btn--sm"
                onClick={() => window.open(doc.urlDocumento, '_blank')}
              >
                üëÅÔ∏è Ver Documento
              </button>
              {doc.estadoVerificacion === 'pendiente' && (
                <button 
                  className="admin-btn admin-btn--primary admin-btn--sm"
                  onClick={() => openDocumentModal(doc)}
                >
                  ‚úì Verificar
                </button>
              )}
            </div>
          </div>
        ))}
      </div>

      {documents.length === 0 && (
        <div className="admin-empty-state">
          <div className="admin-empty-state__icon">üìÑ</div>
          <h3>No hay documentos {filter !== 'todos' ? filter + 's' : ''}</h3>
          <p>Los documentos aparecer√°n aqu√≠ cuando sean subidos por los trabajadores</p>
        </div>
      )}

      {/* Modal de Verificaci√≥n */}
      {showModal && selectedDoc && (
        <>
          <div className="admin-modal-overlay" onClick={closeModal} />
          <div className="admin-modal admin-modal--large">
            <div className="admin-modal__header">
              <h3>Verificar Documento</h3>
              <button className="admin-modal__close" onClick={closeModal}>√ó</button>
            </div>

            <div className="admin-modal__content">
              <div className="admin-verification">
                <div className="admin-verification__info">
                  <h4>Informaci√≥n del Usuario</h4>
                  <p><strong>Nombre:</strong> {selectedDoc.usuario?.nombre}</p>
                  <p><strong>Email:</strong> {selectedDoc.usuario?.email}</p>
                  <p><strong>Tipo:</strong> {selectedDoc.tipoDocumento}</p>
                  <p><strong>Fecha de carga:</strong> {new Date(selectedDoc.fecha_carga).toLocaleDateString()}</p>
                </div>

                <div className="admin-verification__document">
                  <h4>Vista Previa del Documento</h4>
                  <div className="admin-verification__preview">
                    <button 
                      className="admin-btn admin-btn--primary"
                      onClick={() => window.open(selectedDoc.urlDocumento, '_blank')}
                    >
                      üîó Abrir Documento en Nueva Pesta√±a
                    </button>
                  </div>
                </div>

                <div className="admin-form__group">
                  <label className="admin-form__label">Notas de Verificaci√≥n (opcional)</label>
                  <textarea
                    className="admin-form__textarea"
                    value={verificationNotes}
                    onChange={(e) => setVerificationNotes(e.target.value)}
                    rows="4"
                    placeholder="Agrega comentarios sobre la verificaci√≥n..."
                  />
                </div>
              </div>
            </div>

            <div className="admin-modal__footer">
              <button 
                className="admin-btn admin-btn--danger"
                onClick={() => handleVerify(selectedDoc.id, 'rechazado')}
              >
                ‚ùå Rechazar
              </button>
              <button 
                className="admin-btn admin-btn--success"
                onClick={() => handleVerify(selectedDoc.id, 'aprobado')}
              >
                ‚úÖ Aprobar
              </button>
            </div>
          </div>
        </>
      )}
    </div>
  );
};

export default DocumentsVerifier;
```

## c:\Users\rexma\Desktop\chambing-website\src\components\admin\UsersManager.jsx
```
import React, { useState, useEffect } from 'react';
import { useTranslation } from 'react-i18next';
import adminService from '../../services/adminService';

const UsersManager = ({ isSuperAdmin }) => {
  const { t } = useTranslation();
  const [users, setUsers] = useState([]);
  const [pendingWorkers, setPendingWorkers] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchTerm, setSearchTerm] = useState('');
  const [filterType, setFilterType] = useState('todos');
  const [selectedUser, setSelectedUser] = useState(null);
  const [showModal, setShowModal] = useState(false);
  const [showVerificationTab, setShowVerificationTab] = useState(true);

  useEffect(() => {
    loadUsers();
    loadPendingWorkers();
  }, []);

  const loadUsers = async () => {
    try {
      setLoading(true);
      const data = await adminService.getAllUsers();
      setUsers(data);
    } catch (error) {
      console.error('Error cargando usuarios:', error);
      alert('Error al cargar usuarios');
    } finally {
      setLoading(false);
    }
  };

  const loadPendingWorkers = async () => {
    try {
      const data = await adminService.getPendingWorkers();
      setPendingWorkers(data);
    } catch (error) {
      console.error('Error cargando trabajadores pendientes:', error);
    }
  };

  const handleVerifyWorker = async (userId, verified) => {
    try {
      await adminService.verifyWorker(userId, verified);
      alert(verified ? 'Trabajador verificado exitosamente' : 'Verificaci√≥n removida');
      loadUsers();
      loadPendingWorkers();
    } catch (error) {
      console.error('Error verificando trabajador:', error);
      alert('Error al verificar trabajador');
    }
  };

  const handleDelete = async (userId) => {
    if (!window.confirm('¬øEst√°s seguro de eliminar este usuario?')) {
      return;
    }

    try {
      await adminService.deleteUser(userId);
      alert('Usuario eliminado exitosamente');
      loadUsers();
    } catch (error) {
      console.error('Error eliminando usuario:', error);
      alert('Error al eliminar usuario');
    }
  };

  const handleSuspend = async (userId) => {
    const reason = window.prompt('Motivo de la suspensi√≥n:');
    if (!reason) return;

    try {
      await adminService.suspendUser(userId, reason);
      alert('Usuario suspendido exitosamente');
      loadUsers();
    } catch (error) {
      console.error('Error suspendiendo usuario:', error);
      alert('Error al suspender usuario');
    }
  };

  const viewUserDetails = (user) => {
    setSelectedUser(user);
    setShowModal(true);
  };

  const closeModal = () => {
    setShowModal(false);
    setSelectedUser(null);
  };

  const filteredUsers = users.filter(user => {
    const matchesSearch = user.nombre?.toLowerCase().includes(searchTerm.toLowerCase()) ||
                         user.email?.toLowerCase().includes(searchTerm.toLowerCase());
    const matchesType = filterType === 'todos' || user.tipo_usuario === filterType;
    return matchesSearch && matchesType;
  });

  const getUserTypeIcon = (type) => {
    const icons = {
      'cliente': 'üë§',
      'trabajador': 'üîß',
      'admin': 'üë®‚Äçüíº',
      'super_admin': 'üëë'
    };
    return icons[type] || 'üë§';
  };

  const getUserTypeBadge = (user) => {
    const type = user.tipo_usuario;
    const badges = {
      'cliente': { color: 'primary', text: 'Cliente' },
      'trabajador': { color: 'info', text: 'Trabajador' }
    };
    
    const badge = badges[type] || { color: 'muted', text: type };
    
    return (
      <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>
        <span className={`admin-badge admin-badge--${badge.color}`}>
          {getUserTypeIcon(type)} {badge.text}
        </span>
        {/* Badge de verificaci√≥n para trabajadores */}
        {type === 'trabajador' && (
          <span className={`admin-badge admin-badge--${user.verificado ? 'success' : 'warning'}`}>
            {user.verificado ? '‚úì Verificado' : '‚è≥ Pendiente'}
          </span>
        )}
      </div>
    );
  };

  if (loading) {
    return (
      <div className="admin-section__loading">
        <div className="admin-dashboard__spinner" />
        <p>Cargando usuarios...</p>
      </div>
    );
  }

  return (
    <div className="admin-section">
      {/* Tabs: Todos los usuarios vs Trabajadores pendientes */}
      <div className="admin-tabs">
        <button
          className={`admin-tab ${showVerificationTab ? 'admin-tab--active' : ''}`}
          onClick={() => setShowVerificationTab(true)}
        >
          üîç Verificaci√≥n de Trabajadores
          {pendingWorkers.length > 0 && (
            <span className="admin-badge admin-badge--warning admin-badge--sm">
              {pendingWorkers.length}
            </span>
          )}
        </button>
        <button
          className={`admin-tab ${!showVerificationTab ? 'admin-tab--active' : ''}`}
          onClick={() => setShowVerificationTab(false)}
        >
          üë• Todos los Usuarios
        </button>
      </div>

      {showVerificationTab ? (
        // TAB: Verificaci√≥n de Trabajadores
        <div className="verification-section">
          <div className="admin-section__header">
            <div>
              <h2>Trabajadores Pendientes de Verificaci√≥n</h2>
              <p className="admin-section__subtitle">
                Revisa y verifica a los trabajadores que se han registrado
              </p>
            </div>
          </div>

          {pendingWorkers.length === 0 ? (
            <div className="admin-empty-state">
              <div className="admin-empty-state__icon">‚úÖ</div>
              <h3>No hay trabajadores pendientes</h3>
              <p>Todos los trabajadores han sido verificados</p>
            </div>
          ) : (
            <div className="workers-verification-grid">
              {pendingWorkers.map(worker => (
                <div key={worker.id} className="worker-verification-card">
                  <div className="worker-card__header">
                    {worker.foto_perfil ? (
                      <img src={worker.foto_perfil} alt="" className="worker-card__photo" />
                    ) : (
                      <div className="worker-card__photo-placeholder">
                        {worker.nombre?.charAt(0) || '?'}
                      </div>
                    )}
                    <div className="worker-card__info">
                      <h3>{worker.nombre} {worker.apellido}</h3>
                      <p className="worker-card__email">{worker.email}</p>
                      <p className="worker-card__location">
                        üìç {worker.municipio}, {worker.departamento}
                      </p>
                      <p className="worker-card__date">
                        Registrado: {new Date(worker.fecha_registro).toLocaleDateString()}
                      </p>
                    </div>
                  </div>

                  <div className="worker-card__details">
                    <div className="worker-detail">
                      <span className="worker-detail__label">Tel√©fono:</span>
                      <span className="worker-detail__value">{worker.telefono || 'No registrado'}</span>
                    </div>
                    <div className="worker-detail">
                      <span className="worker-detail__label">DUI:</span>
                      <span className="worker-detail__value">{worker.dui || 'No registrado'}</span>
                    </div>
                    {worker.biografia && (
                      <div className="worker-detail">
                        <span className="worker-detail__label">Biograf√≠a:</span>
                        <p className="worker-detail__bio">{worker.biografia}</p>
                      </div>
                    )}
                    {worker.habilidades && worker.habilidades.length > 0 && (
                      <div className="worker-detail">
                        <span className="worker-detail__label">Habilidades:</span>
                        <div className="worker-skills">
                          {worker.habilidades.map((skill, idx) => (
                            <span key={idx} className="skill-badge">
                              {skill.nombre}
                            </span>
                          ))}
                        </div>
                      </div>
                    )}
                  </div>

                  <div className="worker-card__actions">
                    <button
                      className="admin-btn admin-btn--success"
                      onClick={() => handleVerifyWorker(worker.id, true)}
                    >
                      ‚úì Verificar
                    </button>
                    <button
                      className="admin-btn admin-btn--secondary"
                      onClick={() => viewUserDetails(worker)}
                    >
                      üëÅÔ∏è Ver Detalles
                    </button>
                    <button
                      className="admin-btn admin-btn--danger"
                      onClick={() => handleDelete(worker.id)}
                    >
                      üóëÔ∏è Eliminar
                    </button>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      ) : (
        // TAB: Todos los Usuarios
        <>
          <div className="admin-section__header">
            <div>
              <h2>Gesti√≥n de Usuarios</h2>
              <p className="admin-section__subtitle">
                Administra todos los usuarios de la plataforma
              </p>
            </div>
          </div>

          {/* Estad√≠sticas */}
          <div className="admin-section__stats">
            <div className="admin-stat-badge admin-stat-badge--primary">
              <strong>{users.length}</strong>
              <span>Total Usuarios</span>
            </div>
            <div className="admin-stat-badge admin-stat-badge--info">
              <strong>{users.filter(u => u.tipo_usuario === 'trabajador').length}</strong>
              <span>Trabajadores</span>
            </div>
            <div className="admin-stat-badge admin-stat-badge--success">
              <strong>{users.filter(u => u.tipo_usuario === 'trabajador' && u.verificado).length}</strong>
              <span>Verificados</span>
            </div>
            <div className="admin-stat-badge admin-stat-badge--primary">
              <strong>{users.filter(u => u.tipo_usuario === 'cliente').length}</strong>
              <span>Clientes</span>
            </div>
          </div>

          {/* Filtros y B√∫squeda */}
          <div className="admin-section__controls">
            <div className="admin-search">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
              <input
                type="text"
                placeholder="Buscar por nombre o email..."
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                className="admin-search__input"
              />
            </div>

            <div className="admin-filters">
              <button 
                className={`admin-filter-chip ${filterType === 'todos' ? 'active' : ''}`}
                onClick={() => setFilterType('todos')}
              >
                Todos
              </button>
              <button 
                className={`admin-filter-chip ${filterType === 'cliente' ? 'active' : ''}`}
                onClick={() => setFilterType('cliente')}
              >
                Clientes
              </button>
              <button 
                className={`admin-filter-chip ${filterType === 'trabajador' ? 'active' : ''}`}
                onClick={() => setFilterType('trabajador')}
              >
                Trabajadores
              </button>
            </div>
          </div>

          {/* Tabla de Usuarios */}
          <div className="admin-table-container">
            <table className="admin-table">
              <thead>
                <tr>
                  <th>Usuario</th>
                  <th>Email</th>
                  <th>Tipo</th>
                  <th>Ubicaci√≥n</th>
                  <th>Fecha Registro</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                {filteredUsers.map(user => (
                  <tr key={user.id}>
                    <td>
                      <div className="admin-table__user">
                        {user.foto_perfil ? (
                          <img src={user.foto_perfil} alt="" className="admin-table__avatar" />
                        ) : (
                          <div className="admin-table__avatar-placeholder">
                            {user.nombre?.charAt(0) || '?'}
                          </div>
                        )}
                        <strong>{user.nombre} {user.apellido}</strong>
                      </div>
                    </td>
                    <td>
                      <span className="admin-table__email">{user.email}</span>
                    </td>
                    <td>
                      {getUserTypeBadge(user)}
                    </td>
                    <td>
                      <span className="admin-table__location">
                        {user.municipio}, {user.departamento}
                      </span>
                    </td>
                    <td>
                      <span className="admin-table__date">
                        {new Date(user.fecha_registro).toLocaleDateString()}
                      </span>
                    </td>
                    <td>
                      <div className="admin-table__actions">
                        <button
                          className="admin-icon-btn admin-icon-btn--view"
                          onClick={() => viewUserDetails(user)}
                          title="Ver detalles"
                        >
                          üëÅÔ∏è
                        </button>
                        {user.tipo_usuario === 'trabajador' && (
                          <button
                            className={`admin-icon-btn ${user.verificado ? 'admin-icon-btn--warning' : 'admin-icon-btn--success'}`}
                            onClick={() => handleVerifyWorker(user.id, !user.verificado)}
                            title={user.verificado ? 'Remover verificaci√≥n' : 'Verificar'}
                          >
                            {user.verificado ? '‚úì' : '‚è≥'}
                          </button>
                        )}
                        <button
                          className="admin-icon-btn admin-icon-btn--warning"
                          onClick={() => handleSuspend(user.id)}
                          title="Suspender"
                        >
                          ‚è∏Ô∏è
                        </button>
                        <button
                          className="admin-icon-btn admin-icon-btn--delete"
                          onClick={() => handleDelete(user.id)}
                          title="Eliminar"
                        >
                          üóëÔ∏è
                        </button>
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>

            {filteredUsers.length === 0 && (
              <div className="admin-empty-state">
                <div className="admin-empty-state__icon">üë•</div>
                <h3>No se encontraron usuarios</h3>
                <p>Intenta con otros filtros de b√∫squeda</p>
              </div>
            )}
          </div>
        </>
      )}

      {/* Modal de Detalles */}
      {showModal && selectedUser && (
        <>
          <div className="admin-modal-overlay" onClick={closeModal} />
          <div className="admin-modal">
            <div className="admin-modal__header">
              <h3>Detalles del Usuario</h3>
              <button className="admin-modal__close" onClick={closeModal}>√ó</button>
            </div>
            
            <div className="admin-modal__content">
              <div className="admin-user-details">
                <div className="admin-user-details__header">
                  {selectedUser.foto_perfil ? (
                    <img src={selectedUser.foto_perfil} alt="" className="admin-user-details__avatar" />
                  ) : (
                    <div className="admin-user-details__avatar-placeholder">
                      {selectedUser.nombre?.charAt(0) || '?'}
                    </div>
                  )}
                  <div>
                    <h4>{selectedUser.nombre} {selectedUser.apellido}</h4>
                    <p>{selectedUser.email}</p>
                    {getUserTypeBadge(selectedUser)}
                  </div>
                </div>

                <div className="admin-user-details__info">
                  <div className="admin-info-row">
                    <span className="admin-info-label">Tel√©fono:</span>
                    <span className="admin-info-value">
                      {selectedUser.telefono || 'No registrado'}
                    </span>
                  </div>
                  <div className="admin-info-row">
                    <span className="admin-info-label">DUI:</span>
                    <span className="admin-info-value">
                      {selectedUser.dui || 'No registrado'}
                    </span>
                  </div>
                  <div className="admin-info-row">
                    <span className="admin-info-label">Ubicaci√≥n:</span>
                    <span className="admin-info-value">
                      {selectedUser.municipio}, {selectedUser.departamento}
                    </span>
                  </div>
                  <div className="admin-info-row">
                    <span className="admin-info-label">Direcci√≥n:</span>
                    <span className="admin-info-value">
                      {selectedUser.direccion || 'No registrada'}
                    </span>
                  </div>
                  <div className="admin-info-row">
                    <span className="admin-info-label">Fecha de Registro:</span>
                    <span className="admin-info-value">
                      {new Date(selectedUser.fecha_registro).toLocaleDateString()}
                    </span>
                  </div>
                  {selectedUser.biografia && (
                    <div className="admin-info-row">
                      <span className="admin-info-label">Biograf√≠a:</span>
                      <p className="admin-info-value">{selectedUser.biografia}</p>
                    </div>
                  )}
                </div>
              </div>
            </div>

            <div className="admin-modal__footer">
              <button className="admin-btn admin-btn--secondary" onClick={closeModal}>
                Cerrar
              </button>
            </div>
          </div>
        </>
      )}
    </div>
  );
};

export default UsersManager;
```

## c:\Users\rexma\Desktop\chambing-website\src\pages\AdminDashboard.jsx
```
import React, { useState, useEffect } from 'react';
import { useAuth } from '../context/AuthContext';
import { useTranslations } from '../hooks/useTranslations';
import adminService from '../services/adminService';
import CategoriesManager from '../components/admin/CategoriesManager';
import DocumentsVerifier from '../components/admin/DocumentsVerifier';
import ContractsManager from '../components/admin/ContractsManager';
import UsersManager from '../components/admin/UsersManager';
import RolesManager from '../components/admin/RolesManager';
import AdminStats from '../components/admin/AdminStats';
import '../styles/admin-dashboard.scss';

const AdminDashboard = () => {
  const { user, logout } = useAuth();
  const { t } = useTranslations();
  const [activeTab, setActiveTab] = useState('stats');
  const [loading, setLoading] = useState(false);
  const [menuOpen, setMenuOpen] = useState(false);

  // ‚ú® NUEVO: Verificar permisos usando los roles administrativos
  // Los roles est√°n en user.roles (array de strings como ['admin', 'super_admin'])
  const userRoles = user?.roles || [];
  const isSuperAdmin = userRoles.includes('super_admin');
  const isAdmin = userRoles.includes('admin') || isSuperAdmin;

  useEffect(() => {
    if (!isAdmin) {
      window.location.href = '/dashboard';
    }
  }, [isAdmin]);

  const tabs = [
    { id: 'stats', name: 'Estad√≠sticas', icon: 'üìä', roles: ['admin', 'super_admin'] },
    { id: 'categories', name: 'Categor√≠as', icon: 'üè∑Ô∏è', roles: ['admin', 'super_admin'] },
    { id: 'documents', name: 'Documentos', icon: 'üìÑ', roles: ['admin', 'super_admin'] },
    { id: 'contracts', name: 'Contratos', icon: 'üìù', roles: ['admin', 'super_admin'] },
    { id: 'users', name: 'Usuarios', icon: 'üë•', roles: ['admin', 'super_admin'] },
    { id: 'roles', name: 'Roles', icon: 'üîë', roles: ['super_admin'] }
  ];

  // Filtrar tabs seg√∫n los roles del usuario
  const visibleTabs = tabs.filter(tab => 
    tab.roles.some(role => userRoles.includes(role))
  );

  const renderTabContent = () => {
    switch(activeTab) {
      case 'stats':
        return <AdminStats isSuperAdmin={isSuperAdmin} />;
      case 'categories':
        return <CategoriesManager />;
      case 'documents':
        return <DocumentsVerifier />;
      case 'contracts':
        return <ContractsManager />;
      case 'users':
        return <UsersManager isSuperAdmin={isSuperAdmin} />;
      case 'roles':
        return isSuperAdmin ? <RolesManager /> : null;
      default:
        return <AdminStats isSuperAdmin={isSuperAdmin} />;
    }
  };

  if (!isAdmin) {
    return null;
  }

  return (
    <div className="admin-dashboard">
      {/* Header */}
      <header className="admin-dashboard__header">
        <div className="admin-dashboard__header-content">
          <div className="admin-dashboard__branding">
            <h1>üõ°Ô∏è Panel de Administraci√≥n</h1>
            <span className="admin-dashboard__badge">
              {isSuperAdmin ? 'Super Admin' : 'Admin'}
            </span>
          </div>

          <div className="admin-dashboard__header-actions">
            <button 
              className="admin-dashboard__icon-btn"
              onClick={() => window.location.href = '/dashboard'}
              title="Volver al dashboard"
            >
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
              </svg>
            </button>

            <button
              className="admin-dashboard__icon-btn"
              onClick={() => setMenuOpen(!menuOpen)}
            >
              {user?.foto_perfil ? (
                <img src={user.foto_perfil} alt="" className="admin-dashboard__avatar-img" />
              ) : (
                <div className="admin-dashboard__avatar-placeholder">
                  {user?.nombre?.charAt(0) || 'A'}
                </div>
              )}
            </button>

            {menuOpen && (
              <>
                <div 
                  className="admin-dashboard__overlay"
                  onClick={() => setMenuOpen(false)}
                />
                <div className="admin-dashboard__menu">
                  <div className="admin-dashboard__menu-header">
                    <p className="admin-dashboard__menu-name">{user?.nombre}</p>
                    <p className="admin-dashboard__menu-email">{user?.email}</p>
                    {/* Mostrar roles administrativos */}
                    <div className="admin-dashboard__menu-roles">
                      {userRoles.map(role => (
                        <span key={role} className="admin-role-badge">
                          {role === 'super_admin' ? 'üëë Super Admin' : 
                           role === 'admin' ? 'üë®‚Äçüíº Admin' : role}
                        </span>
                      ))}
                    </div>
                  </div>
                  <button
                    className="admin-dashboard__menu-item"
                    onClick={logout}
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    Cerrar Sesi√≥n
                  </button>
                </div>
              </>
            )}
          </div>
        </div>

        {/* Tabs Navigation */}
        <nav className="admin-dashboard__tabs">
          {visibleTabs.map(tab => (
            <button
              key={tab.id}
              className={`admin-dashboard__tab ${activeTab === tab.id ? 'admin-dashboard__tab--active' : ''}`}
              onClick={() => setActiveTab(tab.id)}
            >
              <span className="admin-dashboard__tab-icon">{tab.icon}</span>
              <span className="admin-dashboard__tab-name">{tab.name}</span>
            </button>
          ))}
        </nav>
      </header>

      {/* Main Content */}
      <main className="admin-dashboard__content">
        {loading ? (
          <div className="admin-dashboard__loading">
            <div className="admin-dashboard__spinner" />
            <p>Cargando...</p>
          </div>
        ) : (
          renderTabContent()
        )}
      </main>
    </div>
  );
};

export default AdminDashboard;
```

